var ii=Object.defineProperty;var oi=(t,e,n)=>e in t?ii(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ut=(t,e,n)=>oi(t,typeof e!="symbol"?e+"":e,n);import{b as ai,a as E,n as ri,c as rt,t as W,d as $e}from"../chunks/disclose-version.D63J3MOZ.js";import{y as dt,G as jt,B as dn,A as un,F as ue,v as vn,P as si,ar as fn,Q as li,R as We,V as Yt,z as Dt,an as ci,aw as de,W as Te,w as Ee,X as _n,_ as pn,C as Qt,ax as Ne,ay as Fe,az as Le,aA as di,aq as ui,aB as vi,x as mn,aC as bn,ah as hn,aD as fi,a0 as _i,J as ke,aE as pi,al as mi,E as gn,aF as wn,aG as bi,O as hi,aH as gi,aI as wi,aJ as xi,aK as yi,Y as Ae,i as xn,aL as $i,ae as ki,n as Jt,aM as Ci,aN as Si,ag as Ue,a7 as Ke,aO as Ti,Z as Ei,L as ot,j as y,p as wt,c as m,e as C,d as v,t as $,b as xt,f as X,av as ht,g as Me,m as $t,aP as qe,ac as oe,aQ as Ie}from"../chunks/utils.DQy3KIPA.js";import{c as Ni,a as Et,l as lt,p as Ot,s as ut,d as Ct,i as st,e as gt,b as Tt,f as Li}from"../chunks/props.D6gp1TSG.js";import{i as Ai,a as Ze,b as Mi,c as Ii,d as Di,e as Nt,f as zi,n as Pi,g as Bi,j as Oi,l as yn,s as z,k as Vt}from"../chunks/render.mz-C_lnI.js";import{i as be}from"../chunks/legacy.BTh-yES9.js";import{$ as St,D as $n,a as Ge,K as Ce,L as Zt,b as kn,i as Ri}from"../chunks/runtime.BgHG1BY4.js";import{o as ne}from"../chunks/index-client.Bl9EFTK9.js";import{b as ve}from"../chunks/paths.TLwQBrZv.js";let Rt=null;function Ve(t){Rt=t}function Ft(t,e){return e}function Hi(t,e,n,i){for(var o=[],a=e.length,r=0;r<a;r++)di(e[r].e,o,!0);var s=a>0&&o.length===0&&n!==null;if(s){var l=n.parentNode;ui(l),l.append(n),i.clear(),It(t,e[0].prev,e[a-1].next)}vi(o,()=>{for(var h=0;h<a;h++){var u=e[h];s||(i.delete(u.k),It(t,u.prev,u.next)),mn(u.e,!s)}})}function zt(t,e,n,i,o,a=null){var r=t,s={flags:e,items:new Map,first:null},l=(e&bn)!==0;if(l){var h=t;r=dt?jt(dn(h)):h.appendChild(un())}dt&&ue();var u=null,p=!1;vn(()=>{var _=n(),b=si(_)?_:_==null?[]:fn(_),g=b.length;if(p&&g===0)return;p=g===0;let c=!1;if(dt){var f=r.data===li;f!==(g===0)&&(r=We(),jt(r),Yt(!1),c=!0)}if(dt){for(var d=null,w,T=0;T<g;T++){if(Dt.nodeType===8&&Dt.data===ci){r=Dt,c=!0,Yt(!1);break}var k=b[T],x=i(k,T);w=Cn(Dt,s,d,null,k,x,T,o,e),s.items.set(x,w),d=w}g>0&&jt(We())}if(!dt){var S=hn;Wi(b,s,r,o,e,(S.f&de)!==0,i)}a!==null&&(g===0?u?Te(u):u=Ee(()=>a(r)):u!==null&&_n(u,()=>{u=null})),c&&Yt(!0),n()}),dt&&(r=Dt)}function Wi(t,e,n,i,o,a,r,s){var j,nt,V,q;var l=(o&fi)!==0,h=(o&(Ne|Le))!==0,u=t.length,p=e.items,_=e.first,b=_,g,c=null,f,d=[],w=[],T,k,x,S;if(l)for(S=0;S<u;S+=1)T=t[S],k=r(T,S),x=p.get(k),x!==void 0&&((j=x.a)==null||j.measure(),(f??(f=new Set)).add(x));for(S=0;S<u;S+=1){if(T=t[S],k=r(T,S),x=p.get(k),x===void 0){var D=b?b.e.nodes_start:n;c=Cn(D,e,c,c===null?e.first:c.next,T,k,S,i,o),p.set(k,c),d=[],w=[],b=c.next;continue}if(h&&Fi(x,T,S,o),x.e.f&de&&(Te(x.e),l&&((nt=x.a)==null||nt.unfix(),(f??(f=new Set)).delete(x))),x!==b){if(g!==void 0&&g.has(x)){if(d.length<w.length){var O=w[0],B;c=O.prev;var H=d[0],K=d[d.length-1];for(B=0;B<d.length;B+=1)Je(d[B],O,n);for(B=0;B<w.length;B+=1)g.delete(w[B]);It(e,H.prev,K.next),It(e,c,H),It(e,K,O),b=O,c=K,S-=1,d=[],w=[]}else g.delete(x),Je(x,b,n),It(e,x.prev,x.next),It(e,x,c===null?e.first:c.next),It(e,c,x),c=x;continue}for(d=[],w=[];b!==null&&b.k!==k;)(a||!(b.e.f&de))&&(g??(g=new Set)).add(b),w.push(b),b=b.next;if(b===null)continue;x=b}d.push(x),c=x,b=x.next}if(b!==null||g!==void 0){for(var L=g===void 0?[]:fn(g);b!==null;)(a||!(b.e.f&de))&&L.push(b),b=b.next;var N=L.length;if(N>0){var P=o&bn&&u===0?n:null;if(l){for(S=0;S<N;S+=1)(V=L[S].a)==null||V.measure();for(S=0;S<N;S+=1)(q=L[S].a)==null||q.fix()}Hi(e,L,P,p)}}l&&pn(()=>{var Q;if(f!==void 0)for(x of f)(Q=x.a)==null||Q.apply()}),Qt.first=e.first&&e.first.e,Qt.last=c&&c.e}function Fi(t,e,n,i){i&Ne&&Fe(t.v,e),i&Le?Fe(t.i,n):t.i=n}function Cn(t,e,n,i,o,a,r,s,l,h){var u=Rt,p=(l&Ne)!==0,_=(l&pi)===0,b=p?_?_i(o):ke(o):o,g=l&Le?ke(r):r,c={i:g,v:b,k:a,a:null,e:null,prev:n,next:i};Rt=c;try{return c.e=Ee(()=>s(t,b,g),dt),c.e.prev=n&&n.e,c.e.next=i&&i.e,n===null?e.first=c:(n.next=c,n.e.next=c.e),i!==null&&(i.prev=c,i.e.prev=c.e),c}finally{Rt=u}}function Je(t,e,n){for(var i=t.next?t.next.e.nodes_start:n,o=e?e.e.nodes_start:n,a=t.e.nodes_start;a!==i;){var r=mi(a);o.before(a),a=r}}function It(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function ct(t,e,n,i,o){var s;dt&&ue();var a=(s=e.$$slots)==null?void 0:s[n],r=!1;a===!0&&(a=e.children,r=!0),a===void 0||a(t,r?()=>i:i)}function Ui(t,e,n,i,o,a){let r=dt;dt&&ue();var s,l,h=null;dt&&Dt.nodeType===1&&(h=Dt,ue());var u=dt?Dt:t,p,_=Rt;vn(()=>{const b=e()||null;var g=wn;if(b!==s){var c=Rt;Ve(_),p&&(b===null?_n(p,()=>{p=null,l=null}):b===l?Te(p):(mn(p),Ze(!1))),b&&b!==l&&(p=Ee(()=>{if(h=dt?h:document.createElementNS(g,b),ai(h,h),i){dt&&Ai(b)&&h.append(document.createComment(""));var f=dt?dn(h):h.appendChild(un());dt&&(f===null?Yt(!1):jt(f)),i(h,f)}Qt.nodes_end=h,u.before(h)})),s=b,s&&(l=s),Ze(!0),Ve(c)}},gn),r&&(Yt(!0),jt(u))}function Ht(t){if(dt){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var i=t.value;U(t,"value",null),t.value=i}if(t.hasAttribute("checked")){var o=t.checked;U(t,"checked",null),t.checked=o}}};t.__on_r=n,bi(n),Mi()}}function Ki(t,e){var n=t.__attributes??(t.__attributes={});n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function qi(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function U(t,e,n,i){var o=t.__attributes??(t.__attributes={});dt&&(o[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||o[e]!==(o[e]=n)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[gi]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Sn(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function je(t,e,n,i,o=!1,a=!1,r=!1){var s=e||{},l=t.tagName==="OPTION";for(var h in e)h in n||(n[h]=null);var u=Sn(t),p=t.__attributes??(t.__attributes={});for(const d in n){let w=n[d];if(l&&d==="value"&&w==null){t.value=t.__value="",s[d]=w;continue}var _=s[d];if(w!==_){s[d]=w;var b=d[0]+d[1];if(b!=="$$"){if(b==="on"){const T={},k="$$"+d;let x=d.slice(2);var g=Bi(x);if(Ii(x)&&(x=x.slice(0,-7),T.capture=!0),!g&&_){if(w!=null)continue;t.removeEventListener(x,s[k],T),s[k]=null}if(w!=null)if(g)t[`__${x}`]=w,Nt([x]);else{let S=function(D){s[d].call(this,D)};s[k]=Di(x,t,S,T)}else g&&(t[`__${x}`]=void 0)}else if(d==="style"&&w!=null)t.style.cssText=w+"";else if(d==="autofocus")zi(t,!!w);else if(d==="__value"||d==="value"&&w!=null)t.value=t[d]=t.__value=w;else if(d==="selected"&&l)qi(t,w);else{var c=d;o||(c=Pi(c));var f=c==="defaultValue"||c==="defaultChecked";if(w==null&&!a&&!f)if(p[d]=null,c==="value"||c==="checked"){let T=t;if(c==="value"){let k=T.defaultValue;T.removeAttribute(c),T.defaultValue=k}else{let k=T.defaultChecked;T.removeAttribute(c),T.defaultChecked=k}}else t.removeAttribute(d);else f||u.includes(c)&&(a||typeof w!="string")?t[c]=w:typeof w!="function"&&(dt&&(c==="src"||c==="href"||c==="srcset")||U(t,c,w))}d==="style"&&"__styles"in t&&(t.__styles={})}}}return s}var Ye=new Map;function Sn(t){var e=Ye.get(t.nodeName);if(e)return e;Ye.set(t.nodeName,e=[]);for(var n,i=t,o=Element.prototype;o!==i;){n=wi(i);for(var a in n)n[a].set&&e.push(a);i=hi(i)}return e}function Zi(t,e){var n=t.__className,i=Gi(e);dt&&t.className===i?t.__className=i:(n!==i||dt&&t.className!==i)&&(e==null?t.removeAttribute("class"):t.className=i,t.__className=i)}function Gi(t){return t??""}function kt(t,e,n){if(n){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}function ae(t,e,n,i){var o=t.__styles??(t.__styles={});o[e]!==n&&(o[e]=n,n==null?t.style.removeProperty(e):t.style.setProperty(e,n,""))}const Vi=()=>performance.now(),At={tick:t=>requestAnimationFrame(t),now:()=>Vi(),tasks:new Set};function Tn(){const t=At.now();At.tasks.forEach(e=>{e.c(t)||(At.tasks.delete(e),e.f())}),At.tasks.size!==0&&At.tick(Tn)}function Ji(t){let e;return At.tasks.size===0&&At.tick(Tn),{promise:new Promise(n=>{At.tasks.add(e={c:t,f:n})}),abort(){At.tasks.delete(e)}}}function re(t,e){t.dispatchEvent(new CustomEvent(e))}function ji(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Xe(t){const e={},n=t.split(";");for(const i of n){const[o,a]=i.split(":");if(!o||a===void 0)break;const r=ji(o.trim());e[r]=a.trim()}return e}const Yi=t=>t;function Xi(t,e,n){var i=Rt,o,a,r,s=null;i.a??(i.a={element:t,measure(){o=this.element.getBoundingClientRect()},apply(){if(r==null||r.abort(),a=this.element.getBoundingClientRect(),o.left!==a.left||o.right!==a.right||o.top!==a.top||o.bottom!==a.bottom){const l=e()(this.element,{from:o,to:a},n==null?void 0:n());r=fe(this.element,l,void 0,1,()=>{r==null||r.abort(),r=void 0})}},fix(){if(!t.getAnimations().length){var{position:l,width:h,height:u}=getComputedStyle(t);if(l!=="absolute"&&l!=="fixed"){var p=t.style;s={position:p.position,width:p.width,height:p.height,transform:p.transform},p.position="absolute",p.width=h,p.height=u;var _=t.getBoundingClientRect();if(o.left!==_.left||o.top!==_.top){var b=`translate(${o.left-_.left}px, ${o.top-_.top}px)`;p.transform=p.transform?`${p.transform} ${b}`:b}}}},unfix(){if(s){var l=t.style;l.position=s.position,l.width=s.width,l.height=s.height,l.transform=s.transform}}}),i.a.element=t}function Mt(t,e,n,i){var o=(t&$i)!==0,a=(t&Ci)!==0,r=o&&a,s=(t&Si)!==0,l=r?"both":o?"in":"out",h,u=e.inert,p,_;function b(){var w=hn,T=Qt;Ue(null),Ke(null);try{return h??(h=n()(e,(i==null?void 0:i())??{},{direction:l}))}finally{Ue(w),Ke(T)}}var g={is_global:s,in(){var w;if(e.inert=u,!o){_==null||_.abort(),(w=_==null?void 0:_.reset)==null||w.call(_);return}a||p==null||p.abort(),re(e,"introstart"),p=fe(e,b(),_,1,()=>{re(e,"introend"),p==null||p.abort(),p=h=void 0})},out(w){if(!a){w==null||w(),h=void 0;return}e.inert=!0,re(e,"outrostart"),_=fe(e,b(),p,0,()=>{re(e,"outroend"),w==null||w()})},stop:()=>{p==null||p.abort(),_==null||_.abort()}},c=Qt;if((c.transitions??(c.transitions=[])).push(g),o&&Oi){var f=s;if(!f){for(var d=c.parent;d&&d.f&gn;)for(;(d=d.parent)&&!(d.f&xi););f=!d||(d.f&yi)!==0}f&&Ae(()=>{xn(()=>g.in())})}}function fe(t,e,n,i,o){var a=i===1;if(ki(e)){var r,s=!1;return pn(()=>{if(!s){var f=e({direction:a?"in":"out"});r=fe(t,f,n,i,o)}}),{abort:()=>{s=!0,r==null||r.abort()},deactivate:()=>r.deactivate(),reset:()=>r.reset(),t:()=>r.t()}}if(n==null||n.deactivate(),!(e!=null&&e.duration))return o(),{abort:Jt,deactivate:Jt,reset:Jt,t:()=>i};const{delay:l=0,css:h,tick:u,easing:p=Yi}=e;var _=[];if(a&&n===void 0&&(u&&u(0,1),h)){var b=Xe(h(0,1));_.push(b,b)}var g=()=>1-i,c=t.animate(_,{duration:l});return c.onfinish=()=>{var f=(n==null?void 0:n.t())??1-i;n==null||n.abort();var d=i-f,w=e.duration*Math.abs(d),T=[];if(w>0){if(h)for(var k=Math.ceil(w/16.666666666666668),x=0;x<=k;x+=1){var S=f+d*p(x/k),D=h(S,1-S);T.push(Xe(D))}g=()=>{var O=c.currentTime;return f+d*p(O/w)},u&&Ji(()=>{if(c.playState!=="running")return!1;var O=g();return u(O,1-O),!0})}c=t.animate(T,{duration:w,fill:"forwards"}),c.onfinish=()=>{g=()=>i,u==null||u(i,1-i),o()}},{abort:()=>{c&&(c.cancel(),c.effect=null,c.onfinish=Jt)},deactivate:()=>{o=Jt},reset:()=>{i===0&&(u==null||u(1,0))},t:()=>g()}}function Gt(t,e,n=e){var i=Ti();yn(t,"input",o=>{var a=o?t.defaultValue:t.value;if(a=he(t)?ge(a):a,n(a),i&&a!==(a=e())){var r=t.selectionStart,s=t.selectionEnd;t.value=a??"",s!==null&&(t.selectionStart=r,t.selectionEnd=Math.min(s,t.value.length))}}),(dt&&t.defaultValue!==t.value||xn(e)==null&&t.value)&&n(he(t)?ge(t.value):t.value),Ei(()=>{var o=e();he(t)&&o===ge(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function he(t){var e=t.type;return e==="number"||e==="range"}function ge(t){return t===""?null:+t}function En(t,e,n){if(t.multiple)return eo(t,e);for(var i of t.options){var o=Xt(i);if(Ni(o,e)){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Qi(t,e){Ae(()=>{var n=new MutationObserver(()=>{var i=t.__value;En(t,i)});return n.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function to(t,e,n=e){var i=!0;yn(t,"change",o=>{var a=o?"[selected]":":checked",r;if(t.multiple)r=[].map.call(t.querySelectorAll(a),Xt);else{var s=t.querySelector(a)??t.querySelector("option:not([disabled])");r=s&&Xt(s)}n(r)}),Ae(()=>{var o=e();if(En(t,o,i),i&&o===void 0){var a=t.querySelector(":checked");a!==null&&(o=Xt(a),n(o))}t.__value=o,i=!1}),Qi(t)}function eo(t,e){for(var n of t.options)n.selected=~e.indexOf(Xt(n))}function Xt(t){return"__value"in t?t.__value:t.value}function no(t){var e=ke(0);return function(){return arguments.length===1?(ot(e,y(e)+1),arguments[0]):(y(e),t())}}const pt=[];for(let t=0;t<256;++t)pt.push((t+256).toString(16).slice(1));function io(t,e=0){return(pt[t[e+0]]+pt[t[e+1]]+pt[t[e+2]]+pt[t[e+3]]+"-"+pt[t[e+4]]+pt[t[e+5]]+"-"+pt[t[e+6]]+pt[t[e+7]]+"-"+pt[t[e+8]]+pt[t[e+9]]+"-"+pt[t[e+10]]+pt[t[e+11]]+pt[t[e+12]]+pt[t[e+13]]+pt[t[e+14]]+pt[t[e+15]]).toLowerCase()}let we;const oo=new Uint8Array(16);function ao(){if(!we){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");we=crypto.getRandomValues.bind(crypto)}return we(oo)}const ro=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Qe={randomUUID:ro};function so(t,e,n){if(Qe.randomUUID&&!e&&!t)return Qe.randomUUID();t=t||{};const i=t.random||(t.rng||ao)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,io(i)}const Nn=(t,e)=>{localStorage.setItem(t,JSON.stringify(e)),console.info(`Data saved to localStorage with key: ${t}`)},De=t=>{const e=localStorage.getItem(t);return e?(console.info(`Data loaded from localStorage with key: ${t}`),JSON.parse(e)):(console.info(`No data found in localStorage with key: ${t}`),null)},lo=t=>{localStorage.setItem("scene",JSON.stringify(t)),console.info("Scene saved to localStorage")},co=()=>{const t=localStorage.getItem("scene");if(t){const e=JSON.parse(t);return console.info("Scene loaded from localStorage"),e}return console.info("No scene found in localStorage"),null},te={1:"I",2:"II",3:"III",4:"IV",5:"V"},Ln=[{id:"fearful",i18n:"condition.fearful",maxLevel:1},{id:"dazed",i18n:"condition.dazed",maxLevel:3},{id:"unconscious",i18n:"condition.unconscious",maxLevel:1},{id:"bleeding",i18n:"condition.bleeding",maxLevel:3},{id:"burning",i18n:"condition.burning",maxLevel:3},{id:"exhausted",i18n:"condition.exhausted",maxLevel:3},{id:"blinded",i18n:"condition.blinded",maxLevel:4},{id:"crisis_of_faith",i18n:"condition.crisis_of_faith",maxLevel:3},{id:"sick",i18n:"condition.sick",maxLevel:1},{id:"crippled",i18n:"condition.crippled",maxLevel:1},{id:"panicked",i18n:"condition.panicked",maxLevel:1},{id:"frenzied",i18n:"condition.frenzied",maxLevel:1},{id:"dying",i18n:"condition.dying",maxLevel:3},{id:"sleeping",i18n:"condition.sleeping",maxLevel:1},{id:"wasting",i18n:"condition.wasting",maxLevel:3},{id:"struggling",i18n:"condition.struggling",maxLevel:1},{id:"wounded",i18n:"condition.wounded",maxLevel:3}];function uo(t){return t.version&&t.version>=1||(t.version=1,t.combatants.forEach(n=>{n.conditionStates===void 0&&(n.conditionStates=[])})),t}function vo(t){return t.version&&t.version>=2||(t.version=2,t.settings||(t.settings={customConditions:[],disabledConditions:[]})),t}function fo(t){return t.version&&t.version>=3||(t.version=3,t.combatants.forEach(n=>{n.color=null})),t}function _o(t){return t=uo(t),t=vo(t),t=fo(t),t}const F=Et({version:0,name:"My Scene",combatants:[],mostRecentTick:0,settings:{customConditions:[],disabledConditions:[]}}),Y=Et({activeCombatant:null,ticks:[]});function po(){return F.combatants.find(t=>t.combatState==="Active")||null}function tn(){return{id:so(),name:"",initiative:0,combatState:"Active",conditionStates:[],color:null}}function An(t){console.info("Load scene:"),console.dir(t),Object.assign(F,_o(t)),Pt()}function mo(){lo(F)}function bo(){const t=JSON.parse(JSON.stringify(F));return t.mostRecentTick=ze(),t}function ho(t,e){const n=F.combatants.find(i=>i.id===t);if(!n){console.error("Cannot find combatant with id "+t);return}F.combatants.length>0&&n===F.combatants.find(i=>i.combatState==="Active")&&(F.mostRecentTick=n.initiative),n.initiative+=e,Pt(n)}function go(t,e){const n=F.combatants.find(o=>o.id===t);if(!n){console.error("Cannot find combatant with id "+t);return}const i=n.combatState;n.initiative=e,n.combatState="Active",F.mostRecentTick=n.initiative,i==="Expecting"?Pt(null,n):Pt(n)}function wo(t){const e=F.combatants.find(n=>n.id===t);if(!e){console.error("Cannot find combatant with id "+t);return}e.combatState="Waiting",F.mostRecentTick=e.initiative,Pt(e)}function xo(t){const e=F.combatants.find(n=>n.id===t);if(!e){console.error("Cannot find combatant with id "+t);return}e.combatState="Expecting",F.mostRecentTick=e.initiative,Pt(e)}function yo(t){const e=F.combatants.find(n=>n.id===t);if(!e){console.error("Cannot find combatant with id "+t);return}e.combatState="Dead",Pt(e)}function se(){Y.activeCombatant=null}function $o(){F.mostRecentTick=ze()}function ko(){const t=ze(),e=F.mostRecentTick;if(e>t||e===1/0||t===1/0)return console.error("Tick range invalid. First tick must not be larger than last tick. Neither must be Infinity.",e,t),[{number:0,hasCombatants:!1,mode:"absolute"}];const n=[];for(let i=e;i<=t;i++)n.push({number:i,hasCombatants:Mn(i,F.combatants.filter(o=>{var a;return o.id!==((a=Y.activeCombatant)==null?void 0:a.id)})),mode:"absolute"});return n}function Co(t,e,n){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20].map(i=>{const o=t?-i:i,a=o+e;return{number:o,hasCombatants:Mn(a,n),mode:"relative"}})}function Pt(t=null,e=null){const i=JSON.parse(JSON.stringify(F.combatants)).reduce((o,a)=>(o[a.combatState].push(a),o),{Active:[],Waiting:[],Expecting:[],Dead:[]});i.Active.sort((o,a)=>{if(o.initiative!==a.initiative)return o.initiative-a.initiative;if(o.initiative===a.initiative){if(t){if(o.id===t.id)return 1;if(a.id===t.id)return-1}if(e){if(o.id===e.id)return-1;if(a.id===e.id)return 1}}return 0}),i.Waiting.sort((o,a)=>o.initiative-a.initiative),i.Expecting.sort((o,a)=>o.initiative-a.initiative),i.Dead.sort((o,a)=>o.initiative-a.initiative),F.combatants=[].concat(...i.Waiting,...i.Expecting,...i.Active,...i.Dead)}function ze(){const t=F.combatants.filter(e=>e!==Y.activeCombatant&&e.combatState==="Active").map(e=>e.initiative);return t.length===0?F.mostRecentTick||0:Math.min(...t)}function Mn(t,e){return e.some(n=>n.initiative===t)}const xe=".splimo.json",So=t=>new Promise((e,n)=>{const i=new FileReader;i.onload=o=>{var a;try{const r=JSON.parse((a=o.target)==null?void 0:a.result);e(r)}catch(r){console.error("error parsing JSON:",r),alert("invalid JSON file"),n(r)}},i.onerror=o=>{console.error("error reading file:",o),n(o)},i.readAsText(t)}),en=(t,e)=>{const n=JSON.stringify(t,null,2),i="data:application/json;charset=utf-8,"+encodeURIComponent(n),o=document.createElement("a");o.href=i,o.download=e,o.target="_blank",o.click()},To=async(t,e="scene"+xe)=>{if(t){e.endsWith(xe)||(e+=xe);const n=[JSON.stringify(t,null,2)],i=new File(n,e,{type:"application/json",lastModified:Date.now()});if(navigator.canShare&&navigator.canShare({files:[i]}))try{await navigator.share({files:[i],title:"Download JSON",text:"Download JSON file"})}catch(o){console.error("Error sharing JSON:",o),console.info("Try downloading file via data url fallback"),en(t,e)}else en(t,e)}else alert("No data to download")};/**
 * @license lucide-svelte v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var No=ri("<svg><!><!></svg>");function vt(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]),i=lt(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);wt(e,!1);let o=Ot(e,"name",8,void 0),a=Ot(e,"color",8,"currentColor"),r=Ot(e,"size",8,24),s=Ot(e,"strokeWidth",8,2),l=Ot(e,"absoluteStrokeWidth",8,!1),h=Ot(e,"iconNode",24,()=>[]);const u=(...c)=>c.filter((f,d,w)=>!!f&&w.indexOf(f)===d).join(" ");be();var p=No();let _;var b=m(p);zt(b,1,h,Ft,(c,f)=>{let d=()=>y(f)[0],w=()=>y(f)[1];var T=rt(),k=X(T);Ui(k,d,!0,(x,S)=>{let D;$(()=>D=je(x,D,{...w()},void 0,x.namespaceURI===wn,x.nodeName.includes("-")))}),E(c,T)});var g=C(b);ct(g,e,"default",{}),v(p),$(()=>_=je(p,_,{...Eo,...i,width:r(),height:r(),stroke:a(),"stroke-width":l()?Number(s())*24/Number(r()):s(),class:u("lucide-icon","lucide",o()?`lucide-${o()}`:"",n.class)},void 0,!0)),E(t,p),xt()}function Lo(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"arrow-right"},()=>n,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Ao(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"ban"},()=>n,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m4.9 4.9 14.2 14.2"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Mo(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"circle-help"},()=>n,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function In(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"clock-alert"},()=>n,{iconNode:[["path",{d:"M12 6v6l4 2"}],["path",{d:"M16 21.16a10 10 0 1 1 5-13.516"}],["path",{d:"M20 11.5v6"}],["path",{d:"M20 21.5h.01"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Io(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"download"},()=>n,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Dn(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"hourglass"},()=>n,{iconNode:[["path",{d:"M5 22h14"}],["path",{d:"M5 2h14"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function zn(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"menu"},()=>n,{iconNode:[["line",{x1:"4",x2:"20",y1:"12",y2:"12"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Do(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"minus"},()=>n,{iconNode:[["path",{d:"M5 12h14"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function zo(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"moon"},()=>n,{iconNode:[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Po(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"palette"},()=>n,{iconNode:[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Bo(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"pencil"},()=>n,{iconNode:[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Oo(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"play"},()=>n,{iconNode:[["polygon",{points:"6 3 20 12 6 21 6 3"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Pe(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"plus"},()=>n,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Pn(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"settings"},()=>n,{iconNode:[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Bn(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"skull"},()=>n,{iconNode:[["path",{d:"m12.5 17-.5-1-.5 1h1z"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"9",cy:"12",r:"1"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Ro(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"sun"},()=>n,{iconNode:[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function On(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"timer"},()=>n,{iconNode:[["line",{x1:"10",x2:"14",y1:"2",y2:"2"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11"}],["circle",{cx:"12",cy:"14",r:"8"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Rn(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"trash"},()=>n,{iconNode:[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Ho(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"triangle-alert"},()=>n,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Wo(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"upload"},()=>n,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Fo(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"user-round"},()=>n,{iconNode:[["circle",{cx:"12",cy:"8",r:"5"}],["path",{d:"M20 21a8 8 0 0 0-16 0"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}function Be(t,e){const n=lt(e,["children","$$slots","$$events","$$legacy"]);vt(t,ut({name:"x"},()=>n,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(o,a)=>{var r=rt(),s=X(r);ct(s,e,"default",{}),E(o,r)},$$slots:{default:!0}}))}var Uo=(t,e)=>e(),Ko=W('<div id="ThemeToggle"><button class="btn btn-ghost"><!></button></div>');function qo(t,e){wt(e,!0);const n=Ct(),i=()=>gt(St,"$_",n),o={Light:"LIGHT",Dark:"DARK"},a={[o.Light]:"splitter_light",[o.Dark]:"splitter_dark"},r="theme_mode",s=o.Light;ne(()=>{const f=De(r);ot(l,Et(f||s))});let l=ht(Et(o.Light));Me(()=>{h(a[y(l)]),Nn(r,y(l))});function h(f){document.documentElement.setAttribute("data-theme",f)}function u(){ot(l,Et(y(l)===o.Light?o.Dark:o.Light))}var p=Ko(),_=m(p);_.__click=[Uo,u],$(()=>U(_,"aria-label",i()("toggle_theme",{values:{n:+(y(l)===o.Light)}})));var b=m(_);{var g=f=>{zo(f,{"aria-hidden":!0})},c=f=>{Ro(f,{"aria-hidden":!0})};st(b,f=>{y(l)===o.Light?f(g):f(c,!1)})}v(_),v(p),E(t,p),xt()}Nt(["click"]);let Se={};function ye(t={}){Se={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...t}}function A(t){return t?Se[t]:Se}function le(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function Hn(t){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap(n=>{const i=n.matches(e),o=Array.from(n.querySelectorAll(e));return[...i?[n]:[],...o]}).filter(n=>getComputedStyle(n).pointerEvents!=="none"&&Vo(n))}function Wn(t){if(!t||Go(t))return;const e=A("smoothScroll");t.scrollIntoView({behavior:!e||Zo(t)?"auto":"smooth",inline:"center",block:"center"})}function Zo(t){if(!t||!t.parentElement)return;const e=t.parentElement;return e.scrollHeight>e.clientHeight}function Go(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function Vo(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}let _e={};function ft(t,e){_e[t]=e}function M(t){return t?_e[t]:_e}function nn(){_e={}}let pe={};function ce(t,e){pe[t]=e}function Wt(t){var e;(e=pe[t])==null||e.call(pe)}function Jo(){pe={}}function jo(t,e,n,i){let o=M("__activeStagePosition");const a=o||n.getBoundingClientRect(),r=i.getBoundingClientRect(),s=le(t,a.x,r.x-a.x,e),l=le(t,a.y,r.y-a.y,e),h=le(t,a.width,r.width-a.width,e),u=le(t,a.height,r.height-a.height,e);o={x:s,y:l,width:h,height:u},Un(o),ft("__activeStagePosition",o)}function Fn(t){if(!t)return;const e=t.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height};ft("__activeStagePosition",n),Un(n)}function Yo(){const t=M("__activeStagePosition"),e=M("__overlaySvg");if(!t)return;if(!e){console.warn("No stage svg found.");return}const n=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${n} ${i}`)}function Xo(t){const e=Qo(t);document.body.appendChild(e),Zn(e,n=>{n.target.tagName==="path"&&Wt("overlayClick")}),ft("__overlaySvg",e)}function Un(t){const e=M("__overlaySvg");if(!e){Xo(t);return}const n=e.firstElementChild;if((n==null?void 0:n.tagName)!=="path")throw new Error("no path element found in stage svg");n.setAttribute("d",Kn(t))}function Qo(t){const e=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",Kn(t)),o.style.fill=A("overlayColor")||"rgb(0,0,0)",o.style.opacity=`${A("overlayOpacity")}`,o.style.pointerEvents="auto",o.style.cursor="auto",i.appendChild(o),i}function Kn(t){const e=window.innerWidth,n=window.innerHeight,i=A("stagePadding")||0,o=A("stageRadius")||0,a=t.width+i*2,r=t.height+i*2,s=Math.min(o,a/2,r/2),l=Math.floor(Math.max(s,0)),h=t.x-i+l,u=t.y-i,p=a-l*2,_=r-l*2;return`M${e},0L0,0L0,${n}L${e},${n}L${e},0Z
    M${h},${u} h${p} a${l},${l} 0 0 1 ${l},${l} v${_} a${l},${l} 0 0 1 -${l},${l} h-${p} a${l},${l} 0 0 1 -${l},-${l} v-${_} a${l},${l} 0 0 1 ${l},-${l} z`}function ta(){const t=M("__overlaySvg");t&&t.remove()}function ea(){const t=document.getElementById("driver-dummy-element");if(t)return t;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function on(t){const{element:e}=t;let n=typeof e=="string"?document.querySelector(e):e;n||(n=ea()),ia(n,t)}function na(){const t=M("__activeElement"),e=M("__activeStep");t&&(Fn(t),Yo(),Vn(t,e))}function ia(t,e){const n=Date.now(),i=M("__activeStep"),o=M("__activeElement")||t,a=!o||o===t,r=t.id==="driver-dummy-element",s=o.id==="driver-dummy-element",l=A("animate"),h=e.onHighlightStarted||A("onHighlightStarted"),u=(e==null?void 0:e.onHighlighted)||A("onHighlighted"),p=(i==null?void 0:i.onDeselected)||A("onDeselected"),_=A(),b=M();!a&&p&&p(s?void 0:o,i,{config:_,state:b}),h&&h(r?void 0:t,e,{config:_,state:b});const g=!a&&l;let c=!1;la(),ft("previousStep",i),ft("previousElement",o),ft("activeStep",e),ft("activeElement",t);const f=()=>{if(M("__transitionCallback")!==f)return;const d=Date.now()-n,w=400-d<=400/2;e.popover&&w&&!c&&g&&(an(t,e),c=!0),A("animate")&&d<400?jo(d,400,o,t):(Fn(t),u&&u(r?void 0:t,e,{config:A(),state:M()}),ft("__transitionCallback",void 0),ft("__previousStep",i),ft("__previousElement",o),ft("__activeStep",e),ft("__activeElement",t)),window.requestAnimationFrame(f)};ft("__transitionCallback",f),window.requestAnimationFrame(f),Wn(t),!g&&e.popover&&an(t,e),o.classList.remove("driver-active-element","driver-no-interaction"),o.removeAttribute("aria-haspopup"),o.removeAttribute("aria-expanded"),o.removeAttribute("aria-controls"),A("disableActiveInteraction")&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}function oa(){var t;(t=document.getElementById("driver-dummy-element"))==null||t.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function ee(){const t=M("__resizeTimeout");t&&window.cancelAnimationFrame(t),ft("__resizeTimeout",window.requestAnimationFrame(na))}function aa(t){var e;if(!M("isInitialized")||!(t.key==="Tab"||t.keyCode===9))return;const n=M("__activeElement"),i=(e=M("popover"))==null?void 0:e.wrapper,o=Hn([...i?[i]:[],...n?[n]:[]]),a=o[0],r=o[o.length-1];if(t.preventDefault(),t.shiftKey){const s=o[o.indexOf(document.activeElement)-1]||r;s==null||s.focus()}else{const s=o[o.indexOf(document.activeElement)+1]||a;s==null||s.focus()}}function qn(t){var e;((e=A("allowKeyboardControl"))==null||e)&&(t.key==="Escape"?Wt("escapePress"):t.key==="ArrowRight"?Wt("arrowRightPress"):t.key==="ArrowLeft"&&Wt("arrowLeftPress"))}function Zn(t,e,n){const i=(o,a)=>{const r=o.target;t.contains(r)&&((!n||n(r))&&(o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation()),a==null||a(o))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",o=>{i(o,e)},!0)}function ra(){window.addEventListener("keyup",qn,!1),window.addEventListener("keydown",aa,!1),window.addEventListener("resize",ee),window.addEventListener("scroll",ee)}function sa(){window.removeEventListener("keyup",qn),window.removeEventListener("resize",ee),window.removeEventListener("scroll",ee)}function la(){const t=M("popover");t&&(t.wrapper.style.display="none")}function an(t,e){var n,i;let o=M("popover");o&&document.body.removeChild(o.wrapper),o=da(),document.body.appendChild(o.wrapper);const{title:a,description:r,showButtons:s,disableButtons:l,showProgress:h,nextBtnText:u=A("nextBtnText")||"Next &rarr;",prevBtnText:p=A("prevBtnText")||"&larr; Previous",progressText:_=A("progressText")||"{current} of {total}"}=e.popover||{};o.nextButton.innerHTML=u,o.previousButton.innerHTML=p,o.progress.innerHTML=_,a?(o.title.innerHTML=a,o.title.style.display="block"):o.title.style.display="none",r?(o.description.innerHTML=r,o.description.style.display="block"):o.description.style.display="none";const b=s||A("showButtons"),g=h||A("showProgress")||!1,c=(b==null?void 0:b.includes("next"))||(b==null?void 0:b.includes("previous"))||g;o.closeButton.style.display=b.includes("close")?"block":"none",c?(o.footer.style.display="flex",o.progress.style.display=g?"block":"none",o.nextButton.style.display=b.includes("next")?"block":"none",o.previousButton.style.display=b.includes("previous")?"block":"none"):o.footer.style.display="none";const f=l||A("disableButtons")||[];f!=null&&f.includes("next")&&(o.nextButton.disabled=!0,o.nextButton.classList.add("driver-popover-btn-disabled")),f!=null&&f.includes("previous")&&(o.previousButton.disabled=!0,o.previousButton.classList.add("driver-popover-btn-disabled")),f!=null&&f.includes("close")&&(o.closeButton.disabled=!0,o.closeButton.classList.add("driver-popover-btn-disabled"));const d=o.wrapper;d.style.display="block",d.style.left="",d.style.top="",d.style.bottom="",d.style.right="",d.id="driver-popover-content",d.setAttribute("role","dialog"),d.setAttribute("aria-labelledby","driver-popover-title"),d.setAttribute("aria-describedby","driver-popover-description");const w=o.arrow;w.className="driver-popover-arrow";const T=((n=e.popover)==null?void 0:n.popoverClass)||A("popoverClass")||"";d.className=`driver-popover ${T}`.trim(),Zn(o.wrapper,D=>{var O,B,H;const K=D.target,L=((O=e.popover)==null?void 0:O.onNextClick)||A("onNextClick"),N=((B=e.popover)==null?void 0:B.onPrevClick)||A("onPrevClick"),P=((H=e.popover)==null?void 0:H.onCloseClick)||A("onCloseClick");if(K.classList.contains("driver-popover-next-btn"))return L?L(t,e,{config:A(),state:M()}):Wt("nextClick");if(K.classList.contains("driver-popover-prev-btn"))return N?N(t,e,{config:A(),state:M()}):Wt("prevClick");if(K.classList.contains("driver-popover-close-btn"))return P?P(t,e,{config:A(),state:M()}):Wt("closeClick")},D=>!(o!=null&&o.description.contains(D))&&!(o!=null&&o.title.contains(D))&&typeof D.className=="string"&&D.className.includes("driver-popover")),ft("popover",o);const k=((i=e.popover)==null?void 0:i.onPopoverRender)||A("onPopoverRender");k&&k(o,{config:A(),state:M()}),Vn(t,e),Wn(d);const x=t.classList.contains("driver-dummy-element"),S=Hn([d,...x?[]:[t]]);S.length>0&&S[0].focus()}function Gn(){const t=M("popover");if(!(t!=null&&t.wrapper))return;const e=t.wrapper.getBoundingClientRect(),n=A("stagePadding")||0,i=A("popoverOffset")||0;return{width:e.width+n+i,height:e.height+n+i,realWidth:e.width,realHeight:e.height}}function rn(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:o,popoverArrowDimensions:a}=e;return t==="start"?Math.max(Math.min(n.top-o,window.innerHeight-i.realHeight-a.width),a.width):t==="end"?Math.max(Math.min(n.top-(i==null?void 0:i.realHeight)+n.height+o,window.innerHeight-(i==null?void 0:i.realHeight)-a.width),a.width):t==="center"?Math.max(Math.min(n.top+n.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-a.width),a.width):0}function sn(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:o,popoverArrowDimensions:a}=e;return t==="start"?Math.max(Math.min(n.left-o,window.innerWidth-i.realWidth-a.width),a.width):t==="end"?Math.max(Math.min(n.left-(i==null?void 0:i.realWidth)+n.width+o,window.innerWidth-(i==null?void 0:i.realWidth)-a.width),a.width):t==="center"?Math.max(Math.min(n.left+n.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-a.width),a.width):0}function Vn(t,e){const n=M("popover");if(!n)return;const{align:i="start",side:o="left"}=(e==null?void 0:e.popover)||{},a=i,r=t.id==="driver-dummy-element"?"over":o,s=A("stagePadding")||0,l=Gn(),h=n.arrow.getBoundingClientRect(),u=t.getBoundingClientRect(),p=u.top-l.height;let _=p>=0;const b=window.innerHeight-(u.bottom+l.height);let g=b>=0;const c=u.left-l.width;let f=c>=0;const d=window.innerWidth-(u.right+l.width);let w=d>=0;const T=!_&&!g&&!f&&!w;let k=r;if(r==="top"&&_?w=f=g=!1:r==="bottom"&&g?w=f=_=!1:r==="left"&&f?w=_=g=!1:r==="right"&&w&&(f=_=g=!1),r==="over"){const x=window.innerWidth/2-l.realWidth/2,S=window.innerHeight/2-l.realHeight/2;n.wrapper.style.left=`${x}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${S}px`,n.wrapper.style.bottom="auto"}else if(T){const x=window.innerWidth/2-(l==null?void 0:l.realWidth)/2,S=10;n.wrapper.style.left=`${x}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${S}px`,n.wrapper.style.top="auto"}else if(f){const x=Math.min(c,window.innerWidth-(l==null?void 0:l.realWidth)-h.width),S=rn(a,{elementDimensions:u,popoverDimensions:l,popoverPadding:s,popoverArrowDimensions:h});n.wrapper.style.left=`${x}px`,n.wrapper.style.top=`${S}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",k="left"}else if(w){const x=Math.min(d,window.innerWidth-(l==null?void 0:l.realWidth)-h.width),S=rn(a,{elementDimensions:u,popoverDimensions:l,popoverPadding:s,popoverArrowDimensions:h});n.wrapper.style.right=`${x}px`,n.wrapper.style.top=`${S}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",k="right"}else if(_){const x=Math.min(p,window.innerHeight-l.realHeight-h.width);let S=sn(a,{elementDimensions:u,popoverDimensions:l,popoverPadding:s,popoverArrowDimensions:h});n.wrapper.style.top=`${x}px`,n.wrapper.style.left=`${S}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",k="top"}else if(g){const x=Math.min(b,window.innerHeight-(l==null?void 0:l.realHeight)-h.width);let S=sn(a,{elementDimensions:u,popoverDimensions:l,popoverPadding:s,popoverArrowDimensions:h});n.wrapper.style.left=`${S}px`,n.wrapper.style.bottom=`${x}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",k="bottom"}T?n.arrow.classList.add("driver-popover-arrow-none"):ca(a,k,t)}function ca(t,e,n){const i=M("popover");if(!i)return;const o=n.getBoundingClientRect(),a=Gn(),r=i.arrow,s=a.width,l=window.innerWidth,h=o.width,u=o.left,p=a.height,_=window.innerHeight,b=o.top,g=o.height;r.className="driver-popover-arrow";let c=e,f=t;e==="top"?(u+h<=0?(c="right",f="end"):u+h-s<=0&&(c="top",f="start"),u>=l?(c="left",f="end"):u+s>=l&&(c="top",f="end")):e==="bottom"?(u+h<=0?(c="right",f="start"):u+h-s<=0&&(c="bottom",f="start"),u>=l?(c="left",f="start"):u+s>=l&&(c="bottom",f="end")):e==="left"?(b+g<=0?(c="bottom",f="end"):b+g-p<=0&&(c="left",f="start"),b>=_?(c="top",f="end"):b+p>=_&&(c="left",f="end")):e==="right"&&(b+g<=0?(c="bottom",f="start"):b+g-p<=0&&(c="right",f="start"),b>=_?(c="top",f="start"):b+p>=_&&(c="right",f="end")),c?(r.classList.add(`driver-popover-arrow-side-${c}`),r.classList.add(`driver-popover-arrow-align-${f}`)):r.classList.add("driver-popover-arrow-none")}function da(){const t=document.createElement("div");t.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const o=document.createElement("button");o.type="button",o.classList.add("driver-popover-close-btn"),o.setAttribute("aria-label","Close"),o.innerHTML="&times;";const a=document.createElement("footer");a.classList.add("driver-popover-footer");const r=document.createElement("span");r.classList.add("driver-popover-progress-text"),r.innerText="";const s=document.createElement("span");s.classList.add("driver-popover-navigation-btns");const l=document.createElement("button");l.type="button",l.classList.add("driver-popover-prev-btn"),l.innerHTML="&larr; Previous";const h=document.createElement("button");return h.type="button",h.classList.add("driver-popover-next-btn"),h.innerHTML="Next &rarr;",s.appendChild(l),s.appendChild(h),a.appendChild(r),a.appendChild(s),t.appendChild(o),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(a),{wrapper:t,arrow:e,title:n,description:i,footer:a,previousButton:l,nextButton:h,closeButton:o,footerButtons:s,progress:r}}function ua(){var t;const e=M("popover");e&&((t=e.wrapper.parentElement)==null||t.removeChild(e.wrapper))}function va(t={}){ye(t);function e(){A("allowClose")&&h()}function n(){const u=M("activeIndex"),p=A("steps")||[];if(typeof u>"u")return;const _=u+1;p[_]?l(_):h()}function i(){const u=M("activeIndex"),p=A("steps")||[];if(typeof u>"u")return;const _=u-1;p[_]?l(_):h()}function o(u){(A("steps")||[])[u]?l(u):h()}function a(){var u;if(M("__transitionCallback"))return;const p=M("activeIndex"),_=M("__activeStep"),b=M("__activeElement");if(typeof p>"u"||typeof _>"u"||typeof M("activeIndex")>"u")return;const g=((u=_.popover)==null?void 0:u.onPrevClick)||A("onPrevClick");if(g)return g(b,_,{config:A(),state:M()});i()}function r(){var u;if(M("__transitionCallback"))return;const p=M("activeIndex"),_=M("__activeStep"),b=M("__activeElement");if(typeof p>"u"||typeof _>"u")return;const g=((u=_.popover)==null?void 0:u.onNextClick)||A("onNextClick");if(g)return g(b,_,{config:A(),state:M()});n()}function s(){M("isInitialized")||(ft("isInitialized",!0),document.body.classList.add("driver-active",A("animate")?"driver-fade":"driver-simple"),ra(),ce("overlayClick",e),ce("escapePress",e),ce("arrowLeftPress",a),ce("arrowRightPress",r))}function l(u=0){var p,_,b,g,c,f,d,w;const T=A("steps");if(!T){console.error("No steps to drive through"),h();return}if(!T[u]){h();return}ft("__activeOnDestroyed",document.activeElement),ft("activeIndex",u);const k=T[u],x=T[u+1],S=T[u-1],D=((p=k.popover)==null?void 0:p.doneBtnText)||A("doneBtnText")||"Done",O=A("allowClose"),B=typeof((_=k.popover)==null?void 0:_.showProgress)<"u"?(b=k.popover)==null?void 0:b.showProgress:A("showProgress"),H=(((g=k.popover)==null?void 0:g.progressText)||A("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${u+1}`).replace("{{total}}",`${T.length}`),K=((c=k.popover)==null?void 0:c.showButtons)||A("showButtons"),L=["next","previous",...O?["close"]:[]].filter(nt=>!(K!=null&&K.length)||K.includes(nt)),N=((f=k.popover)==null?void 0:f.onNextClick)||A("onNextClick"),P=((d=k.popover)==null?void 0:d.onPrevClick)||A("onPrevClick"),j=((w=k.popover)==null?void 0:w.onCloseClick)||A("onCloseClick");on({...k,popover:{showButtons:L,nextBtnText:x?void 0:D,disableButtons:[...S?[]:["previous"]],showProgress:B,progressText:H,onNextClick:N||(()=>{x?l(u+1):h()}),onPrevClick:P||(()=>{l(u-1)}),onCloseClick:j||(()=>{h()}),...(k==null?void 0:k.popover)||{}}})}function h(u=!0){const p=M("__activeElement"),_=M("__activeStep"),b=M("__activeOnDestroyed"),g=A("onDestroyStarted");if(u&&g){const d=!p||(p==null?void 0:p.id)==="driver-dummy-element";g(d?void 0:p,_,{config:A(),state:M()});return}const c=(_==null?void 0:_.onDeselected)||A("onDeselected"),f=A("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),sa(),ua(),oa(),ta(),Jo(),nn(),p&&_){const d=p.id==="driver-dummy-element";c&&c(d?void 0:p,_,{config:A(),state:M()}),f&&f(d?void 0:p,_,{config:A(),state:M()})}b&&b.focus()}return{isActive:()=>M("isInitialized")||!1,refresh:ee,drive:(u=0)=>{s(),l(u)},setConfig:ye,setSteps:u=>{nn(),ye({...A(),steps:u})},getConfig:A,getState:M,getActiveIndex:()=>M("activeIndex"),isFirstStep:()=>M("activeIndex")===0,isLastStep:()=>{const u=A("steps")||[],p=M("activeIndex");return p!==void 0&&p===u.length-1},getActiveStep:()=>M("activeStep"),getActiveElement:()=>M("activeElement"),getPreviousElement:()=>M("previousElement"),getPreviousStep:()=>M("previousStep"),moveNext:n,movePrevious:i,moveTo:o,hasNextStep:()=>{const u=A("steps")||[],p=M("activeIndex");return p!==void 0&&u[p+1]},hasPreviousStep:()=>{const u=A("steps")||[],p=M("activeIndex");return p!==void 0&&u[p-1]},highlight:u=>{s(),on({...u,popover:u.popover?{showButtons:[],showProgress:!1,progressText:"",...u.popover}:void 0})},destroy:()=>{h(!1)}}}var Kt=no(()=>Y),fa=(t,e)=>e(),_a=W('<button class="btn btn-ghost"><!></button>');function pa(t,e){wt(e,!1);const n=Ct(),i=()=>gt(St,"$_",n),o="tickSelectionModal",a="tab-tick-selection",r="tab-condition-selection",s="header-menu-dropdown",l=()=>{let d=document.getElementById(s);d==null||d.setAttribute("open","open")},h=()=>{let d=document.getElementById(s);d==null||d.removeAttribute("open")},u=()=>{let d=document.getElementById(o);d==null||d.classList.add("modal-open"),d==null||d.classList.remove("hidden")},p=()=>{let d=document.getElementById(o);d==null||d.classList.remove("modal-open"),d==null||d.classList.add("hidden")};function _(){let d=document.getElementById(a);d==null||d.setAttribute("aria-selected","true");let w=document.getElementById(r);w==null||w.setAttribute("aria-selected","false")}function b(){let d=document.getElementById(a);d==null||d.setAttribute("aria-selected","false");let w=document.getElementById(r);w==null||w.setAttribute("aria-selected","true")}const g=()=>{va({popoverClass:"driverjs-theme",showProgress:!0,nextBtnText:i()("tour_btn_next"),prevBtnText:i()("tour_btn_prev"),doneBtnText:i()("tout_btn_done"),progressText:i()("tour_progress_text"),steps:[{element:"#sceneTitle",popover:{title:i()("scene_title"),description:i()("scene_title_description")}},{element:"#combatantsTable",popover:{title:i()("combatants_list"),description:i()("combatants_list_description")}},{element:".change-scene-mode",popover:{title:i()("tour.toggle_scene_mode.title"),description:i()("tour.toggle_scene_mode.content")}},{element:"#tickSelectionModalInner",popover:{title:i()("tour.combatant_modal.ticks.title"),description:i()("tour.combatant_modal.ticks.content")},onHighlightStarted:()=>{u(),_(),Kt(Kt().ticks=[{number:1,hasCombatants:!1,mode:"relative"},{number:2,hasCombatants:!0,mode:"relative"},{number:-3,hasCombatants:!1,mode:"relative"},{number:42,hasCombatants:!1,mode:"absolute"}])},onDeselected:()=>{Kt(Kt().ticks=[]),p()}},{element:"#tickSelectionModalInner",popover:{title:i()("tour.combatant_modal.conditions.title"),description:i()("tour.combatant_modal.conditions.content")},onHighlightStarted:()=>{u(),b()},onDeselected:()=>{Kt(Kt().ticks=[]),p()}},{element:"#uploadButton",popover:{title:i()("upload_scene"),description:i()("upload_scene_description")},onHighlightStarted:()=>{l()},onDeselected:()=>{h()}},{element:"#downloadBtn",popover:{title:i()("download_scene"),description:i()("download_scene_description")},onHighlightStarted:()=>{l()},onDeselected:()=>{h()}},{element:"#settingsBtn",popover:{title:i()("tour.header.settings.title"),description:i()("tour.header.settings.content")},onHighlightStarted:()=>{l()},onDeselected:()=>{h()}},{element:"#ThemeToggle",popover:{title:i()("tour.change_theme.title"),description:i()("tour.change_theme.content")}},{element:"#ToggleLanguageBtn",popover:{title:i()("tour.change_langauge.title"),description:i()("tour.change_langauge.content")}}]}).drive()};be();var c=_a();c.__click=[fa,g],$(()=>U(c,"aria-label",i()("start_tour")));var f=m(c);Mo(f,{"aria-hidden":!0}),v(c),E(t,c),xt()}Nt(["click"]);function Jn(t){t&&t.addEventListener("toggle",()=>{var e,n;t.open?(ma(t),(e=t.querySelector("summary"))==null||e.classList.add("btn-active")):(ba(t),(n=t.querySelector("summary"))==null||n.classList.remove("btn-active"))})}function jn(t){return function(e){const n=e.target;n&&!t.contains(n)&&(t.open=!1)}}function Yn(t){return function(e){e.key==="Escape"&&(t.open=!1)}}function Xn(t){return function(e){if(e.key!=="Tab"||!window.document.activeElement)return;const n=t.querySelectorAll("summary, li, button"),i=Array.from(n).indexOf(window.document.activeElement);(e.shiftKey&&i===0||!e.shiftKey&&i===-1)&&(t.open=!1)}}function ma(t){window.addEventListener("click",jn(t)),window.addEventListener("keydown",Yn(t)),window.addEventListener("keydown",Xn(t))}function ba(t){window.removeEventListener("click",jn(t)),window.removeEventListener("keydown",Yn(t)),window.removeEventListener("keydown",Xn(t))}function ha(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Oe(t){return me().find(e=>e.id===t)}function me({onlyActive:t}={onlyActive:!1}){const e=[...Ln,...F.settings.customConditions];return t?e.filter(i=>!F.settings.disabledConditions.includes(i.id)):e}function ga(t){const e=F.settings.disabledConditions.findIndex(n=>n===t);if(e<0){F.settings.disabledConditions.push(t);return}F.settings.disabledConditions.splice(e,1)}function wa(t){F.settings.customConditions.push({i18n:t.i18n,maxLevel:t.maxLevel,id:ha()})}function xa(t){const e=F.settings.customConditions.findIndex(n=>n.id===t);if(e<0){console.error(`Custom deletion unsuccessful: Condition with ID "${t}" could not be found in custom conditions.`);return}F.settings.customConditions.splice(e,1)}function ya(t,e){const n=F.combatants.find(s=>s.id===t);if(!n){console.error("Cannot find combatant with id "+t);return}const i=Oe(e);if(!i){console.error("Cannot find condition with id "+e);return}const o=n.conditionStates.findIndex(s=>s.id===e);if(o<0){console.info(`Add condition ${e} to combatant ${t}`);const s=i.maxLevel>0?1:0,l={id:e,activeSinceTick:n.initiative,activeLevel:s};n.conditionStates.push(l);return}const a=n.conditionStates[o];if(a.activeLevel>=i.maxLevel){console.info(`Remove condition ${e} from combatant ${t}`),n.conditionStates.splice(o,1);return}const r=a.activeLevel;a.activeLevel+=1,console.info(`Increase level of condition state ${a.id} from ${r} to ${a.activeLevel}`)}var $a=W('<div role="alert" class="my-3 flex rounded-md border-4 border-warning bg-base-200 p-3 text-left"><!> <span class="text-lg"> </span></div>'),ka=(t,e,n)=>e(y(n).id),Ca=(t,e,n)=>e(y(n).id),Sa=W('<button class="btn btn-error btn-sm mr-2 w-14"><!></button>'),Ta=W('<div class="my-1 flex flex-row items-center rounded focus-within:bg-base-300 hover:bg-base-300"><label class="flex-1 p-3 text-xl hover:cursor-pointer md:text-2xl"> </label> <input type="checkbox" class="toggle toggle-success mr-3"> <!></div>'),Ea=W('<div class="my-6 text-center"><h2 class="card-title justify-center"> </h2> <p class="mt-6"> <kbd class="kbd kbd-sm bg-primary text-base-100">+</kbd> </p></div>'),Na=W("<!> <!>",1);function ln(t,e){wt(e,!0);const n=Ct(),i=()=>gt(St,"$_",n);let o=$t(()=>F.combatants.flatMap(c=>c.conditionStates.map(f=>f.id)));function a(c){ga(c)}function r(c){return F.settings.disabledConditions.every(f=>f!==c)}function s(c){return F.combatants.some(f=>f.conditionStates.some(d=>d.id===c))}function l(c){return c.some(f=>y(o).includes(f.id))}function h(c){xa(c)}function u(c){return c===1?"":`(I-${te[c]})`}var p=Na(),_=X(p);{var b=c=>{var f=$a(),d=m(f);Ho(d,{"aria-hidden":!0,size:36,class:"mr-3 self-center text-warning"});var w=C(d,2),T=m(w,!0);$(()=>z(T,i()("settings.in_use"))),v(w),v(f),E(c,f)};st(_,c=>{l(e.conditionList)&&c(b)})}var g=C(_,2);zt(g,17,()=>e.conditionList,Ft,(c,f)=>{var d=Ta(),w=m(d);const T=$t(()=>i()(y(f).i18n)??""),k=$t(()=>u(y(f).maxLevel)??"");var x=m(w);$(()=>z(x,`${y(T)} ${y(k)}`)),v(w);var S=C(w,2);Ht(S),$(()=>Ki(S,r(y(f).id))),S.__click=[ka,a,f],$(()=>S.disabled=s(y(f).id)),$(()=>U(S,"aria-label",r(y(f).id)?i()("settings.deactivate_condition",{values:{name:i()(y(f).i18n)}}):i()("settings.activate_condition",{values:{name:i()(y(f).i18n)}})));var D=C(S,2);{var O=B=>{var H=Sa();H.__click=[Ca,h,f],$(()=>H.disabled=s(y(f).id)),$(()=>U(H,"aria-label",i()("settings.delete_condition",{values:{name:y(f).i18n}})));var K=m(H);Rn(K,{"aria-hidden":!0}),v(H),E(B,H)};st(D,B=>{e.deletableConditions&&B(O)})}v(d),$(()=>{U(w,"for",y(f).id),U(S,"id",y(f).id)}),E(c,d)},c=>{var f=Ea(),d=m(f),w=m(d,!0);$(()=>z(w,i()("settings.empty_custom_conditions"))),v(d);var T=C(d,2),k=m(T);$(()=>z(k,`${i()("settings.empty_custom_conditions_hint")??""} `));var x=C(k,2);$(()=>z(x,` ${i()("settings.empty_custom_conditions_hint_2")??""}`)),v(T),v(f),E(c,f)}),E(t,p),xt()}Nt(["click"]);var La=W("<option> </option>"),Aa=W('<dialog id="settingsModal" class="modal" aria-labelledby="settingsDialogTitle" aria-describedby="dialogDesc"><div class="modal-box relative border-4 border-primary p-2 pt-0 md:p-4 md:pt-0"><div class="sticky top-0 z-10 flex justify-between bg-base-100 py-3"><h3 class="pl-3 text-xl font-bold" id="settingsDialogTitle"> </h3> <form method="dialog" class="float-end"><button class="btn btn-circle btn-ghost btn-sm"><!></button></form></div> <div class="divider uppercase before:bg-secondary after:bg-secondary"> </div> <!> <div class="divider uppercase before:bg-secondary after:bg-secondary"> </div> <form action="" class="flex"><input type="text" name="custom_condition_name" class="input input-bordered mr-2 w-full text-xl md:mr-4 md:text-2xl"> <select class="select select-bordered mr-2 text-center text-xl md:mr-4 md:text-2xl" name="custom_condition_max_level"></select> <button class="btn btn-primary mr-2" type="submit"><!></button></form> <!></div> <form method="dialog" class="modal-backdrop"><button> </button></form></dialog>');function Ma(t,e){wt(e,!0);const n=Ct(),i=()=>gt(St,"$_",n),o=1;let a,r=ht(""),s=ht(o),l=ht(!1);function h(){a.showModal(),ot(l,!0)}function u(q){q.preventDefault(),wa({i18n:String(y(r)),maxLevel:Number(y(s))}),ot(r,""),ot(s,o)}function p(){return Object.values(te).reduce((q,Q)=>(q.push(Q),q),Array())}var _=Aa(),b=m(_),g=m(b),c=m(g),f=m(c,!0);$(()=>z(f,i()("settings.title"))),v(c);var d=C(c,2),w=m(d);$(()=>U(w,"aria-label",i()("close")));var T=m(w);Be(T,{"aria-hidden":!0,size:24}),v(w),v(d),v(g);var k=C(g,2),x=m(k,!0);$(()=>z(x,i()("settings.conditions"))),v(k);var S=C(k,2);ln(S,{conditionList:Ln,deletableConditions:!1});var D=C(S,2),O=m(D,!0);$(()=>z(O,i()("settings.custom_conditions"))),v(D);var B=C(D,2),H=m(B);Ht(H),$(()=>U(H,"placeholder",`${i()("settings.custom_condition_placeholder")??""} `)),$(()=>U(H,"aria-label",i()("settings.new_condition_name")));var K=C(H,2);$(()=>U(K,"aria-label",i()("settings.new_condition_level"))),zt(K,21,p,Ft,(q,Q,G)=>{var R=La();R.value=(R.__value=G+1)==null?"":G+1;var J=m(R,!0);v(R),$(()=>z(J,y(Q))),E(q,R)}),v(K);var L=C(K,2);$(()=>U(L,"aria-label",i()("settings.add_new_condition")));var N=m(L);Pe(N,{strokeWidth:3,"aria-hidden":!0}),v(L),v(B);var P=C(B,2);ln(P,{get conditionList(){return F.settings.customConditions},deletableConditions:!0}),v(b);var j=C(b,2),nt=m(j),V=m(nt,!0);return $(()=>z(V,i()("close"))),v(nt),v(j),v(_),Tt(_,q=>a=q,()=>a),$(()=>{kt(_,"hidden",!y(l)),L.disabled=y(r).length===0}),Vt("close",_,()=>ot(l,!1)),Vt("submit",B,u),Gt(H,()=>y(r),q=>ot(r,q)),to(K,()=>y(s),q=>ot(s,q)),E(t,_),xt({show:h})}var Ia=(t,e)=>e(),Da=(t,e)=>e(),za=W('<div class="navbar fixed top-0 z-[1] border-b-4 border-primary bg-primary-content/20 backdrop-blur-xl"><div class="flex-1"><img class="max-h-12 md:max-h-16" alt="splittermond logo"></div> <div class="flex-none space-x-2"><!> <!> <details id="header-menu-dropdown" class="dropdown dropdown-end drop-shadow-xl"><summary class="btn btn-ghost"><!></summary> <ul class="menu dropdown-content z-[10] w-[270px] rounded-box bg-neutral text-xl text-neutral-content"><li><label id="uploadButton" for="battleScene" class="hover:bg-secondary"><!> <span> </span></label> <input type="file" id="battleScene" name="battleScene" accept="application/json" class="battle-scene-file-input file-input w-full max-w-xs svelte-ekzg43"></li> <li><button id="downloadBtn" class="hover:bg-secondary"><!> <span> </span></button></li> <li><button id="settingsBtn" class="hover:bg-secondary"><!> <span> </span></button></li></ul></details></div></div> <!>',1);function Pa(t,e){wt(e,!1);const n=Ct(),i=()=>gt(St,"$_",n);let o=qe(),a=qe();function r(R){const J=R.target;if(J&&J.files){const it=J.files[0];it&&So(it).then(tt=>{An(tt)}),J.value=""}}function s(){const R=bo();let J=R.name.toLowerCase().trim().replace(/\s+/g,"_");To(R,J)}function l(){y(a).show()}ne(()=>{Jn(y(o))}),be();var h=za(),u=X(h),p=m(u),_=m(p);U(_,"src",`${ve??""}/logo.png`),v(p);var b=C(p,2),g=m(b);qo(g,{});var c=C(g,2);pa(c,{});var f=C(c,2),d=m(f);$(()=>U(d,"aria-label",i()("open_menu")));var w=m(d);zn(w,{"aria-hidden":!0}),v(d);var T=C(d,2),k=m(T),x=m(k),S=m(x);Wo(S,{"aria-hidden":!0});var D=C(S,2),O=m(D,!0);$(()=>z(O,i()("upload_scene"))),v(D),v(x);var B=C(x,2);B.__change=r,v(k);var H=C(k,2),K=m(H);K.__click=[Ia,s];var L=m(K);Io(L,{"aria-hidden":!0});var N=C(L,2),P=m(N,!0);$(()=>z(P,i()("download_scene"))),v(N),v(K),v(H);var j=C(H,2),nt=m(j);nt.__click=[Da,l];var V=m(nt);Pn(V,{"aria-hidden":!0});var q=C(V,2),Q=m(q,!0);$(()=>z(Q,i()("settings.title"))),v(q),v(nt),v(j),v(T),v(f),Tt(f,R=>ot(o,R),()=>y(o)),v(b),v(u);var G=C(u,2);Tt(Ma(G,{$$legacy:!0}),R=>ot(a,R),()=>y(a)),E(t,h),xt()}Nt(["change","click"]);const Ba=t=>t;function Oa(t){const e=t-1;return e*e*e+1}function qt(t,{delay:e=0,duration:n=400,easing:i=Ba}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:a=>`opacity: ${a*o}`}}function Re(t,{delay:e=0,duration:n=400,easing:i=Oa,axis:o="y"}={}){const a=getComputedStyle(t),r=+a.opacity,s=o==="y"?"height":"width",l=parseFloat(a[s]),h=o==="y"?["top","bottom"]:["left","right"],u=h.map(d=>`${d[0].toUpperCase()}${d.slice(1)}`),p=parseFloat(a[`padding${u[0]}`]),_=parseFloat(a[`padding${u[1]}`]),b=parseFloat(a[`margin${u[0]}`]),g=parseFloat(a[`margin${u[1]}`]),c=parseFloat(a[`border${u[0]}Width`]),f=parseFloat(a[`border${u[1]}Width`]);return{delay:e,duration:n,easing:i,css:d=>`overflow: hidden;opacity: ${Math.min(d*20,1)*r};${s}: ${d*l}px;padding-${h[0]}: ${d*p}px;padding-${h[1]}: ${d*_}px;margin-${h[0]}: ${d*b}px;margin-${h[1]}: ${d*g}px;border-${h[0]}-width: ${d*c}px;border-${h[1]}-width: ${d*f}px;`}}function Ra(t){const e=t-1;return e*e*e+1}function Ha(t,{from:e,to:n},i={}){var o=getComputedStyle(t),a=Wa(t),r=o.transform==="none"?"":o.transform,[s,l]=o.transformOrigin.split(" ").map(parseFloat),h=e.width/n.width,u=e.height/n.height,p=(e.left+h*s-(n.left+s))/a,_=(e.top+u*l-(n.top+l))/a,{delay:b=0,duration:g=f=>Math.sqrt(f)*120,easing:c=Ra}=i;return{delay:b,duration:typeof g=="function"?g(Math.sqrt(p*p+_*_)):g,easing:c,css:(f,d)=>{var w=d*p,T=d*_,k=f+d*h,x=f+d*u;return`transform: ${r} scale(${k}, ${x}) translate(${w}px, ${T}px);`}}}function Wa(t){if("currentCSSZoom"in t)return t.currentCSSZoom;for(var e=t,n=1;e!==null;)n*=+getComputedStyle(e).zoom,e=e.parentElement;return n}var Fa=(t,e,n)=>e(y(n)),Ua=W('<span class="sr-only"> </span> <!>',1),Ka=W('<span class="sr-only"> </span> ',1),qa=W('<span class="absolute bottom-0 right-0"><!></span>'),Za=W('<button class="tick-selection btn relative aspect-square h-full w-full min-[320px]:text-2xl sm:text-3xl svelte-1ymw8c6"><!> <!></button>'),Ga=(t,e)=>e(),Va=W('<div class="tooltip aspect-square h-full w-full"><button class="btn h-full w-full"><!></button></div>'),Ja=(t,e)=>e(),ja=W('<div class="tooltip aspect-square h-full w-full"><button class="btn btn-warning aspect-square h-full w-full"><!></button></div>'),Ya=(t,e)=>e(),Xa=W('<div class="tooltip aspect-square h-full w-full"><button class="btn btn-warning aspect-square h-full w-full"><!></button></div>'),Qa=(t,e)=>e(),tr=W('<div class="tooltip aspect-square h-full w-full"><button class="btn btn-error aspect-square h-full w-full"><!></button></div>'),er=W('<div class="grid grid-cols-4 gap-1 md:grid-cols-5"></div> <div class="mt-2 grid grid-cols-4 gap-1 md:grid-cols-5"><div><!></div> <div class="hidden md:block"></div> <div><!></div> <div><!></div> <div><!></div></div>',1);function nr(t,e){wt(e,!0);const n=Ct(),i=()=>gt(St,"$_",n);let o=ht(!1),a=ht(0);function r(){ot(a,0),ot(o,!1),Y.ticks=s()}function s(){const L=Y.activeCombatant;return L?L.combatState==="Active"?Co(y(o),L.initiative,F.combatants):ko():[]}function l(L){e.notifyDone(),Y.activeCombatant&&(L.mode==="relative"?ho(Y.activeCombatant.id,L.number):go(Y.activeCombatant.id,L.number),se())}function h(){ot(a,200),ot(o,!y(o)),Y.ticks=s()}function u(){e.notifyDone(),Y.activeCombatant&&(xo(Y.activeCombatant.id),se())}function p(){e.notifyDone(),Y.activeCombatant&&(wo(Y.activeCombatant.id),se())}function _(){e.notifyDone(),Y.activeCombatant&&(yo(Y.activeCombatant.id),se())}var b=er(),g=X(b);zt(g,21,()=>Y.ticks,Ft,(L,N)=>{var P=Za();P.__click=[Fa,l,N];var j=m(P);{var nt=G=>{var R=Ua(),J=X(R),it=m(J,!0);$(()=>z(it,i()("tick_move"))),v(J);var tt=C(J,2);{var _t=Z=>{var et=$e();$(()=>z(et,`+${y(N).number??""}`)),E(Z,et)},I=Z=>{var et=$e();$(()=>z(et,y(N).number)),E(Z,et)};st(tt,Z=>{y(N).number>0?Z(_t):Z(I,!1)})}E(G,R)},V=G=>{var R=Ka(),J=X(R),it=m(J,!0);$(()=>z(it,i()("tick_join"))),v(J);var tt=C(J);$(()=>z(tt,` ${y(N).number??""}`)),E(G,R)};st(j,G=>{y(N).mode==="relative"?G(nt):G(V,!1)})}var q=C(j,2);{var Q=G=>{var R=qa(),J=m(R);Fo(J,{class:"size-4 text-accent sm:size-6","aria-hidden":!0}),v(R),Mt(3,R,()=>Re,()=>({duration:y(a)})),E(G,R)};st(q,G=>{y(N).hasCombatants&&G(Q)})}v(P),E(L,P)}),v(g);var c=C(g,2),f=m(c),d=m(f);{var w=L=>{var N=Va();$(()=>U(N,"data-tip",i()("tickselection.tooltip.tick_direction",{values:{n:Number(y(o))}})));var P=m(N);P.__click=[Ga,h],$(()=>U(P,"aria-label",i()("tickselection.tooltip.tick_direction",{values:{n:Number(y(o))}})));var j=m(P);{var nt=q=>{Pe(q,{size:40,strokeWidth:2,"aria-hidden":!0})},V=q=>{Do(q,{size:40,strokeWidth:2,"aria-hidden":!0})};st(j,q=>{y(o)?q(nt):q(V,!1)})}v(P),v(N),$(()=>kt(P,"btn-primary",y(o))),E(L,N)};st(d,L=>{var N;(Y.activeCombatant===null||((N=Y.activeCombatant)==null?void 0:N.combatState)==="Active")&&L(w)})}v(f);var T=C(f,4),k=m(T);{var x=L=>{var N=ja();$(()=>U(N,"data-tip",i()("tickselection.tooltip.set_state_expecting")));var P=m(N);P.__click=[Ja,u],$(()=>U(P,"aria-label",i()("tickselection.tooltip.set_state_expecting")));var j=m(P);In(j,{size:40,strokeWidth:2,"aria-hidden":!0}),v(P),v(N),E(L,N)};st(k,L=>{var N;((N=Y.activeCombatant)==null?void 0:N.combatState)!=="Expecting"&&L(x)})}v(T);var S=C(T,2),D=m(S);{var O=L=>{var N=Xa();$(()=>U(N,"data-tip",i()("tickselection.tooltip.set_state_waiting")));var P=m(N);P.__click=[Ya,p],$(()=>U(P,"aria-label",i()("tickselection.tooltip.set_state_waiting")));var j=m(P);Dn(j,{size:40,strokeWidth:2,"aria-hidden":!0}),v(P),v(N),E(L,N)};st(D,L=>{var N;((N=Y.activeCombatant)==null?void 0:N.combatState)!=="Waiting"&&L(O)})}v(S);var B=C(S,2),H=m(B);{var K=L=>{var N=tr();$(()=>U(N,"data-tip",i()("tickselection.tooltip.set_state_dead")));var P=m(N);P.__click=[Qa,_],$(()=>U(P,"aria-label",i()("tickselection.tooltip.set_state_dead")));var j=m(P);Bn(j,{size:40,strokeWidth:2,"aria-hidden":!0}),v(P),v(N),E(L,N)};st(H,L=>{var N;((N=Y.activeCombatant)==null?void 0:N.combatState)!=="Dead"&&L(K)})}return v(B),v(c),E(t,b),xt({resetModal:r})}Nt(["click"]);var ir=(t,e,n)=>e(y(n).id),or=W('<span class="text-nowrap">(<!> </span>'),ar=W('<span class="text-sm"> </span>'),rr=W('<button class="btn px-2 text-lg font-normal md:text-xl"><span class="leading-none"> <!></span></button>'),sr=W('<div class="my-6 text-center col-span-2"><h2 class="card-title justify-center"> </h2> <p class="mt-6"> <kbd class="kbd kbd-sm bg-base-200 text-base-content"><!></kbd> &#8594; <kbd class="kbd kbd-sm bg-base-200 text-base-content"><!> </kbd> </p></div>'),lr=W('<div class="grid grid-cols-2 gap-2 md:gap-4"></div>');function cr(t,e){wt(e,!1);const n=Ct(),i=()=>gt(St,"$_",n);function o(p){if(!Y.activeCombatant){console.warn("No active combatant. Cannot toggle condition type "+p);return}ya(Y.activeCombatant.id,p)}function a(p){if(Y.activeCombatant)return Y.activeCombatant.conditionStates.some(_=>_.id===p)}function r(p){if(!Y.activeCombatant)return 0;const _=Y.activeCombatant.conditionStates.find(b=>b.id===p);return _?Math.abs(Y.activeCombatant.initiative-_.activeSinceTick):0}function s(p){const _=[...p];return _.sort((b,g)=>i()(b.i18n)>i()(g.i18n)?1:-1),_}function l(p){if(!Y.activeCombatant)return"";const _=Y.activeCombatant.conditionStates.find(g=>g.id===p);if(!_)return"";const b=Oe(_.id);return b?b.maxLevel>1?" "+te[_.activeLevel]:"":(console.error(`Cannot find condition ${_.id}`),"")}function h(p,_){const b=_.find(g=>g.id===p);return b&&b.maxLevel>1?`(I-${te[b.maxLevel]})`:""}be();var u=lr();zt(u,5,()=>s(me({onlyActive:!0})),Ft,(p,_)=>{var b=rr();b.__click=[ir,o,_];const g=oe(()=>!a(y(_).id));$(()=>kt(b,"btn-outline",y(g)));const c=oe(()=>a(y(_).id));$(()=>kt(b,"btn-error",y(c)));var f=m(b);const d=oe(()=>i()(y(_).i18n)??""),w=oe(()=>l(y(_).id)??"");var T=m(f);$(()=>z(T,`${y(d)}${y(w)} `));var k=C(T);{var x=D=>{var O=or(),B=C(m(O));On(B,{class:"mb-1 inline-block align-middle",size:16,strokeWidth:2});var H=C(B);$(()=>z(H,` ${r(y(_).id)??""})`)),v(O),E(D,O)},S=D=>{var O=ar(),B=m(O,!0);$(()=>z(B,h(y(_).id,s(me())))),v(O),E(D,O)};st(k,D=>{a(y(_).id)?D(x):D(S,!1)})}v(f),v(b),E(p,b)},p=>{var _=sr(),b=m(_),g=m(b,!0);$(()=>z(g,i()("condition.no_conditions_selected"))),v(b);var c=C(b,2),f=m(c);$(()=>z(f,`${i()("condition.no_conditions_selected_hint")??""} `));var d=C(f),w=m(d);zn(w,{size:16}),v(d);var T=C(d,2),k=m(T);Pn(k,{size:16});var x=C(k);$(()=>z(x,` ${i()("settings.title")??""}`)),v(T);var S=C(T);$(()=>z(S,` ${i()("condition.no_conditions_selected_hint_2")??""}`)),v(c),v(_),E(p,_)}),v(u),E(t,u),xt()}Nt(["click"]);class dr{constructor(e){Ut(this,"tablistNode");Ut(this,"tabs");Ut(this,"tabpanels");Ut(this,"firstTab");Ut(this,"lastTab");this.tablistNode=e,this.tabs=[],this.tabpanels=[],this.firstTab=null,this.lastTab=null,this.tabs=Array.from(this.tablistNode.querySelectorAll("[role=tab]"));for(let n=0;n<this.tabs.length;n+=1){const i=this.tabs[n],o=document.getElementById(i.getAttribute("aria-controls"));o?(i.tabIndex=-1,i.setAttribute("aria-selected","false"),this.tabpanels.push(o),i.addEventListener("keydown",this.onKeydown.bind(this)),i.addEventListener("click",this.onClick.bind(this)),this.firstTab||(this.firstTab=i),this.lastTab=i):console.error(`Tabpanel with id "${i.getAttribute("aria-controls")}" not found.`)}this.firstTab&&this.setSelectedTab(this.firstTab,!1)}setSelectedTab(e,n=!0){for(let i=0;i<this.tabs.length;i+=1){const o=this.tabs[i],a=this.tabpanels[i];e===o?(o.setAttribute("aria-selected","true"),o.removeAttribute("tabindex"),a.classList.remove("hidden"),n&&o.focus()):(o.setAttribute("aria-selected","false"),o.tabIndex=-1,a.classList.add("hidden"))}}setSelectedToPreviousTab(e){if(e===this.firstTab)this.lastTab&&this.setSelectedTab(this.lastTab);else{const n=this.tabs.indexOf(e);n>0&&this.setSelectedTab(this.tabs[n-1])}}setSelectedToNextTab(e){if(e===this.lastTab)this.firstTab&&this.setSelectedTab(this.firstTab);else{const n=this.tabs.indexOf(e);n<this.tabs.length-1&&this.setSelectedTab(this.tabs[n+1])}}onKeydown(e){const n=e.currentTarget;let i=!1;switch(e.key){case"ArrowLeft":this.setSelectedToPreviousTab(n),i=!0;break;case"ArrowRight":this.setSelectedToNextTab(n),i=!0;break;case"Home":this.firstTab&&this.setSelectedTab(this.firstTab),i=!0;break;case"End":this.lastTab&&this.setSelectedTab(this.lastTab),i=!0;break}i&&(e.stopPropagation(),e.preventDefault())}onClick(e){this.setSelectedTab(e.currentTarget)}}function ur(){const t=document.querySelectorAll("[role=tablist]");for(let e=0;e<t.length;e++)new dr(t[e])}function vr(t){throw new Error(`Unhandled case: ${JSON.stringify(t)}`)}var fr=W('<dialog id="tickSelectionModal" class="modal"><div id="tickSelectionModalInner" class="max-w-l modal-box min-h-[50%] w-11/12 border-4 border-primary p-0"><h3 id="tablist-for-combatant" class="sr-only"> </h3> <div role="tablist" class="tabs-boxed tabs overflow-hidden p-0" aria-labelledby="tablist-for-combatant"><button role="tab" id="tab-tick-selection" class="tab m-2 me-1 h-12 text-xl" aria-controls="tabpanel-tick-selection" aria-selected="true"> </button> <div class="tab-content min-w-full border-r-0 border-none bg-base-100 p-3 md:p-6" id="tabpanel-tick-selection" role="tabpanel" tabindex="0" aria-labelledby="tab-tick-selection"><!></div> <button role="tab" id="tab-condition-selection" class="tab m-2 me-1 ms-0 h-12 text-xl" tabindex="-1" aria-controls="tabpanel-condition-selection" aria-selected="false"> </button> <div class="tab-content min-w-full border-r-0 border-none bg-base-100 p-3 md:p-6" id="tabpanel-condition-selection" role="tabpanel" tabindex="0" aria-labelledby="tab-condition-selection"><!></div></div> <form method="dialog"><button class="btn btn-circle btn-ghost btn-sm absolute right-4 top-4"><!></button></form></div> <form method="dialog" class="modal-backdrop"><button> </button></form></dialog>');function _r(t,e){wt(e,!0);const n=Ct(),i=()=>gt(St,"$_",n);let o,a,r,s,l=ht(!1);function h(V="actions"){b(V),o.showModal(),ot(l,!0),a.resetModal()}function u(){p(),_()}function p(){o.close(),_()}function _(){b("actions")}function b(V){switch(V){case"actions":r.ariaSelected="true",s.ariaSelected="false";break;case"conditions":r.ariaSelected="false",s.ariaSelected="true";break;default:vr(V)}}ne(()=>{ur()});var g=fr(),c=m(g),f=m(c),d=m(f,!0);$(()=>{var V;return z(d,i()("combatant_interaction_modal",{values:{name:(V=Y.activeCombatant)==null?void 0:V.name}}))}),v(f);var w=C(f,2),T=m(w),k=m(T,!0);$(()=>z(k,i()("combatant_modal.actions"))),v(T),Tt(T,V=>r=V,()=>r);var x=C(T,2),S=m(x);Tt(nr(S,{notifyDone:()=>u()}),V=>a=V,()=>a),v(x);var D=C(x,2),O=m(D,!0);$(()=>z(O,i()("combatant_modal.conditions"))),v(D),Tt(D,V=>s=V,()=>s);var B=C(D,2),H=m(B);cr(H,{}),v(B),v(w);var K=C(w,2),L=m(K);$(()=>U(L,"aria-label",i()("close")));var N=m(L);Be(N,{"aria-hidden":!0,size:24}),v(L),v(K),v(c);var P=C(c,2),j=m(P),nt=m(j,!0);return $(()=>z(nt,i()("close"))),v(j),v(P),v(g),Tt(g,V=>o=V,()=>o),$(()=>{kt(g,"hidden",!y(l)),kt(T,"tab-active",(r==null?void 0:r.ariaSelected)==="actions"),kt(D,"tab-active",(s==null?void 0:s.ariaSelected)==="conditions")}),Vt("close",g,()=>ot(l,!1)),E(t,g),xt({show:h})}function Qn(t){(t==null?void 0:t.target).select()}var pr=W('<div class="absolute -left-4 top-0.5"><div><!> <span class="sr-only"> </span></div></div>'),mr=(t,e,n)=>e.combatantClicked(n()),br=W('<button class="btn btn-primary w-16 px-1 text-center text-2xl md:w-20 md:text-3xl"> <span class="sr-only"> </span></button>'),hr=(t,e,n)=>e.combatantClicked(n()),gr=W('<button class="btn btn-warning w-16 px-1 text-center md:w-20"><!> <span class="sr-only"> </span></button>'),wr=(t,e,n)=>e.combatantClicked(n()),xr=W('<button class="btn btn-warning w-16 px-1 text-center md:w-20"><!> <span class="sr-only"> </span></button>'),yr=(t,e,n)=>e.combatantClicked(n()),$r=W('<button class="px btn btn-error w-16 px-1 text-center md:w-20"><!> <span class="sr-only"> </span></button>'),kr=(t,e,n,i)=>e(n(),y(i),t),Cr=W('<button class="badge badge-error badge-outline badge-lg mr-1 self-end hover:bg-error hover:text-neutral"><span class="text-nowrap"> <!> </span></button>'),Sr=W('<div class="flex"><div class="min-w-2">&nbsp;</div> <div class="w-full p-3 md:p-6"><div class="flex w-full items-center justify-between"><div class="relative"><p class="my-auto w-full ps-4 text-left text-2xl md:text-3xl"> </p> <!></div> <div class="mx-2 mr-16 self-start"><!></div></div> <div class="mt-2 flex flex-row flex-wrap"></div></div></div>'),Tr=(t,e)=>e(null),Er=(t,e,n)=>e(y(n)),Nr=W('<button class="btn btn-square size-16" role="menuitem" tabindex="0">&nbsp;</button>'),Lr=(t,e,n)=>e.deleteCombatant(n().id),Ar=W('<div class="flex"><div class="min-w-2">&nbsp;</div> <div class="flex w-full p-3 md:p-6"><div class="flex w-full items-center"><div class="relative grow"><div class="mr-1 flex flex-col"><input type="text" class="input input-bordered my-auto w-full text-2xl md:text-3xl"></div></div> <details><summary class="btn btn-square btn-ghost input-bordered z-auto"><!></summary> <div tabindex="-1" class="dropdown-content grid grid-cols-[1fr_1fr_1fr] rounded-md bg-primary p-1 text-primary-content shadow"><button class="btn btn-square btn-neutral size-16" aria-label="__SELECT_COLOR_NONE_" role="menuitem" tabindex="0"><!></button> <!></div></details> <div class="mr-1"><input type="number" class="input input-bordered w-20 px-1 text-center text-3xl svelte-1b8sgk0"></div> <div class="w-16 text-center"><button class="btn btn-error w-full"><!></button></div></div></div></div>'),Mr=W('<!> <!> <div class="divider my-0 before:bg-secondary after:bg-secondary"></div>',1);function Ir(t,e){wt(e,!0);const n=Ct(),i=()=>gt(St,"$_",n),o=["#40bb03","#e7b500","#d41c3e","#940be6","#3a75f1","#070706","#4a4a4a","#ffffff"];let a,r=ht(!1),s=ht(!1),l=Ot(e,"combatant",7),h=$t(po);function u(k){const x=me().find(S=>S.id===k);return x?i()(x.i18n):k}function p(k,x){return Math.abs(k.initiative-x.activeSinceTick)}function _(k,x,S){S.stopPropagation(),e.conditionClicked(k,x)}function b(k){const x=Oe(k.id);return x?x.maxLevel>1?" "+te[k.activeLevel]:"":(console.error(`Cannot find condition ${k.id}`),"")}function g(k){l().color=k,a.open=!1}Me(()=>{e.appMode==="EDITING"&&(Jn(a),a.addEventListener("toggle",()=>{if(a.open){ot(s,!0);const x=a.getBoundingClientRect().top>window.innerHeight*.7;ot(r,x)}else ot(s,!1)}))});var c=Mr(),f=X(c);{var d=k=>{var x=Sr(),S=m(x),D=C(S,2),O=m(D),B=m(O),H=m(B);$(()=>U(H,"aria-label",i()("combatant_name")));var K=m(H,!0);v(H);var L=C(H,2);{var N=Q=>{var G=pr(),R=m(G),J=m(R);Lo(J,{size:"32"});var it=C(J,2),tt=m(it,!0);$(()=>z(tt,i()("active_combatant"))),v(it),v(R),v(G),Mt(1,R,()=>Re,()=>({delay:400,duration:500,axis:"x"})),E(Q,G)};st(L,Q=>{l()===y(h)&&Q(N)})}v(B);var P=C(B,2),j=m(P);{var nt=Q=>{var G=br();$(()=>U(G,"aria-label",i()("combatant_initiative"))),G.__click=[mr,e,l];var R=m(G),J=C(R),it=m(J,!0);$(()=>z(it,i()("open_interactions"))),v(J),v(G),$(()=>z(R,`${l().initiative??""} `)),E(Q,G)},V=Q=>{var G=rt(),R=X(G);{var J=tt=>{var _t=gr();_t.__click=[hr,e,l];var I=m(_t);Dn(I,{class:"w-16 text-center md:w-20",size:32,strokeWidth:2});var Z=C(I,2);const et=$t(()=>i()("combatant_status",{values:{status:i()("tickselection.tooltip.set_state_waiting")}})??""),at=$t(()=>i()("open_interactions")??"");var mt=m(Z);$(()=>z(mt,`${y(et)}.
								${y(at)}`)),v(Z),v(_t),Mt(1,_t,()=>qt,()=>({duration:200})),E(tt,_t)},it=tt=>{var _t=rt(),I=X(_t);{var Z=at=>{var mt=xr();mt.__click=[wr,e,l];var yt=m(mt);In(yt,{class:"w-20 text-center",size:32,strokeWidth:2});var Lt=C(yt,2);const bt=$t(()=>i()("combatant_status",{values:{status:i()("tickselection.tooltip.set_state_expecting")}})??""),Bt=$t(()=>i()("open_interactions")??"");var ie=m(Lt);$(()=>z(ie,`${y(bt)}.
								${y(Bt)}`)),v(Lt),v(mt),Mt(1,mt,()=>qt,()=>({duration:200})),E(at,mt)},et=at=>{var mt=rt(),yt=X(mt);{var Lt=bt=>{var Bt=$r();Bt.__click=[yr,e,l];var ie=m(Bt);Bn(ie,{class:"w-20 text-center",size:32,strokeWidth:2});var He=C(ie,2);const ti=$t(()=>i()("combatant_status",{values:{status:i()("tickselection.tooltip.set_state_dead")}})??""),ei=$t(()=>i()("open_interactions")??"");var ni=m(He);$(()=>z(ni,`${y(ti)}.
								${y(ei)}`)),v(He),v(Bt),Mt(1,Bt,()=>qt,()=>({duration:200})),E(bt,Bt)};st(yt,bt=>{l().combatState==="Dead"&&bt(Lt)},!0)}E(at,mt)};st(I,at=>{l().combatState==="Expecting"?at(Z):at(et,!1)},!0)}E(tt,_t)};st(R,tt=>{l().combatState==="Waiting"?tt(J):tt(it,!1)},!0)}E(Q,G)};st(j,Q=>{l().combatState==="Active"?Q(nt):Q(V,!1)})}v(P),v(O);var q=C(O,2);zt(q,21,()=>l().conditionStates,Ft,(Q,G)=>{var R=Cr();R.__click=[kr,_,l,G];var J=m(R);const it=$t(()=>u(y(G).id)??""),tt=$t(()=>b(y(G))??"");var _t=m(J);$(()=>z(_t,`${y(it)}${y(tt)} (`));var I=C(_t);On(I,{class:"mb-1 inline-block align-middle",size:16,strokeWidth:2});var Z=C(I);$(()=>z(Z,` ${p(l(),y(G))??""})`)),v(J),v(R),E(Q,R)}),v(q),v(D),v(x),$(()=>{ae(S,"background-color",l().color),z(K,l().name),kt(q,"hidden",l().conditionStates.length===0)}),E(k,x)};st(f,k=>{e.appMode==="RUNNING"&&k(d)})}var w=C(f,2);{var T=k=>{var x=Ar(),S=m(x),D=C(S,2),O=m(D),B=m(O),H=m(B),K=m(H);Ht(K),$(()=>U(K,"aria-label",i()("combatant_name"))),v(H),v(B);var L=C(B,2),N=m(L);$(()=>U(N,"aria-label",i()("open_menu")));var P=m(N);{var j=I=>{Po(I,{"aria-hidden":!0})},nt=I=>{var Z=$e(" ");E(I,Z)};st(P,I=>{l().color===null?I(j):I(nt,!1)})}v(N);var V=C(N,2),q=m(V);q.__click=[Tr,g];var Q=m(q);Ao(Q,{"aria-hidden":!0}),v(q);var G=C(q,2);zt(G,17,()=>o,Ft,(I,Z,et)=>{var at=Nr();at.__click=[Er,g,Z],U(at,"aria-label",`__SELECT_COLOR_${et??""}__`),$(()=>ae(at,"background-color",y(Z))),E(I,at)}),v(V),v(L),Tt(L,I=>a=I,()=>a);var R=C(L,2),J=m(R);Ht(J),$(()=>U(J,"aria-label",i()("combatant_initiative"))),v(R);var it=C(R,2),tt=m(it);tt.__click=[Lr,e,l],$(()=>U(tt,"aria-label",i()("delete_combatant",{values:{name:l().name}})));var _t=m(tt);Rn(_t,{"aria-hidden":!0}),v(tt),v(it),v(O),v(D),v(x),$(()=>{ae(S,"background-color",l().color),U(L,"id",`color-dropdown-${l().id??""}`),Zi(L,`dropdown dropdown-end ${(y(r)?"dropdown-top":"dropdown-bottom")??""} mr-1 drop-shadow-xl ${(y(s)?"z-[1]":"")??""}`),kt(N,"btn-outline",l().color===null),ae(N,"background-color",l().color)}),Gt(K,()=>l().name,I=>l().name=I),Vt("focus",J,I=>Qn(I)),Gt(J,()=>l().initiative,I=>l().initiative=I),Mt(1,tt,()=>qt,()=>({duration:200})),E(k,x)};st(w,k=>{e.appMode==="EDITING"&&k(T)})}Ie(2),E(t,c),xt()}Nt(["click"]);function cn(t,e,n){t.key==="Enter"&&e(y(n))}function Dr(t,e){ot(e,"EDITING")}function zr(t,e){ot(e,"RUNNING"),$o(),Pt()}var Pr=W('<input type="text" class="input input-bordered mr-2 w-full text-2xl md:text-3xl">'),Br=W('<p class="mr-2 w-full ps-[17px] text-2xl md:text-3xl"> </p>'),Or=(t,e,n)=>e(y(n)),Rr=W(`<div class="col-span-3 flex w-full"><input type="text" class="input input-bordered w-full text-2xl md:text-3xl"> <input type="number" class="
						input
						input-bordered
						mx-1.5
						w-16
						px-1
						text-center
						text-2xl
						md:w-20
						md:text-3xl svelte-1b8sgk0"> <div class="justify-center"><button class="btn btn-primary"><!></button></div></div>`),Hr=W('<div class="card mt-8 bg-base-100"><div class="card-body text-center"><h2 class="card-title justify-center"> </h2> <p class="mt-6"> <kbd class="kbd kbd-sm bg-primary text-base-100">+</kbd> </p></div></div>'),Wr=W("<div><!></div>"),Fr=W(`<!> <div class="
		m-auto
		mt-16
		h-full
		w-full
		px-2
		py-4
		md:mt-20
		md:w-11/12
		lg:w-10/12
		xl:w-10/12
		2xl:w-[1200px]"><div class="navbar bg-base-100 px-0"><div id="sceneTitle" class="flex-1"><!></div> <div class="change-scene-mode flex-none space-x-2"><button id="runSceneBtn" class="btn btn-primary text-xl"><!> <span class="sr-only lg:not-sr-only lg:flex"> </span></button> <button id="editSceneBtn" class="btn btn-primary text-xl"><!> <span class="sr-only lg:not-sr-only lg:flex"> </span></button></div></div> <div id="combatantsTable" class="mb-2 mt-4"><div class="column rounded-lg bg-secondary p-3 md:p-6"><div class="flex w-full justify-between"><div class="pl-1 text-xl"> </div> <div class="mr-16 w-16 pl-1 text-xl md:w-20" id="initiativeColumn"> </div></div> <!></div> <!></div> <!></div>`,1);function Ur(t,e){wt(e,!0);const n=Ct(),i=()=>gt(St,"$_",n),o="RUNNING";let a=ht(Et(tn())),r=ht(o),s,l;function h(I){I.name!==""&&(F.combatants.push(I),ot(a,Et(tn())),s.focus(),s.select())}function u(I){F.combatants=F.combatants.filter(Z=>Z.id!==I)}function p(I){y(r)==="RUNNING"&&(Y.activeCombatant=I,l.show())}function _(I){y(r)==="RUNNING"&&(Y.activeCombatant=I,l.show("conditions"))}ne(()=>{F.combatants.length===0&&ot(r,"EDITING")});var b=Fr(),g=X(b);Tt(_r(g,{}),I=>l=I,()=>l);var c=C(g,2),f=m(c),d=m(f),w=m(d);{var T=I=>{var Z=Pr();Ht(Z),$(()=>U(Z,"placeholder",i()("scene_title"))),Gt(Z,()=>F.name,et=>F.name=et),E(I,Z)},k=I=>{var Z=Br();$(()=>U(Z,"aria-label",i()("scene_title")));var et=m(Z,!0);v(Z),$(()=>z(et,F.name)),E(I,Z)};st(w,I=>{y(r)==="EDITING"?I(T):I(k,!1)})}v(d);var x=C(d,2),S=m(x);S.__click=[zr,r];var D=m(S);Oo(D,{});var O=C(D,2),B=m(O,!0);$(()=>z(B,i()("run_scene"))),v(O),v(S);var H=C(S,2);H.__click=[Dr,r];var K=m(H);Bo(K,{"aria-hidden":!0});var L=C(K,2),N=m(L,!0);$(()=>z(N,i()("edit_scene"))),v(L),v(H),v(x),v(f);var P=C(f,2),j=m(P),nt=m(j),V=m(nt),q=m(V,!0);$(()=>z(q,i()("column_name"))),v(V);var Q=C(V,2),G=m(Q,!0);$(()=>z(G,i()("column_initiative"))),v(Q),v(nt);var R=C(nt,2);{var J=I=>{var Z=Rr(),et=m(Z);Ht(et),$(()=>U(et,"placeholder",i()("placeholder_name"))),et.__keydown=[cn,h,a],Tt(et,bt=>s=bt,()=>s);var at=C(et,2);Ht(at),$(()=>U(at,"placeholder",i()("placeholder_initiative"))),at.__keydown=[cn,h,a];var mt=C(at,2),yt=m(mt);yt.__click=[Or,h,a],$(()=>U(yt,"aria-label",i()("add_combatant")));var Lt=m(yt);Pe(Lt,{strokeWidth:3,"aria-hidden":!0}),v(yt),v(mt),v(Z),Gt(et,()=>y(a).name,bt=>y(a).name=bt),Vt("focus",at,bt=>Qn(bt)),Gt(at,()=>y(a).initiative,bt=>y(a).initiative=bt),Mt(3,Z,()=>Re),E(I,Z)};st(R,I=>{y(r)==="EDITING"&&I(J)})}v(j);var it=C(j,2);{var tt=I=>{var Z=Hr(),et=m(Z),at=m(et),mt=m(at,!0);$(()=>z(mt,i()("scene.empty_combatants_info"))),v(at);var yt=C(at,2),Lt=m(yt);$(()=>z(Lt,`${i()("scene.empty_combatants_hint")??""} `));var bt=C(Lt,2);$(()=>z(bt,` ${i()("scene.empty_combatants_hint_2")??""}`)),v(yt),v(et),v(Z),E(I,Z)};st(it,I=>{F.combatants.length===0&&I(tt)})}v(P);var _t=C(P,2);zt(_t,25,()=>F.combatants,I=>I.id,(I,Z)=>{var et=Wr(),at=m(et);Ir(at,{get appMode(){return y(r)},get combatant(){return y(Z)},combatantClicked:p,conditionClicked:_,deleteCombatant:u}),v(et),Xi(et,()=>Ha,()=>({delay:100,duration:500})),E(I,et)}),v(c),$(()=>{S.disabled=F.combatants.length===0,kt(S,"hidden",y(r)=="RUNNING"),kt(H,"hidden",y(r)==="EDITING")}),E(t,b),xt()}Nt(["click","keydown"]);var Kr=(t,e)=>e(),qr=W('<img width="30em" alt="Sprache auf Deutsch stellen">'),Zr=W('<img width="30em" alt="Set language to English">'),Gr=W('<footer class="footer flex items-center border-t-4 border-primary bg-primary-content/10 p-4 text-base-content"><div class="flex-1"><p class="hidden sm:flex"> </p> <p class="sm:hidden"></p></div> <button> </button> <button id="ToggleLanguageBtn"><!></button> <nav class="flex-none"><a href="https://github.com/k3ltis/splittermond-tickleiste"><span class="sr-only">Github project</span> <svg width="24px" height="24px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="custom-icon" aria-hidden="true"><title>Github</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-140.000000, -7559.000000)" fill="#000000"><g id="icons" transform="translate(56.000000, 160.000000)"><path d="M94,7399 C99.523,7399 104,7403.59 104,7409.253 C104,7413.782 101.138,7417.624 97.167,7418.981 C96.66,7419.082 96.48,7418.762 96.48,7418.489 C96.48,7418.151 96.492,7417.047 96.492,7415.675 C96.492,7414.719 96.172,7414.095 95.813,7413.777 C98.04,7413.523 100.38,7412.656 100.38,7408.718 C100.38,7407.598 99.992,7406.684 99.35,7405.966 C99.454,7405.707 99.797,7404.664 99.252,7403.252 C99.252,7403.252 98.414,7402.977 96.505,7404.303 C95.706,7404.076 94.85,7403.962 94,7403.958 C93.15,7403.962 92.295,7404.076 91.497,7404.303 C89.586,7402.977 88.746,7403.252 88.746,7403.252 C88.203,7404.664 88.546,7405.707 88.649,7405.966 C88.01,7406.684 87.619,7407.598 87.619,7408.718 C87.619,7412.646 89.954,7413.526 92.175,7413.785 C91.889,7414.041 91.63,7414.493 91.54,7415.156 C90.97,7415.418 89.522,7415.871 88.63,7414.304 C88.63,7414.304 88.101,7413.319 87.097,7413.247 C87.097,7413.247 86.122,7413.234 87.029,7413.87 C87.029,7413.87 87.684,7414.185 88.139,7415.37 C88.139,7415.37 88.726,7417.2 91.508,7416.58 C91.513,7417.437 91.522,7418.245 91.522,7418.489 C91.522,7418.76 91.338,7419.077 90.839,7418.982 C86.865,7417.627 84,7413.783 84,7409.253 C84,7403.59 88.478,7399 94,7399" id="github-[#142]"></path></g></g></g></svg></a></nav></footer> <dialog id="dataPrivacyModal" class="modal" aria-labelledby="footerDialogTitle" aria-describedby="dialogDesc"><div class="modal-box"><form method="dialog"><button class="btn btn-circle btn-ghost btn-sm absolute right-4 top-4"><!></button></form> <h3 class="text-lg font-bold" id="footerDialogTitle"> </h3> <div class="py-4" id="dialogDesc"><p> </p> <p class="mt-6"> </p></div></div> <form method="dialog" class="modal-backdrop"><button> </button></form></dialog>',1);function Vr(t,e){wt(e,!0);const n=Ct(),i=()=>gt(Ge,"$locale",n),o=()=>gt(St,"$_",n);let a;const r="splittermond-tickleiste",s="1.4.0";let l=ht(Et(De(Ce)||$n)),h=ht(!1);function u(){ot(l,Et(y(l)===Zt.German?Zt.English:Zt.German)),Nn(Ce,y(l)),Li(Ge,Et(y(l))),document.title=o()("app_title")}function p(){ot(h,!0),a.showModal()}var _=Gr(),b=X(_),g=m(b),c=m(g),f=m(c);$(()=>z(f,`Copyright © k3ltis ${new Date().getFullYear()??""} - ${r} v${s}`)),v(c);var d=C(c,2);d.textContent=`v${s}`,v(g);var w=C(g,2);w.__click=p;var T=m(w,!0);$(()=>z(T,o()("data_privacy"))),v(w);var k=C(w,2);k.__click=[Kr,u];var x=m(k);{var S=it=>{var tt=qr();U(tt,"src",`${ve??""}/svg/flag-for-flag-germany-svgrepo-com.svg`),E(it,tt)},D=it=>{var tt=Zr();U(tt,"src",`${ve??""}/svg/flag-for-flag-united-kingdom-svgrepo-com.svg`),E(it,tt)};st(x,it=>{i()==="en"?it(S):it(D,!1)})}v(k),Ie(2),v(b);var O=C(b,2),B=m(O),H=m(B),K=m(H);$(()=>U(K,"aria-label",o()("close")));var L=m(K);Be(L,{"aria-hidden":!0,size:24}),v(K),v(H);var N=C(H,2),P=m(N,!0);$(()=>z(P,o()("data_privacy_header"))),v(N);var j=C(N,2),nt=m(j),V=m(nt,!0);$(()=>z(V,o()("data_privacy_content_1"))),v(nt);var q=C(nt,2),Q=m(q,!0);$(()=>z(Q,o()("data_privacy_content_2"))),v(q),v(j),v(B);var G=C(B,2),R=m(G),J=m(R,!0);$(()=>z(J,o()("close"))),v(R),v(G),v(O),Tt(O,it=>a=it,()=>a),$(()=>kt(O,"hidden",!y(h))),Vt("close",O,()=>ot(h,!1)),E(t,_),xt()}Nt(["click"]);const Jr="Add combatant",jr="Active combatant",Yr="Splittermond Tickbar",Xr="close",Qr="Initiative",ts="Name",es="Name of combatant",ns="Initiative",is="Interaction for {name}",os="Status: {status}",as="Combatants List",rs="Displays the list of combatants part of the scene.",ss="Data Privacy",ls="This page does utilize the browser's local storage to locally save the scene and user preferences (like language settings) in the user's browser. This is done, so that the user does not lose information when closing the browser application. If you wish to delete this information simply clear your browser's cached web data.",cs="No data is send to any remote server and no other user related data is processed by this page.",ds="Data Privacy Information",us="Delete combatant {name}",vs="Download Scene",fs="Lets you download the current scene as a JSON file.",_s="Edit Scene",ps="Toggles edit mode to change the scene name and combatants list.",ms="Loading scene",bs="Open menu",hs="Open interaction modal",gs="Initiative",ws="Name",xs="Run Scene",ys="Ends edit mode and runs the scene, ordering all combatants by ascending initiative. <b>Clicking a combatant in run mode allows you to choose a number of ticks</b> to add to the combatant's initiative value, followed by a reordering. <br/><br/> You can re-enter <b>edit mode</b> at any time.",$s="Scene Title",ks="Shows the current scene's name.",Cs="Lets you choose a scene to load that was previously saved to your device.",Ss="Join on tick",Ts="Tick movement",Es="Start explanation tour",Ns="Switch to {n, plural, =0 {light theme} =1 {dark theme} other {}}",Ls="Next",As="Previous",Ms="Done",Is="{{current}} of {{total}}",Ds="Upload Scene",zs="Upload Scene",Ps={change_theme:{title:"Day/Night Mode",content:"Toggle between day and night mode."},change_langauge:{title:"Toggle Language",content:"Switch between German and English."},combatant_modal:{ticks:{title:"Tick Selection Dialog",content:"Here you can select the <b>ticks</b> to add or subtract, as well as special combat states like <b>expecting</b>, <b>waiting</b>, or <b>incapitated</b>."},conditions:{title:"Condition Selection",content:"Here you can toggle conditions."}},toggle_scene_mode:{title:"Scene Mode Toggle",content:"Toggles between edit mode and play mode.<br/><br/> In <b>edit mode</b>, new combatants and their initial initiative can be added.<br/><br/> In <b>play mode</b>, combatants are sorted in ascending order based on their initiative. The button in the initiative column opens the dialog for selecting ticks and conditions."},header:{settings:{title:"Settings",content:"Here you can customize which conditions to be displayed in the conditions tab as well as define custom conditions."}}},Bs={tooltip:{tick_direction:"{n, plural, =0 {Negates} =1 {Adds} other {}} ticks",set_state_expecting:"Expecting",set_state_waiting:"Waiting",set_state_dead:"Incapitated"}},Os={empty_combatants_info:"No combatants were created yet",empty_combatants_hint:"Enter details of the combatant into the inputs above and press the",empty_combatants_hint_2:"button to add them."},Rs={actions:"Actions",conditions:"Conditions"},Hs={fearful:"Fearful",dazed:"Dazed",unconscious:"Unconscious",bleeding:"Bleeding",burning:"Burning",exhausted:"Exhausted",blinded:"Blinded",crisis_of_faith:"Crisis of Faith",sick:"Sick",crippled:"Crippled",panicked:"Panicked",frenzied:"Frenzied",struggling:"Struggling",sleeping:"Sleeping",wasting:"Wasting",dying:"Dying",wounded:"Wounded",no_conditions_selected:"No active conditions",no_conditions_selected_hint:"To display conditions in this view, click in the top right corner of the menu bar on",no_conditions_selected_hint_2:"and add new conditions or active existing ones."},Ws={custom_condition_placeholder:"Condition",custom_conditions:"Custom Conditions",conditions:"Conditions",title:"Settings",in_use:"Assigned conditions can not be modified.",add_new_condition:"Add new condition",new_condition_name:"Name for new condition",new_condition_level:"Max level for new condition",activate_condition:"Activate condition {name}",deactivate_condition:"Deactivate condition {name}",delete_condition:"Delete conditino {name}",empty_custom_conditions:"No custom conditions were created yet",empty_custom_conditions_hint:"Enter details of for a custom condition into the inputs above and press the",empty_custom_conditions_hint_2:"button to add."},Fs={add_combatant:Jr,active_combatant:jr,app_title:Yr,close:Xr,column_initiative:Qr,column_name:ts,combatant_name:es,combatant_initiative:ns,combatant_interaction_modal:is,combatant_status:os,combatants_list:as,combatants_list_description:rs,data_privacy:ss,data_privacy_content_1:ls,data_privacy_content_2:cs,data_privacy_header:ds,delete_combatant:us,download_scene:vs,download_scene_description:fs,edit_scene:_s,edit_scene_description:ps,loading_scene:ms,open_menu:bs,open_interactions:hs,placeholder_initiative:gs,placeholder_name:ws,run_scene:xs,run_scene_description:ys,scene_title:$s,scene_title_description:ks,upload_scene_description:Cs,tick_join:Ss,tick_move:Ts,start_tour:Es,toggle_theme:Ns,tour_btn_next:Ls,tour_btn_prev:As,tout_btn_done:Ms,tour_progress_text:Is,tour_upload_scene:Ds,upload_scene:zs,tour:Ps,tickselection:Bs,scene:Os,combatant_modal:Rs,condition:Hs,settings:Ws},Us="Kämpfer hinzufügen",Ks="Aktiver Kämpfer",qs="Splittermond Tickleiste",Zs="schließen",Gs="Initiative",Vs="Name",Js="Name des Kämpfers",js="Initiative",Ys="Interaktion für {name}",Xs="Status: {status}",Qs="Liste der Kämpfer",tl="Zeigt die Liste der Kämpfer, die Teil der Szene sind.",el="Datenschutz",nl="Diese Seite nutzt den lokalen Speicher des Browsers (local storage), um die Szene sowie benutzerdefinierte Einstellungen (wie etwas die gewählte Sprache) lokal im Browser des Nutzers zu speichern. Dies geschieht, damit der Nutzer keine Informationen verliert, wenn er die Browseranwendung schließt. Wenn Sie diese Informationen löschen möchten, müssen Sie die zwischengespeicherten Webdaten Ihres Browsers bereinigen.",il="Es werden keine Daten an einen externen Server gesendet und keine anderen nutzerbezogenen Daten werden von dieser Seite verarbeitet.",ol="Datenschutzinformationen",al="Kämpfer {name} löschen",rl="Szene herunterladen",sl="Ermöglicht es Ihnen, die aktuelle Szene als JSON-Datei herunterzuladen.",ll="Szene bearbeiten",cl="Wechselt in den Bearbeitungsmodus, um den Szenennamen und die Liste der Kämpfer zu ändern.",dl="Lade Szene",ul="Menü öffnen",vl="Interaktions Fenster öffen",fl="Initiative",_l="Name",pl="Szene ausführen",ml="Beendet den Bearbeitungsmodus und führt die Szene aus, indem alle Kämpfer nach aufsteigender Initiative geordnet werden. <b>Ein Klick auf einen Kämpfer im Ausführungsmodus ermöglicht es Ihnen, eine Anzahl von Ticks auszuwählen</b>, die zum Initiativwert des Kämpfers hinzugefügt werden, gefolgt von einer Neuanordnung. <br/><br/> Sie können jederzeit <b>in den Bearbeitungsmodus</b> zurückkehren.",bl="Szenenüberschrift",hl="Zeigt den Namen der aktuellen Szene an.",gl="Ermöglicht es Ihnen, eine Szene auszuwählen, die zuvor auf Ihrem Gerät gespeichert wurde.",wl="Erklärungs-Tour starten",xl="Tick Einstieg",yl="Tick Bewegung",$l="{n, plural, =0 {Tagmodus aktivieren} =1 {Nachtmodus aktivieren} other {}}",kl="Weiter",Cl="Zurück",Sl="Fertig",Tl="{{current}} von {{total}}",El="Szene hochladen",Nl="Szene hochladen",Ll={change_theme:{title:"Tag- und Nachtmodus",content:"Umschalten zwischen Tag- und Nachtmodus."},change_langauge:{title:"Sprache umschalten",content:"Zwischen Deutsch und Englisch wechseln."},combatant_modal:{ticks:{title:"Tick Auswahl",content:"Hier kannst du sowohl die <b>Ticks</b> auswählen, die hinzugefügt oder abgezogen werden sollen, als auch spezielle Kampfmodi aktivieren, wie <b>Aktion bereithalten</b>, <b>Abwarten </b>oder <b>kampfunfähig</b>."},conditions:{title:"Zustands Auswahl",content:"Hier kannst du Zustände aktivieren und deaktivieren."}},toggle_scene_mode:{title:"Szenen Modus Toggle",content:"Wechselt zwischen Bearbeitungsmodus und Spielmodus hin und her.<br/><br/> Im <b>Bearbeitungsmodus</b> können neue Kämpfer sowie ihre initiale Initiative hinzugefügt werden.<br/><br/> Im <b>Spielmodus</b> werden die Kämpfer aufsteigend nach ihrer Initiative sortiert. Über den button in der Initiativ-Spalte öffnet sich der Dialog für die Auswahl von Ticks und Zuständen."},header:{settings:{content:"Hier können die Sichtbarkeit von Zuständen im Zustandstab sowie eigene Zustände definiert werden.",title:"Einstellungen"}}},Al={tooltip:{tick_direction:"Ticks {n, plural, =0 {rückwärts} =1 {vorwärts} other {}}",set_state_expecting:"Bereithalten",set_state_dead:"Kampfunfähig",set_state_waiting:"Abwarten"}},Ml={empty_combatants_info:"Keine Kämpfer vorhanden",empty_combatants_hint:"Informationen zum Kämpfer in die oberen Eingabefelder eingeben und den",empty_combatants_hint_2:"Knopf drücken, um diesen hinzuzufügen."},Il={actions:"Aktionen",conditions:"Zustände"},Dl={fearful:"Angsterfüllt",dazed:"Benommen",unconscious:"Bewusstlos",bleeding:"Blutend",burning:"Brennend",exhausted:"Erschöpft",blinded:"Geblendet",crisis_of_faith:"Glaubenskrise",sick:"Krank",crippled:"Lahm",panicked:"Panisch",frenzied:"Rasend",struggling:"Ringend",sleeping:"Schlafend",wasting:"Siechtum",dying:"Sterbend",wounded:"Verwundet",no_conditions_selected:"Keine Zustände aktiviert",no_conditions_selected_hint:"Um Zustände hier anzuzeigen, klicke oben rechts in der Menüleiste auf",no_conditions_selected_hint_2:"und füge neue Zustände hinzu oder aktiviere vorhandene Zustände."},zl={conditions:"Zustände",custom_condition_placeholder:"Zustand",custom_conditions:"Eigene Zustände",title:"Einstellungen",in_use:"Zugewiesene Zustände können nicht bearbeitet werden.",add_new_condition:"Neuen Zustand hinzufügen",new_condition_name:"Name für neuen Zustand",new_condition_level:"Max Level für neuen Zustand",activate_condition:"Zustand {name} aktivieren",deactivate_condition:"Zustand {name} deaktivieren",delete_condition:"Zustand {name} löschen",empty_custom_conditions:"Keine eigenen Zustände vorhanden",empty_custom_conditions_hint:"Informationen für einen Zustand in die oberen Eingabefelder eingeben und den",empty_custom_conditions_hint_2:"Knopf drücken, um diesen hinzuzufügen."},Pl={add_combatant:Us,active_combatant:Ks,app_title:qs,close:Zs,column_initiative:Gs,column_name:Vs,combatant_name:Js,combatant_initiative:js,combatant_interaction_modal:Ys,combatant_status:Xs,combatants_list:Qs,combatants_list_description:tl,data_privacy:el,data_privacy_content_1:nl,data_privacy_content_2:il,data_privacy_header:ol,delete_combatant:al,download_scene:rl,download_scene_description:sl,edit_scene:ll,edit_scene_description:cl,loading_scene:dl,open_menu:ul,open_interactions:vl,placeholder_initiative:fl,placeholder_name:_l,run_scene:pl,run_scene_description:ml,scene_title:bl,scene_title_description:hl,upload_scene_description:gl,start_tour:wl,tick_join:xl,tick_move:yl,toggle_theme:$l,tour_btn_next:kl,tour_btn_prev:Cl,tout_btn_done:Sl,tour_progress_text:Tl,tour_upload_scene:El,upload_scene:Nl,tour:Ll,tickselection:Al,scene:Ml,combatant_modal:Il,condition:Dl,settings:zl};kn(Zt.German,Pl);kn(Zt.English,Fs);async function Bl(){return await Promise.allSettled([Ri({fallbackLocale:Zt.German,initialLocale:De(Ce)||$n})])}var Ol=W('<div class="absolute flex h-full w-full flex-col items-center justify-center bg-base-300"><img class="max-h-20" alt="splittermond logo"> <span class="loading loading-ring loading-lg my-8 text-primary"></span></div>'),Rl=W('<div class="flex min-h-screen flex-col"><!> <!> <!></div>'),Hl=W("<div><!></div>");function jl(t,e){wt(e,!0);const n=Ct(),i=()=>gt(St,"$_",n);let o=ht(!0);ne(async()=>{await Bl();const h=co();h&&An(h),ot(o,!1),document.title=i()("app_title")}),Me(()=>{y(o)||mo()});var a=Hl(),r=m(a);{var s=h=>{var u=Ol(),p=m(u);U(p,"src",`${ve??""}/logo.png`),Ie(2),v(u),Mt(2,u,()=>qt),E(h,u)},l=h=>{var u=Rl(),p=m(u);Pa(p,{});var _=C(p,2);Ur(_,{});var b=C(_,2);Vr(b,{}),v(u),Mt(1,u,()=>qt,()=>({delay:200})),E(h,u)};st(r,h=>{y(o)?h(s):h(l,!1)})}v(a),E(t,a),xt()}export{jl as component};
