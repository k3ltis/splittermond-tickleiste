import{a as A,t as H}from"../chunks/disclose-version.D7BRVwTw.js";import{h as w,s as D,F as Q,G as W,c as Z,b as q,I as aa,J as B,H as ea,d as L,e as I,f as O,K as ta,r as P,a as X,p as na,L as C,M as F,N as ra,O as oa,P as la,m as sa,Q as U,R as ia,S as fa,T as ca,U as ua,V as da,W as va,X as V,Y as _a,B as E,y as pa,g as m,i as $,Z as ga,_ as ha,C as R,$ as ba,D as T,z as Sa}from"../chunks/runtime.lhGiHDMj.js";import{d as ma,s as Na}from"../chunks/render.B5DSMxr7.js";import{i as wa}from"../chunks/if.C32MN6Iv.js";import{b as ya}from"../chunks/paths.3Lb8G48h.js";let M=null;function Ea(n,a){return a}function Oa(n,a,e,l){for(var s=[],f=a.length,i=0;i<f;i++)fa(a[i].e,s,!0);var g=f>0&&s.length===0&&e!==null;if(g){var S=e.parentNode;ca(S),S.append(e),l.clear(),y(n,a[0].prev,a[f-1].next)}ua(s,()=>{for(var t=0;t<f;t++){var d=a[t];g||(l.delete(d.k),y(n,d.prev,d.next)),da(d.e,!g)}})}function xa(n,a,e,l,s,f=null){var i=n,g={flags:a,items:new Map,first:null};{var S=n;i=w?D(Q(S)):S.appendChild(W())}w&&Z();var t=null,d=!1;q(()=>{var o=e(),v=aa(o)?o:o==null?[]:B(o),c=v.length;if(d&&c===0)return;d=c===0;let u=!1;if(w){var p=i.data===ea;p!==(c===0)&&(i=L(),D(i),I(!1),u=!0)}if(w){for(var r=null,_,h=0;h<c;h++){if(O.nodeType===8&&O.data===ta){i=O,u=!0,I(!1);break}var N=v[h],b=l(N,h);_=z(O,g,r,null,N,b,h,s,a),g.items.set(b,_),r=_}c>0&&D(L())}w||Ta(v,g,i,s,a,l),f!==null&&(c===0?t?P(t):t=X(()=>f(i)):t!==null&&na(t,()=>{t=null})),u&&I(!0),e()}),w&&(i=O)}function Ta(n,a,e,l,s,f){var i=n.length,g=a.items,S=a.first,t=S,d,o=null,v=[],c=[],u,p,r,_;for(_=0;_<i;_+=1){if(u=n[_],p=f(u,_),r=g.get(p),r===void 0){var h=t?t.e.nodes_start:e;o=z(h,a,o,o===null?a.first:o.next,u,p,_,l,s),g.set(p,o),v=[],c=[],t=o.next;continue}if(ka(r,u,_),r.e.f&C&&P(r.e),r!==t){if(d!==void 0&&d.has(r)){if(v.length<c.length){var N=c[0],b;o=N.prev;var x=v[0],k=v[v.length-1];for(b=0;b<v.length;b+=1)Y(v[b],N,e);for(b=0;b<c.length;b+=1)d.delete(c[b]);y(a,x.prev,k.next),y(a,o,x),y(a,k,N),t=N,o=k,_-=1,v=[],c=[]}else d.delete(r),Y(r,t,e),y(a,r.prev,r.next),y(a,r,o===null?a.first:o.next),y(a,o,r),o=r;continue}for(v=[],c=[];t!==null&&t.k!==p;)t.e.f&C||(d??(d=new Set)).add(t),c.push(t),t=t.next;if(t===null)continue;r=t}v.push(r),o=r,t=r.next}if(t!==null||d!==void 0){for(var J=d===void 0?[]:B(d);t!==null;)t.e.f&C||J.push(t),t=t.next;var G=J.length;if(G>0){var K=i===0?e:null;Oa(a,J,K,g)}}F.first=a.first&&a.first.e,F.last=o&&o.e}function ka(n,a,e,l){ra(n.v,a),n.i=e}function z(n,a,e,l,s,f,i,g,S){var t=M;try{var d=(S&oa)!==0,o=(S&la)===0,v=d?o?sa(s):U(s):s,c=S&ia?U(i):i,u={i:c,v,k:f,a:null,e:null,prev:e,next:l};return M=u,u.e=X(()=>g(n,v,c),w),u.e.prev=e&&e.e,u.e.next=l&&l.e,e===null?a.first=u:(e.next=u,e.e.next=u.e),l!==null&&(l.prev=u,l.e.prev=u.e),u}finally{M=t}}function Y(n,a,e){for(var l=n.next?n.next.e.nodes_start:e,s=a?a.e.nodes_start:e,f=n.e.nodes_start;f!==l;){var i=va(f);s.before(f),f=i}}function y(n,a,e){a===null?n.first=e:(a.next=e,a.e.next=e&&e.e),e!==null&&(e.prev=a,e.e.prev=a&&a.e)}function Ja(n,a,e,l){var s=n.__attributes??(n.__attributes={});if(w){s[a]=n.getAttribute(a);return}s[a]!==(s[a]=e)&&(e==null?n.removeAttribute(a):typeof e!="string"&&Aa(n).includes(a)?n[a]=e:n.setAttribute(a,e))}var j=new Map;function Aa(n){var a=j.get(n.nodeName);if(a)return a;j.set(n.nodeName,a=[]);for(var e,l=V(n),s=Element.prototype;s!==l;){e=_a(l);for(var f in e)e[f].set&&a.push(f);l=V(l)}return a}function Da(n,a){localStorage.setItem("jsonData",JSON.stringify(m(a))),console.log("Data saved to localStorage")}function Ia(n,a){const e=localStorage.getItem("jsonData");e?($(a,JSON.parse(e)),console.log("Data loaded from localStorage")):console.log("No data found in localStorage")}var Ca=(n,a)=>a(),Ra=(n,a)=>a("Marodeur"),Ma=H("<li> </li>"),Ha=H("<div><h2>Combatants:</h2> <ul></ul></div>"),La=H(`<h1>Splittermond Tickleisten Tool</h1> <p>This is a test to see if most important functionalities of the tool can be used in a client-side
	only environment.</p> <label for="battleScene">Upload JSON</label> <input type="file" id="battleScene" name="battleScene" accept="application/json" class="file-input w-full max-w-xs"> <button class="btn"><img width="30em" alt="download"> Download JSON</button> <button class="btn">Save</button> <button class="btn">Load</button> <button class="btn">Add Combatant</button> <!>`,1);function Ba(n){let a=null,e=ga({name:"",combatants:[]});function l(p){const r=p.target;r&&r.files&&(a=r.files[0],s())}function s(){if(a){const p=new FileReader;p.onload=r=>{var _;try{$(e,JSON.parse((_=r.target)==null?void 0:_.result)),console.log("Parsed JSON:",m(e))}catch(h){console.error("Error parsing JSON:",h),alert("Invalid JSON file")}},p.readAsText(a)}}async function f(){if(m(e)){const p=new File([JSON.stringify(m(e),null,2)],"data.json",{type:"application/json"});if(navigator.canShare&&navigator.canShare({files:[p]}))try{await navigator.share({files:[p],title:"Download JSON",text:"Download JSON file"})}catch(r){console.error("Error sharing JSON:",r)}else{const r=JSON.stringify(m(e),null,2),_="data:application/json;charset=utf-8,"+encodeURIComponent(r),h=document.createElement("a");h.href=_,h.download="data.json",h.target="_blank",h.click()}}else alert("No data to download")}function i(p){ha(e,m(e).combatants=[...m(e).combatants,p])}var g=La(),S=E(pa(g),6);S.__change=l;var t=E(S,2);t.__click=[Ca,f];var d=R(t);Ja(d,"src",`${ya??""}/svg/download-svgrepo-com.svg`),ba(),T(t);var o=E(t,2);o.__click=[Da,e];var v=E(o,2);v.__click=[Ia,e];var c=E(v,2);c.__click=[Ra,i];var u=E(c,2);wa(u,()=>m(e)!==null,p=>{var r=Ha(),_=E(R(r),2);xa(_,5,()=>m(e).combatants,Ea,(h,N)=>{var b=Ma(),x=R(b,!0);T(b),Sa(()=>Na(x,m(N))),A(h,b)}),T(_),T(r),A(p,r)}),A(n,g)}ma(["change","click"]);export{Ba as component};
