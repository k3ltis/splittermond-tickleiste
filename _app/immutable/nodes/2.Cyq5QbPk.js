var Rn=Object.defineProperty;var On=(e,t,n)=>t in e?Rn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Lt=(e,t,n)=>On(e,typeof t!="symbol"?t+"":t,n);import{b as ve,e as Hn,a as N,n as Wn,c as j,t as H,d as pe}from"../chunks/disclose-version.onpw1TGY.js";import{V as Ze,o as he,at as Xe,w as q,N as Mt,O as Dt,D as Fn,T as Qe,a9 as Un,aa as Se,M as Ot,x as vt,au as Qt,a7 as be,q as oe,a8 as tn,z as ae,G as Ut,av as ge,aw as Ce,ax as we,ay as Gn,W as Kn,a1 as fe,az as Jn,S as qn,aA as Vn,v as ye,I as $e,P as jn,F as en,aB as Yn,K as nn,Q as Zn,L as Xn,E as on,aC as an,a6 as Te,aD as Qn,aE as ti,aF as ei,aG as ni,aH as ii,ab as oi,b as ai,ai as ri,n as Bt,aI as si,aJ as ci,aK as li,B as Ne,C as Ee,aL as di,ac as ui,y as vi,a3 as pi,X as Q,g as k,p as dt,t as E,j as ut,k as w,i as G,m as D,l as g,as as It,a as xe,aM as Rt,ao as Ae,aN as qt,f as se,aO as rn}from"../chunks/utils.BfQqSY2O.js";import{a as lt,l as Z,p as Tt,s as nt,o as zt,i as V,b as yt}from"../chunks/index-client.C2cgG_34.js";import{d as Le,i as fi,e as Me,f as _t,n as _i,g as mi,j as hi,s as mt,b as pt,a as U,k as sn,l as bi}from"../chunks/store.C3rmQDjn.js";import{i as Kt}from"../chunks/lifecycle.CjgY9P6n.js";import{a as ht,$ as De,b as cn,i as gi,g as wi}from"../chunks/runtime.8c0rP3Zd.js";import{b as _e}from"../chunks/paths.CkZHkeMu.js";let Nt=null;function Ie(e){Nt=e}function re(e,t){return t}function yi(e,t,n,i){for(var o=[],a=t.length,r=0;r<a;r++)Jn(t[r].e,o,!0);var s=a>0&&o.length===0&&n!==null;if(s){var u=n.parentNode;qn(u),u.append(n),i.clear(),wt(e,t[0].prev,t[a-1].next)}Vn(o,()=>{for(var v=0;v<a;v++){var l=t[v];s||(i.delete(l.k),wt(e,l.prev,l.next)),ye(l.e,!s)}})}function Jt(e,t,n,i,o,a=null){var r=e,s={flags:t,items:new Map,first:null},u=(t&Xe)!==0;if(u){var v=e;r=q?Mt($e(v)):v.appendChild(Ze())}q&&Dt();var l=null,c=!1;he(()=>{var d=n(),h=Fn(d)?d:d==null?[]:Qe(d),p=h.length;if(c&&p===0)return;c=p===0;let $=!1;if(q){var _=r.data===Un;_!==(p===0)&&(r=Se(),Mt(r),Ot(!1),$=!0)}if(q){for(var f=null,y,T=0;T<p;T++){if(vt.nodeType===8&&vt.data===jn){r=vt,$=!0,Ot(!1);break}var b=h[T],m=i(b,T);y=ln(vt,s,f,null,b,m,T,o,t),s.items.set(m,y),f=y}p>0&&Mt(Se())}if(!q){var S=en;$i(h,s,r,o,t,(S.f&Qt)!==0,i)}a!==null&&(p===0?l?be(l):l=oe(()=>a(r)):l!==null&&tn(l,()=>{l=null})),$&&Ot(!0),n()}),q&&(r=vt)}function $i(e,t,n,i,o,a,r){var B,J,R,ot;var s=(o&Yn)!==0,u=(o&(ge|we))!==0,v=e.length,l=t.items,c=t.first,d=c,h,p=null,$,_=[],f=[],y,T,b,m;if(s)for(m=0;m<v;m+=1)y=e[m],T=r(y,m),b=l.get(T),b!==void 0&&((B=b.a)==null||B.measure(),($??($=new Set)).add(b));for(m=0;m<v;m+=1){if(y=e[m],T=r(y,m),b=l.get(T),b===void 0){var S=d?d.e.nodes_start:n;p=ln(S,t,p,p===null?t.first:p.next,y,T,m,i,o),l.set(T,p),_=[],f=[],d=p.next;continue}if(u&&xi(b,y,m,o),b.e.f&Qt&&(be(b.e),s&&((J=b.a)==null||J.unfix(),($??($=new Set)).delete(b))),b!==d){if(h!==void 0&&h.has(b)){if(_.length<f.length){var I=f[0],x;p=I.prev;var M=_[0],L=_[_.length-1];for(x=0;x<_.length;x+=1)ze(_[x],I,n);for(x=0;x<f.length;x+=1)h.delete(f[x]);wt(t,M.prev,L.next),wt(t,p,M),wt(t,L,I),d=I,p=L,m-=1,_=[],f=[]}else h.delete(b),ze(b,d,n),wt(t,b.prev,b.next),wt(t,b,p===null?t.first:p.next),wt(t,p,b),p=b;continue}for(_=[],f=[];d!==null&&d.k!==T;)(a||!(d.e.f&Qt))&&(h??(h=new Set)).add(d),f.push(d),d=d.next;if(d===null)continue;b=d}_.push(b),p=b,d=b.next}if(d!==null||h!==void 0){for(var z=h===void 0?[]:Qe(h);d!==null;)(a||!(d.e.f&Qt))&&z.push(d),d=d.next;var P=z.length;if(P>0){var O=o&Xe&&v===0?n:null;if(s){for(m=0;m<P;m+=1)(R=z[m].a)==null||R.measure();for(m=0;m<P;m+=1)(ot=z[m].a)==null||ot.fix()}yi(t,z,O,l)}}s&&ae(()=>{var ct;if($!==void 0)for(b of $)(ct=b.a)==null||ct.apply()}),Ut.first=t.first&&t.first.e,Ut.last=p&&p.e}function xi(e,t,n,i){i&ge&&Ce(e.v,t),i&we?Ce(e.i,n):e.i=n}function ln(e,t,n,i,o,a,r,s,u){var v=Nt;try{var l=(u&ge)!==0,c=(u&Gn)===0,d=l?c?Kn(o):fe(o):o,h=u&we?fe(r):r,p={i:h,v:d,k:a,a:null,e:null,prev:n,next:i};return Nt=p,p.e=oe(()=>s(e,d,h),q),p.e.prev=n&&n.e,p.e.next=i&&i.e,n===null?t.first=p:(n.next=p,n.e.next=p.e),i!==null&&(i.prev=p,i.e.prev=p.e),p}finally{Nt=v}}function ze(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,o=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==i;){var r=nn(a);o.before(a),a=r}}function wt(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function ki(e,t,n,i,o){var a=e,r="",s;he(()=>{if(r===(r=t()??"")){q&&Dt();return}s!==void 0&&(ye(s),s=void 0),r!==""&&(s=oe(()=>{if(q){vt.data;for(var u=Dt(),v=u;u!==null&&(u.nodeType!==8||u.data!=="");)v=u,u=nn(u);if(u===null)throw Zn(),Xn;ve(vt,v),a=Mt(u);return}var l=r+"",c=Hn(l);ve($e(c),c.lastChild),a.before(c)}))})}function tt(e,t,n,i,o){var s;q&&Dt();var a=(s=t.$$slots)==null?void 0:s[n],r=!1;a===!0&&(a=t.children,r=!0),a===void 0||a(e,r?()=>i:i)}function Si(e,t,n,i,o,a){let r=q;q&&Dt();var s,u,v=null;q&&vt.nodeType===1&&(v=vt,Dt());var l=q?vt:e,c,d=Nt;he(()=>{const h=t()||null;var p=an;if(h!==s){var $=Nt;Ie(d),c&&(h===null?tn(c,()=>{c=null,u=null}):h===u?be(c):(ye(c),Le(!1))),h&&h!==u&&(c=oe(()=>{if(v=q?v:document.createElementNS(p,h),ve(v,v),i){var _=q?$e(v):v.appendChild(Ze());q&&(_===null?Ot(!1):Mt(_)),i(v,_)}Ut.nodes_end=v,l.before(v)})),s=h,s&&(u=s),Le(!0),Ie($)}},on),r&&(Ot(!0),Mt(l))}function Ci(e,t){if(t){const n=document.body;e.autofocus=!0,ae(()=>{document.activeElement===n&&e.focus()})}}let Pe=!1;function dn(){Pe||(Pe=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Ht(e){if(q){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var i=e.value;K(e,"value",null),e.value=i}if(e.hasAttribute("checked")){var o=e.checked;K(e,"checked",null),e.checked=o}}};e.__on_r=n,ti(n),dn()}}function K(e,t,n,i){var o=e.__attributes??(e.__attributes={});q&&(o[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||o[t]!==(o[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[ei]=n),n==null?e.removeAttribute(t):typeof n!="string"&&un(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Be(e,t,n,i,o=!1,a=!1,r=!1){var s=t||{},u=e.tagName==="OPTION";for(var v in t)v in n||(n[v]=null);var l=un(e),c=e.__attributes??(e.__attributes={}),d=[];for(const f in n){let y=n[f];if(u&&f==="value"&&y==null){e.value=e.__value="",s[f]=y;continue}var h=s[f];if(y!==h){s[f]=y;var p=f[0]+f[1];if(p!=="$$"){if(p==="on"){const T={},b="$$"+f;let m=f.slice(2);var $=mi(m);if(fi(m)&&(m=m.slice(0,-7),T.capture=!0),!$&&h){if(y!=null)continue;e.removeEventListener(m,s[b],T),s[b]=null}if(y!=null)if($)e[`__${m}`]=y,_t([m]);else{let S=function(I){s[f].call(this,I)};t?s[b]=Me(m,e,S,T):d.push([f,y,()=>s[b]=Me(m,e,S,T)])}}else if(f==="style"&&y!=null)e.style.cssText=y+"";else if(f==="autofocus")Ci(e,!!y);else if(f==="__value"||f==="value"&&y!=null)e.value=e[f]=e.__value=y;else{var _=f;o||(_=_i(_)),y==null&&!a?(c[f]=null,e.removeAttribute(f)):l.includes(_)&&(a||typeof y!="string")?e[_]=y:typeof y!="function"&&(q&&(_==="src"||_==="href"||_==="srcset")||K(e,_,y))}f==="style"&&"__styles"in e&&(e.__styles={})}}}return t||ae(()=>{if(e.isConnected)for(const[f,y,T]of d)s[f]===y&&T()}),s}var Re=new Map;function un(e){var t=Re.get(e.nodeName);if(t)return t;Re.set(e.nodeName,t=[]);for(var n,i=Te(e),o=Element.prototype;o!==i;){n=Qn(i);for(var a in n)n[a].set&&t.push(a);i=Te(i)}return t}function te(e,t){var n=e.__className,i=Ti(t);q&&e.className===i?e.__className=i:(n!==i||q&&e.className!==i)&&(t==null?e.removeAttribute("class"):e.className=i,e.__className=i)}function Ti(e){return e??""}function ft(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}const Ni=()=>performance.now(),$t={tick:e=>requestAnimationFrame(e),now:()=>Ni(),tasks:new Set};function vn(e){$t.tasks.forEach(t=>{t.c(e)||($t.tasks.delete(t),t.f())}),$t.tasks.size!==0&&$t.tick(vn)}function Ei(e){let t;return $t.tasks.size===0&&$t.tick(vn),{promise:new Promise(n=>{$t.tasks.add(t={c:e,f:n})}),abort(){$t.tasks.delete(t)}}}function Vt(e,t){e.dispatchEvent(new CustomEvent(t))}function Ai(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Oe(e){const t={},n=e.split(";");for(const i of n){const[o,a]=i.split(":");if(!o||a===void 0)break;const r=Ai(o.trim());t[r]=a.trim()}return t}const Li=e=>e;function Mi(e,t,n){var i=Nt,o,a,r,s=null;i.a??(i.a={element:e,measure(){o=this.element.getBoundingClientRect()},apply(){if(r==null||r.abort(),a=this.element.getBoundingClientRect(),o.left!==a.left||o.right!==a.right||o.top!==a.top||o.bottom!==a.bottom){const u=t()(this.element,{from:o,to:a},n==null?void 0:n());r=ee(this.element,u,void 0,1,()=>{r==null||r.abort(),r=void 0})}},fix(){if(!e.getAnimations().length){var{position:u,width:v,height:l}=getComputedStyle(e);if(u!=="absolute"&&u!=="fixed"){var c=e.style;s={position:c.position,width:c.width,height:c.height,transform:c.transform},c.position="absolute",c.width=v,c.height=l;var d=e.getBoundingClientRect();if(o.left!==d.left||o.top!==d.top){var h=`translate(${o.left-d.left}px, ${o.top-d.top}px)`;c.transform=c.transform?`${c.transform} ${h}`:h}}}},unfix(){if(s){var u=e.style;u.position=s.position,u.width=s.width,u.height=s.height,u.transform=s.transform}}}),i.a.element=e}function Wt(e,t,n,i){var o=(e&si)!==0,a=(e&ci)!==0,r=o&&a,s=(e&li)!==0,u=r?"both":o?"in":"out",v,l=t.inert,c,d;function h(){var y=en,T=Ut;Ne(null),Ee(null);try{return v??(v=n()(t,(i==null?void 0:i())??{},{direction:u}))}finally{Ne(y),Ee(T)}}var p={is_global:s,in(){var y;if(t.inert=l,!o){d==null||d.abort(),(y=d==null?void 0:d.reset)==null||y.call(d);return}a||c==null||c.abort(),Vt(t,"introstart"),c=ee(t,h(),d,1,()=>{Vt(t,"introend"),c==null||c.abort(),c=v=void 0})},out(y){if(!a){y==null||y(),v=void 0;return}t.inert=!0,Vt(t,"outrostart"),d=ee(t,h(),c,0,()=>{Vt(t,"outroend"),y==null||y()})},stop:()=>{c==null||c.abort(),d==null||d.abort()}},$=Ut;if(($.transitions??($.transitions=[])).push(p),o&&hi){var _=s;if(!_){for(var f=$.parent;f&&f.f&on;)for(;(f=f.parent)&&!(f.f&ni););_=!f||(f.f&ii)!==0}_&&oi(()=>{ai(()=>p.in())})}}function ee(e,t,n,i,o){var a=i===1;if(ri(t)){var r,s=!1;return ae(()=>{if(!s){var _=t({direction:a?"in":"out"});r=ee(e,_,n,i,o)}}),{abort:()=>{s=!0,r==null||r.abort()},deactivate:()=>r.deactivate(),reset:()=>r.reset(),t:()=>r.t()}}if(n==null||n.deactivate(),!(t!=null&&t.duration))return o(),{abort:Bt,deactivate:Bt,reset:Bt,t:()=>i};const{delay:u=0,css:v,tick:l,easing:c=Li}=t;var d=[];if(a&&n===void 0&&(l&&l(0,1),v)){var h=Oe(v(0,1));d.push(h,h)}var p=()=>1-i,$=e.animate(d,{duration:u});return $.onfinish=()=>{var _=(n==null?void 0:n.t())??1-i;n==null||n.abort();var f=i-_,y=t.duration*Math.abs(f),T=[];if(y>0){if(v)for(var b=Math.ceil(y/16.666666666666668),m=0;m<=b;m+=1){var S=_+f*c(m/b),I=v(S,1-S);T.push(Oe(I))}p=()=>{var x=$.currentTime;return _+f*c(x/y)},l&&Ei(()=>{if($.playState!=="running")return!1;var x=p();return l(x,1-x),!0})}$=e.animate(T,{duration:y,fill:"forwards"}),$.onfinish=()=>{p=()=>i,l==null||l(i,1-i),o()}},{abort:()=>{$&&($.cancel(),$.effect=null,$.onfinish=Bt)},deactivate:()=>{o=Bt},reset:()=>{i===0&&(l==null||l(1,0))},t:()=>p()}}function Di(e,t,n,i=n){e.addEventListener(t,n);const o=e.__on_r;o?e.__on_r=()=>{o(),i()}:e.__on_r=i,dn()}function Ft(e,t,n=t){var i=di();Di(e,"input",()=>{var o=He(e)?We(e.value):e.value;n(o),i&&o!==(o=t())&&(e.value=o??"")}),ui(()=>{var o=t();if(q&&e.defaultValue!==e.value){n(e.value);return}He(e)&&o===We(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function He(e){var t=e.type;return t==="number"||t==="range"}function We(e){return e===""?null:+e}function Ii(e,t,n){var i=pi(e,t);i&&i.set&&(e[t]=n,vi(()=>{e[t]=null}))}function zi(e){var t=fe(0);return function(){return arguments.length===1?(Q(t,k(t)+1),arguments[0]):(k(t),e())}}const et=[];for(let e=0;e<256;++e)et.push((e+256).toString(16).slice(1));function Pi(e,t=0){return(et[e[t+0]]+et[e[t+1]]+et[e[t+2]]+et[e[t+3]]+"-"+et[e[t+4]]+et[e[t+5]]+"-"+et[e[t+6]]+et[e[t+7]]+"-"+et[e[t+8]]+et[e[t+9]]+"-"+et[e[t+10]]+et[e[t+11]]+et[e[t+12]]+et[e[t+13]]+et[e[t+14]]+et[e[t+15]]).toLowerCase()}let ce;const Bi=new Uint8Array(16);function Ri(){if(!ce){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ce=crypto.getRandomValues.bind(crypto)}return ce(Bi)}const Oi=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Fe={randomUUID:Oi};function Hi(e,t,n){if(Fe.randomUUID&&!t&&!e)return Fe.randomUUID();e=e||{};const i=e.random||(e.rng||Ri)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Pi(i)}const pn=(e,t)=>{localStorage.setItem(e,JSON.stringify(t)),console.log(`Data saved to localStorage with key: ${e}`)},fn=e=>{const t=localStorage.getItem(e);return t?(console.log(`Data loaded from localStorage with key: ${e}`),JSON.parse(t)):(console.log(`No data found in localStorage with key: ${e}`),null)},Wi=e=>{localStorage.setItem("scene",JSON.stringify(e)),console.log("Data saved to localStorage")},Fi=()=>{const e=localStorage.getItem("scene");if(e){const t=JSON.parse(e);return console.log("scene loaded from localStorage"),t}return console.log("no scene found in localStorage"),null},_n=[{id:"fearful",i18n:"condition.fearful"},{id:"dazed",i18n:"condition.dazed"},{id:"unconscious",i18n:"condition.unconscious"},{id:"bleeding",i18n:"condition.bleeding"},{id:"burning",i18n:"condition.burning"},{id:"exhausted",i18n:"condition.exhausted"},{id:"blinded",i18n:"condition.blinded"},{id:"crisis_of_faith",i18n:"condition.crisis_of_faith"},{id:"sick",i18n:"condition.sick"},{id:"crippled",i18n:"condition.crippled"},{id:"panicked",i18n:"condition.panicked"},{id:"frenzied",i18n:"condition.frenzied"},{id:"dying",i18n:"condition.dying"},{id:"wounded",i18n:"condition.wounded"}];function Ui(e){return e.version===void 0&&(e.version=1),e.combatants.forEach(n=>{n.conditionStates===void 0&&(n.conditionStates=[])}),e}function Gi(e){return e=Ui(e),e}const F=lt({version:0,name:"My Scene",combatants:[],mostRecentTick:0}),W=lt({activeCombatant:null,ticks:[]});function Ki(){return F.combatants.find(e=>e.combatState==="Active")||null}function Ue(){return{id:Hi(),name:"",initiative:0,combatState:"Active",conditionStates:[]}}function mn(e){console.log(`Load scene ${JSON.stringify(e)}`),Object.assign(F,Gi(e)),xt()}function Ji(){Wi(F)}function qi(){const e=JSON.parse(JSON.stringify(F));return e.mostRecentTick=ke(),e}function Vi(e,t){const n=F.combatants.find(i=>i.id===e);if(!n){console.error("Cannot find combatant with id "+e);return}F.combatants.length>0&&n===F.combatants.find(i=>i.combatState==="Active")&&(F.mostRecentTick=n.initiative),n.initiative+=t,xt(n)}function ji(e,t){const n=F.combatants.find(o=>o.id===e);if(!n){console.error("Cannot find combatant with id "+e);return}const i=n.combatState;n.initiative=t,n.combatState="Active",F.mostRecentTick=n.initiative,i==="Expecting"?xt(null,n):xt(n)}function Yi(e){const t=F.combatants.find(n=>n.id===e);if(!t){console.error("Cannot find combatant with id "+e);return}t.combatState="Waiting",F.mostRecentTick=t.initiative,xt(t)}function Zi(e){const t=F.combatants.find(n=>n.id===e);if(!t){console.error("Cannot find combatant with id "+e);return}t.combatState="Expecting",F.mostRecentTick=t.initiative,xt(t)}function Xi(e){const t=F.combatants.find(n=>n.id===e);if(!t){console.error("Cannot find combatant with id "+e);return}t.combatState="Dead",xt(t)}function jt(){W.activeCombatant=null}function Qi(){F.mostRecentTick=ke()}function to(){const e=ke(),t=F.mostRecentTick;if(t>e||t===1/0||e===1/0)return console.error("Tick range invalid. First tick must not be larger than last tick. Neither must be Infinity.",t,e),[{number:0,hasCombatants:!1,mode:"absolute"}];const n=[];for(let i=t;i<=e;(i+=1)-1)n.push({number:i,hasCombatants:hn(i,F.combatants.filter(o=>{var a;return o.id!==((a=W.activeCombatant)==null?void 0:a.id)})),mode:"absolute"});return n}function eo(e,t,n){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20].map(i=>{const o=e?-i:i,a=o+t;return{number:o,hasCombatants:hn(a,n),mode:"relative"}})}function xt(e=null,t=null){const i=JSON.parse(JSON.stringify(F.combatants)).reduce((o,a)=>(o[a.combatState].push(a),o),{Active:[],Waiting:[],Expecting:[],Dead:[]});i.Active.sort((o,a)=>{if(o.initiative!==a.initiative)return o.initiative-a.initiative;if(o.initiative===a.initiative){if(e){if(o.id===e.id)return 1;if(a.id===e.id)return-1}if(t){if(o.id===t.id)return-1;if(a.id===t.id)return 1}}return 0}),i.Waiting.sort((o,a)=>o.initiative-a.initiative),i.Expecting.sort((o,a)=>o.initiative-a.initiative),i.Dead.sort((o,a)=>o.initiative-a.initiative),F.combatants=[].concat(...i.Waiting,...i.Expecting,...i.Active,...i.Dead)}function no(e,t){const n=F.combatants.find(o=>o.id===e);if(!n){console.error("cannot find combatant with id "+e);return}const i=n.conditionStates.findIndex(o=>o.id===t);i>=0?(console.log(`remove condition ${t} from combatant ${e}`),n.conditionStates.splice(i,1)):(console.log(`add condition ${t} to combatant ${e}`),n.conditionStates.push({id:t,activeSinceTick:n.initiative}))}function ke(){const e=F.combatants.filter(t=>t!==W.activeCombatant&&t.combatState==="Active").map(t=>t.initiative);return e.length===0?F.mostRecentTick||0:Math.min(...e)}function hn(e,t){return t.some(n=>n.initiative===e)}const le=".splimo.json",io=e=>new Promise((t,n)=>{const i=new FileReader;i.onload=o=>{var a;try{const r=JSON.parse((a=o.target)==null?void 0:a.result);t(r)}catch(r){console.error("error parsing JSON:",r),alert("invalid JSON file"),n(r)}},i.onerror=o=>{console.error("error reading file:",o),n(o)},i.readAsText(e)}),Ge=(e,t)=>{const n=JSON.stringify(e,null,2),i="data:application/json;charset=utf-8,"+encodeURIComponent(n),o=document.createElement("a");o.href=i,o.download=t,o.target="_blank",o.click()},oo=async(e,t="scene"+le)=>{if(e){t.endsWith(le)||(t+=le);const n=[JSON.stringify(e,null,2)],i=new File(n,t,{type:"application/json",lastModified:Date.now()});if(navigator.canShare&&navigator.canShare({files:[i]}))try{await navigator.share({files:[i],title:"Download JSON",text:"Download JSON file"})}catch(o){console.error("Error sharing JSON:",o),console.info("Try downloading file via data url fallback"),Ge(e,t)}else Ge(e,t)}else alert("No data to download")};/**
 * @license lucide-svelte v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var ro=Wn("<svg><!><!></svg>");function it(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]),i=Z(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);dt(t,!1);let o=Tt(t,"name",8,void 0),a=Tt(t,"color",8,"currentColor"),r=Tt(t,"size",8,24),s=Tt(t,"strokeWidth",8,2),u=Tt(t,"absoluteStrokeWidth",8,!1),v=Tt(t,"iconNode",24,()=>[]);const l=(...$)=>$.filter((_,f,y)=>!!_&&y.indexOf(_)===f).join(" ");Kt();var c=ro();let d;var h=w(c);Jt(h,1,v,re,($,_)=>{let f=()=>k(_)[0],y=()=>k(_)[1];var T=j(),b=G(T);Si(b,f,!0,(m,S)=>{let I;E(()=>I=Be(m,I,{...y()},void 0,m.namespaceURI===an,m.nodeName.includes("-")))}),N($,T)});var p=D(h);tt(p,t,"default",{}),g(c),E(()=>d=Be(c,d,{...ao,...i,width:r(),height:r(),stroke:a(),"stroke-width":u()?Number(s())*24/Number(r()):s(),class:l("lucide-icon","lucide",o()?`lucide-${o()}`:"",n.class)},void 0,!0)),N(e,c),ut()}function so(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"arrow-right"},()=>n,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}function co(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"circle-help"},()=>n,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}function bn(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"clock-alert"},()=>n,{iconNode:[["path",{d:"M12 6v6l4 2"}],["path",{d:"M16 21.16a10 10 0 1 1 5-13.516"}],["path",{d:"M20 11.5v6"}],["path",{d:"M20 21.5h.01"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}function lo(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"download"},()=>n,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}function gn(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"hourglass"},()=>n,{iconNode:[["path",{d:"M5 22h14"}],["path",{d:"M5 2h14"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}function uo(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"menu"},()=>n,{iconNode:[["line",{x1:"4",x2:"20",y1:"12",y2:"12"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}function vo(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"minus"},()=>n,{iconNode:[["path",{d:"M5 12h14"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}function po(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"moon"},()=>n,{iconNode:[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}function fo(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"pencil"},()=>n,{iconNode:[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}function _o(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"play"},()=>n,{iconNode:[["polygon",{points:"6 3 20 12 6 21 6 3"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}function wn(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"plus"},()=>n,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}function yn(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"skull"},()=>n,{iconNode:[["path",{d:"m12.5 17-.5-1-.5 1h1z"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"9",cy:"12",r:"1"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}function mo(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"sun"},()=>n,{iconNode:[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}function ho(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"trash"},()=>n,{iconNode:[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}function bo(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"upload"},()=>n,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}function go(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"user-round"},()=>n,{iconNode:[["circle",{cx:"12",cy:"8",r:"5"}],["path",{d:"M20 21a8 8 0 0 0-16 0"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}function $n(e,t){const n=Z(t,["children","$$slots","$$events","$$legacy"]);it(e,nt({name:"x"},()=>n,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(o,a)=>{var r=j(),s=G(r);tt(s,t,"default",{}),N(o,r)},$$slots:{default:!0}}))}var wo=(e,t)=>t(),yo=H('<div id="ThemeToggle"><button class="btn btn-ghost"><!></button></div>');function $o(e,t){dt(t,!0);const n=mt(),i=()=>pt(ht,"$_",n),o={Light:"LIGHT",Dark:"DARK"},a={[o.Light]:"light",[o.Dark]:"dark"},r="theme_mode",s=o.Light;zt(()=>{const p=fn(r);Q(u,lt(p||s))});let u=It(lt(o.Light));xe(()=>{v(a[k(u)]),pn(r,k(u))});function v(p){document.documentElement.setAttribute("data-theme",p)}function l(){Q(u,lt(k(u)===o.Light?o.Dark:o.Light))}var c=yo(),d=w(c);d.__click=[wo,l],E(()=>K(d,"aria-label",i()("toggle_theme",{values:{n:+(k(u)===o.Light)}})));var h=w(d);V(h,()=>k(u)===o.Light,p=>{po(p,{"aria-hidden":!0})},p=>{mo(p,{"aria-hidden":!0})}),g(d),g(c),N(e,c),ut()}_t(["click"]);let me={};function de(e={}){me={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...e}}function C(e){return e?me[e]:me}function Yt(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}function xn(e){const t='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return e.flatMap(n=>{const i=n.matches(t),o=Array.from(n.querySelectorAll(t));return[...i?[n]:[],...o]}).filter(n=>getComputedStyle(n).pointerEvents!=="none"&&So(n))}function kn(e){if(!e||ko(e))return;const t=C("smoothScroll");e.scrollIntoView({behavior:!t||xo(e)?"auto":"smooth",inline:"center",block:"center"})}function xo(e){if(!e||!e.parentElement)return;const t=e.parentElement;return t.scrollHeight>t.clientHeight}function ko(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function So(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}let ne={};function X(e,t){ne[e]=t}function A(e){return e?ne[e]:ne}function Ke(){ne={}}let ie={};function Zt(e,t){ie[e]=t}function Et(e){var t;(t=ie[e])==null||t.call(ie)}function Co(){ie={}}function To(e,t,n,i){let o=A("__activeStagePosition");const a=o||n.getBoundingClientRect(),r=i.getBoundingClientRect(),s=Yt(e,a.x,r.x-a.x,t),u=Yt(e,a.y,r.y-a.y,t),v=Yt(e,a.width,r.width-a.width,t),l=Yt(e,a.height,r.height-a.height,t);o={x:s,y:u,width:v,height:l},Cn(o),X("__activeStagePosition",o)}function Sn(e){if(!e)return;const t=e.getBoundingClientRect(),n={x:t.x,y:t.y,width:t.width,height:t.height};X("__activeStagePosition",n),Cn(n)}function No(){const e=A("__activeStagePosition"),t=A("__overlaySvg");if(!e)return;if(!t){console.warn("No stage svg found.");return}const n=window.innerWidth,i=window.innerHeight;t.setAttribute("viewBox",`0 0 ${n} ${i}`)}function Eo(e){const t=Ao(e);document.body.appendChild(t),En(t,n=>{n.target.tagName==="path"&&Et("overlayClick")}),X("__overlaySvg",t)}function Cn(e){const t=A("__overlaySvg");if(!t){Eo(e);return}const n=t.firstElementChild;if((n==null?void 0:n.tagName)!=="path")throw new Error("no path element found in stage svg");n.setAttribute("d",Tn(e))}function Ao(e){const t=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${t} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",Tn(e)),o.style.fill=C("overlayColor")||"rgb(0,0,0)",o.style.opacity=`${C("overlayOpacity")}`,o.style.pointerEvents="auto",o.style.cursor="auto",i.appendChild(o),i}function Tn(e){const t=window.innerWidth,n=window.innerHeight,i=C("stagePadding")||0,o=C("stageRadius")||0,a=e.width+i*2,r=e.height+i*2,s=Math.min(o,a/2,r/2),u=Math.floor(Math.max(s,0)),v=e.x-i+u,l=e.y-i,c=a-u*2,d=r-u*2;return`M${t},0L0,0L0,${n}L${t},${n}L${t},0Z
    M${v},${l} h${c} a${u},${u} 0 0 1 ${u},${u} v${d} a${u},${u} 0 0 1 -${u},${u} h-${c} a${u},${u} 0 0 1 -${u},-${u} v-${d} a${u},${u} 0 0 1 ${u},-${u} z`}function Lo(){const e=A("__overlaySvg");e&&e.remove()}function Mo(){const e=document.getElementById("driver-dummy-element");if(e)return e;let t=document.createElement("div");return t.id="driver-dummy-element",t.style.width="0",t.style.height="0",t.style.pointerEvents="none",t.style.opacity="0",t.style.position="fixed",t.style.top="50%",t.style.left="50%",document.body.appendChild(t),t}function Je(e){const{element:t}=e;let n=typeof t=="string"?document.querySelector(t):t;n||(n=Mo()),Io(n,e)}function Do(){const e=A("__activeElement"),t=A("__activeStep");e&&(Sn(e),No(),Ln(e,t))}function Io(e,t){const n=Date.now(),i=A("__activeStep"),o=A("__activeElement")||e,a=!o||o===e,r=e.id==="driver-dummy-element",s=o.id==="driver-dummy-element",u=C("animate"),v=t.onHighlightStarted||C("onHighlightStarted"),l=(t==null?void 0:t.onHighlighted)||C("onHighlighted"),c=(i==null?void 0:i.onDeselected)||C("onDeselected"),d=C(),h=A();!a&&c&&c(s?void 0:o,i,{config:d,state:h}),v&&v(r?void 0:e,t,{config:d,state:h});const p=!a&&u;let $=!1;Oo(),X("previousStep",i),X("previousElement",o),X("activeStep",t),X("activeElement",e);const _=()=>{if(A("__transitionCallback")!==_)return;const f=Date.now()-n,y=400-f<=400/2;t.popover&&y&&!$&&p&&(qe(e,t),$=!0),C("animate")&&f<400?To(f,400,o,e):(Sn(e),l&&l(r?void 0:e,t,{config:C(),state:A()}),X("__transitionCallback",void 0),X("__previousStep",i),X("__previousElement",o),X("__activeStep",t),X("__activeElement",e)),window.requestAnimationFrame(_)};X("__transitionCallback",_),window.requestAnimationFrame(_),kn(e),!p&&t.popover&&qe(e,t),o.classList.remove("driver-active-element","driver-no-interaction"),o.removeAttribute("aria-haspopup"),o.removeAttribute("aria-expanded"),o.removeAttribute("aria-controls"),C("disableActiveInteraction")&&e.classList.add("driver-no-interaction"),e.classList.add("driver-active-element"),e.setAttribute("aria-haspopup","dialog"),e.setAttribute("aria-expanded","true"),e.setAttribute("aria-controls","driver-popover-content")}function zo(){var e;(e=document.getElementById("driver-dummy-element"))==null||e.remove(),document.querySelectorAll(".driver-active-element").forEach(t=>{t.classList.remove("driver-active-element","driver-no-interaction"),t.removeAttribute("aria-haspopup"),t.removeAttribute("aria-expanded"),t.removeAttribute("aria-controls")})}function Gt(){const e=A("__resizeTimeout");e&&window.cancelAnimationFrame(e),X("__resizeTimeout",window.requestAnimationFrame(Do))}function Po(e){var t;if(!A("isInitialized")||!(e.key==="Tab"||e.keyCode===9))return;const n=A("__activeElement"),i=(t=A("popover"))==null?void 0:t.wrapper,o=xn([...i?[i]:[],...n?[n]:[]]),a=o[0],r=o[o.length-1];if(e.preventDefault(),e.shiftKey){const s=o[o.indexOf(document.activeElement)-1]||r;s==null||s.focus()}else{const s=o[o.indexOf(document.activeElement)+1]||a;s==null||s.focus()}}function Nn(e){var t;((t=C("allowKeyboardControl"))==null||t)&&(e.key==="Escape"?Et("escapePress"):e.key==="ArrowRight"?Et("arrowRightPress"):e.key==="ArrowLeft"&&Et("arrowLeftPress"))}function En(e,t,n){const i=(o,a)=>{const r=o.target;e.contains(r)&&((!n||n(r))&&(o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation()),a==null||a(o))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",o=>{i(o,t)},!0)}function Bo(){window.addEventListener("keyup",Nn,!1),window.addEventListener("keydown",Po,!1),window.addEventListener("resize",Gt),window.addEventListener("scroll",Gt)}function Ro(){window.removeEventListener("keyup",Nn),window.removeEventListener("resize",Gt),window.removeEventListener("scroll",Gt)}function Oo(){const e=A("popover");e&&(e.wrapper.style.display="none")}function qe(e,t){var n,i;let o=A("popover");o&&document.body.removeChild(o.wrapper),o=Wo(),document.body.appendChild(o.wrapper);const{title:a,description:r,showButtons:s,disableButtons:u,showProgress:v,nextBtnText:l=C("nextBtnText")||"Next &rarr;",prevBtnText:c=C("prevBtnText")||"&larr; Previous",progressText:d=C("progressText")||"{current} of {total}"}=t.popover||{};o.nextButton.innerHTML=l,o.previousButton.innerHTML=c,o.progress.innerHTML=d,a?(o.title.innerHTML=a,o.title.style.display="block"):o.title.style.display="none",r?(o.description.innerHTML=r,o.description.style.display="block"):o.description.style.display="none";const h=s||C("showButtons"),p=v||C("showProgress")||!1,$=(h==null?void 0:h.includes("next"))||(h==null?void 0:h.includes("previous"))||p;o.closeButton.style.display=h.includes("close")?"block":"none",$?(o.footer.style.display="flex",o.progress.style.display=p?"block":"none",o.nextButton.style.display=h.includes("next")?"block":"none",o.previousButton.style.display=h.includes("previous")?"block":"none"):o.footer.style.display="none";const _=u||C("disableButtons")||[];_!=null&&_.includes("next")&&(o.nextButton.disabled=!0,o.nextButton.classList.add("driver-popover-btn-disabled")),_!=null&&_.includes("previous")&&(o.previousButton.disabled=!0,o.previousButton.classList.add("driver-popover-btn-disabled")),_!=null&&_.includes("close")&&(o.closeButton.disabled=!0,o.closeButton.classList.add("driver-popover-btn-disabled"));const f=o.wrapper;f.style.display="block",f.style.left="",f.style.top="",f.style.bottom="",f.style.right="",f.id="driver-popover-content",f.setAttribute("role","dialog"),f.setAttribute("aria-labelledby","driver-popover-title"),f.setAttribute("aria-describedby","driver-popover-description");const y=o.arrow;y.className="driver-popover-arrow";const T=((n=t.popover)==null?void 0:n.popoverClass)||C("popoverClass")||"";f.className=`driver-popover ${T}`.trim(),En(o.wrapper,I=>{var x,M,L;const z=I.target,P=((x=t.popover)==null?void 0:x.onNextClick)||C("onNextClick"),O=((M=t.popover)==null?void 0:M.onPrevClick)||C("onPrevClick"),B=((L=t.popover)==null?void 0:L.onCloseClick)||C("onCloseClick");if(z.classList.contains("driver-popover-next-btn"))return P?P(e,t,{config:C(),state:A()}):Et("nextClick");if(z.classList.contains("driver-popover-prev-btn"))return O?O(e,t,{config:C(),state:A()}):Et("prevClick");if(z.classList.contains("driver-popover-close-btn"))return B?B(e,t,{config:C(),state:A()}):Et("closeClick")},I=>!(o!=null&&o.description.contains(I))&&!(o!=null&&o.title.contains(I))&&typeof I.className=="string"&&I.className.includes("driver-popover")),X("popover",o);const b=((i=t.popover)==null?void 0:i.onPopoverRender)||C("onPopoverRender");b&&b(o,{config:C(),state:A()}),Ln(e,t),kn(f);const m=e.classList.contains("driver-dummy-element"),S=xn([f,...m?[]:[e]]);S.length>0&&S[0].focus()}function An(){const e=A("popover");if(!(e!=null&&e.wrapper))return;const t=e.wrapper.getBoundingClientRect(),n=C("stagePadding")||0,i=C("popoverOffset")||0;return{width:t.width+n+i,height:t.height+n+i,realWidth:t.width,realHeight:t.height}}function Ve(e,t){const{elementDimensions:n,popoverDimensions:i,popoverPadding:o,popoverArrowDimensions:a}=t;return e==="start"?Math.max(Math.min(n.top-o,window.innerHeight-i.realHeight-a.width),a.width):e==="end"?Math.max(Math.min(n.top-(i==null?void 0:i.realHeight)+n.height+o,window.innerHeight-(i==null?void 0:i.realHeight)-a.width),a.width):e==="center"?Math.max(Math.min(n.top+n.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-a.width),a.width):0}function je(e,t){const{elementDimensions:n,popoverDimensions:i,popoverPadding:o,popoverArrowDimensions:a}=t;return e==="start"?Math.max(Math.min(n.left-o,window.innerWidth-i.realWidth-a.width),a.width):e==="end"?Math.max(Math.min(n.left-(i==null?void 0:i.realWidth)+n.width+o,window.innerWidth-(i==null?void 0:i.realWidth)-a.width),a.width):e==="center"?Math.max(Math.min(n.left+n.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-a.width),a.width):0}function Ln(e,t){const n=A("popover");if(!n)return;const{align:i="start",side:o="left"}=(t==null?void 0:t.popover)||{},a=i,r=e.id==="driver-dummy-element"?"over":o,s=C("stagePadding")||0,u=An(),v=n.arrow.getBoundingClientRect(),l=e.getBoundingClientRect(),c=l.top-u.height;let d=c>=0;const h=window.innerHeight-(l.bottom+u.height);let p=h>=0;const $=l.left-u.width;let _=$>=0;const f=window.innerWidth-(l.right+u.width);let y=f>=0;const T=!d&&!p&&!_&&!y;let b=r;if(r==="top"&&d?y=_=p=!1:r==="bottom"&&p?y=_=d=!1:r==="left"&&_?y=d=p=!1:r==="right"&&y&&(_=d=p=!1),r==="over"){const m=window.innerWidth/2-u.realWidth/2,S=window.innerHeight/2-u.realHeight/2;n.wrapper.style.left=`${m}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${S}px`,n.wrapper.style.bottom="auto"}else if(T){const m=window.innerWidth/2-(u==null?void 0:u.realWidth)/2,S=10;n.wrapper.style.left=`${m}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${S}px`,n.wrapper.style.top="auto"}else if(_){const m=Math.min($,window.innerWidth-(u==null?void 0:u.realWidth)-v.width),S=Ve(a,{elementDimensions:l,popoverDimensions:u,popoverPadding:s,popoverArrowDimensions:v});n.wrapper.style.left=`${m}px`,n.wrapper.style.top=`${S}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",b="left"}else if(y){const m=Math.min(f,window.innerWidth-(u==null?void 0:u.realWidth)-v.width),S=Ve(a,{elementDimensions:l,popoverDimensions:u,popoverPadding:s,popoverArrowDimensions:v});n.wrapper.style.right=`${m}px`,n.wrapper.style.top=`${S}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",b="right"}else if(d){const m=Math.min(c,window.innerHeight-u.realHeight-v.width);let S=je(a,{elementDimensions:l,popoverDimensions:u,popoverPadding:s,popoverArrowDimensions:v});n.wrapper.style.top=`${m}px`,n.wrapper.style.left=`${S}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",b="top"}else if(p){const m=Math.min(h,window.innerHeight-(u==null?void 0:u.realHeight)-v.width);let S=je(a,{elementDimensions:l,popoverDimensions:u,popoverPadding:s,popoverArrowDimensions:v});n.wrapper.style.left=`${S}px`,n.wrapper.style.bottom=`${m}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",b="bottom"}T?n.arrow.classList.add("driver-popover-arrow-none"):Ho(a,b,e)}function Ho(e,t,n){const i=A("popover");if(!i)return;const o=n.getBoundingClientRect(),a=An(),r=i.arrow,s=a.width,u=window.innerWidth,v=o.width,l=o.left,c=a.height,d=window.innerHeight,h=o.top,p=o.height;r.className="driver-popover-arrow";let $=t,_=e;t==="top"?(l+v<=0?($="right",_="end"):l+v-s<=0&&($="top",_="start"),l>=u?($="left",_="end"):l+s>=u&&($="top",_="end")):t==="bottom"?(l+v<=0?($="right",_="start"):l+v-s<=0&&($="bottom",_="start"),l>=u?($="left",_="start"):l+s>=u&&($="bottom",_="end")):t==="left"?(h+p<=0?($="bottom",_="end"):h+p-c<=0&&($="left",_="start"),h>=d?($="top",_="end"):h+c>=d&&($="left",_="end")):t==="right"&&(h+p<=0?($="bottom",_="start"):h+p-c<=0&&($="right",_="start"),h>=d?($="top",_="start"):h+c>=d&&($="right",_="end")),$?(r.classList.add(`driver-popover-arrow-side-${$}`),r.classList.add(`driver-popover-arrow-align-${_}`)):r.classList.add("driver-popover-arrow-none")}function Wo(){const e=document.createElement("div");e.classList.add("driver-popover");const t=document.createElement("div");t.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const o=document.createElement("button");o.type="button",o.classList.add("driver-popover-close-btn"),o.setAttribute("aria-label","Close"),o.innerHTML="&times;";const a=document.createElement("footer");a.classList.add("driver-popover-footer");const r=document.createElement("span");r.classList.add("driver-popover-progress-text"),r.innerText="";const s=document.createElement("span");s.classList.add("driver-popover-navigation-btns");const u=document.createElement("button");u.type="button",u.classList.add("driver-popover-prev-btn"),u.innerHTML="&larr; Previous";const v=document.createElement("button");return v.type="button",v.classList.add("driver-popover-next-btn"),v.innerHTML="Next &rarr;",s.appendChild(u),s.appendChild(v),a.appendChild(r),a.appendChild(s),e.appendChild(o),e.appendChild(t),e.appendChild(n),e.appendChild(i),e.appendChild(a),{wrapper:e,arrow:t,title:n,description:i,footer:a,previousButton:u,nextButton:v,closeButton:o,footerButtons:s,progress:r}}function Fo(){var e;const t=A("popover");t&&((e=t.wrapper.parentElement)==null||e.removeChild(t.wrapper))}function Uo(e={}){de(e);function t(){C("allowClose")&&v()}function n(){const l=A("activeIndex"),c=C("steps")||[];if(typeof l>"u")return;const d=l+1;c[d]?u(d):v()}function i(){const l=A("activeIndex"),c=C("steps")||[];if(typeof l>"u")return;const d=l-1;c[d]?u(d):v()}function o(l){(C("steps")||[])[l]?u(l):v()}function a(){var l;if(A("__transitionCallback"))return;const c=A("activeIndex"),d=A("__activeStep"),h=A("__activeElement");if(typeof c>"u"||typeof d>"u"||typeof A("activeIndex")>"u")return;const p=((l=d.popover)==null?void 0:l.onPrevClick)||C("onPrevClick");if(p)return p(h,d,{config:C(),state:A()});i()}function r(){var l;if(A("__transitionCallback"))return;const c=A("activeIndex"),d=A("__activeStep"),h=A("__activeElement");if(typeof c>"u"||typeof d>"u")return;const p=((l=d.popover)==null?void 0:l.onNextClick)||C("onNextClick");if(p)return p(h,d,{config:C(),state:A()});n()}function s(){A("isInitialized")||(X("isInitialized",!0),document.body.classList.add("driver-active",C("animate")?"driver-fade":"driver-simple"),Bo(),Zt("overlayClick",t),Zt("escapePress",t),Zt("arrowLeftPress",a),Zt("arrowRightPress",r))}function u(l=0){var c,d,h,p,$,_,f,y;const T=C("steps");if(!T){console.error("No steps to drive through"),v();return}if(!T[l]){v();return}X("__activeOnDestroyed",document.activeElement),X("activeIndex",l);const b=T[l],m=T[l+1],S=T[l-1],I=((c=b.popover)==null?void 0:c.doneBtnText)||C("doneBtnText")||"Done",x=C("allowClose"),M=typeof((d=b.popover)==null?void 0:d.showProgress)<"u"?(h=b.popover)==null?void 0:h.showProgress:C("showProgress"),L=(((p=b.popover)==null?void 0:p.progressText)||C("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${l+1}`).replace("{{total}}",`${T.length}`),z=(($=b.popover)==null?void 0:$.showButtons)||C("showButtons"),P=["next","previous",...x?["close"]:[]].filter(R=>!(z!=null&&z.length)||z.includes(R)),O=((_=b.popover)==null?void 0:_.onNextClick)||C("onNextClick"),B=((f=b.popover)==null?void 0:f.onPrevClick)||C("onPrevClick"),J=((y=b.popover)==null?void 0:y.onCloseClick)||C("onCloseClick");Je({...b,popover:{showButtons:P,nextBtnText:m?void 0:I,disableButtons:[...S?[]:["previous"]],showProgress:M,progressText:L,onNextClick:O||(()=>{m?u(l+1):v()}),onPrevClick:B||(()=>{u(l-1)}),onCloseClick:J||(()=>{v()}),...(b==null?void 0:b.popover)||{}}})}function v(l=!0){const c=A("__activeElement"),d=A("__activeStep"),h=A("__activeOnDestroyed"),p=C("onDestroyStarted");if(l&&p){const f=!c||(c==null?void 0:c.id)==="driver-dummy-element";p(f?void 0:c,d,{config:C(),state:A()});return}const $=(d==null?void 0:d.onDeselected)||C("onDeselected"),_=C("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),Ro(),Fo(),zo(),Lo(),Co(),Ke(),c&&d){const f=c.id==="driver-dummy-element";$&&$(f?void 0:c,d,{config:C(),state:A()}),_&&_(f?void 0:c,d,{config:C(),state:A()})}h&&h.focus()}return{isActive:()=>A("isInitialized")||!1,refresh:Gt,drive:(l=0)=>{s(),u(l)},setConfig:de,setSteps:l=>{Ke(),de({...C(),steps:l})},getConfig:C,getState:A,getActiveIndex:()=>A("activeIndex"),isFirstStep:()=>A("activeIndex")===0,isLastStep:()=>{const l=C("steps")||[],c=A("activeIndex");return c!==void 0&&c===l.length-1},getActiveStep:()=>A("activeStep"),getActiveElement:()=>A("activeElement"),getPreviousElement:()=>A("previousElement"),getPreviousStep:()=>A("previousStep"),moveNext:n,movePrevious:i,moveTo:o,hasNextStep:()=>{const l=C("steps")||[],c=A("activeIndex");return c!==void 0&&l[c+1]},hasPreviousStep:()=>{const l=C("steps")||[],c=A("activeIndex");return c!==void 0&&l[c-1]},highlight:l=>{s(),Je({...l,popover:l.popover?{showButtons:[],showProgress:!1,progressText:"",...l.popover}:void 0})},destroy:()=>{v(!1)}}}var Xt=zi(()=>W),Go=(e,t)=>t(),Ko=H('<button class="btn btn-ghost"><!></button>');function Jo(e,t){dt(t,!1);const n=mt(),i=()=>pt(ht,"$_",n),o=c=>{let d=c==null?void 0:c.closest(".dropdown");d==null||d.classList.add("dropdown-open")},a=c=>{let d=c==null?void 0:c.closest(".dropdown");d==null||d.classList.remove("dropdown-open")},r=()=>{let c=document.getElementById("tickSelectionModal");c==null||c.classList.add("modal-open")},s=()=>{let c=document.getElementById("tickSelectionModal");c==null||c.classList.remove("modal-open")},u=()=>{Uo({showProgress:!0,nextBtnText:i()("tour_btn_next"),prevBtnText:i()("tour_btn_prev"),doneBtnText:i()("tout_btn_done"),progressText:i()("tour_progress_text"),steps:[{element:"#sceneTitle",popover:{title:i()("scene_title"),description:i()("scene_title_description")}},{element:"#combatantsTable",popover:{title:i()("combatants_list"),description:i()("combatants_list_description")}},{element:".change-scene-mode",popover:{title:i()("edit_scene"),description:i()("edit_scene_description")}},{element:".change-scene-mode",popover:{title:i()("run_scene"),description:i()("run_scene_description")}},{element:"#tickSelectionModalInner",popover:{title:i()("tour.tick_selection_modal.overview.title"),description:i()("tour.tick_selection_modal.overview.content")},onHighlightStarted:()=>{r(),Xt(Xt().ticks=[{number:1,hasCombatants:!1,mode:"relative"},{number:2,hasCombatants:!0,mode:"relative"},{number:-3,hasCombatants:!1,mode:"relative"},{number:42,hasCombatants:!1,mode:"absolute"}])},onDeselected:()=>{Xt(Xt().ticks=[]),s()}},{element:"#downloadBtn",popover:{title:i()("download_scene"),description:i()("download_scene_description")},onHighlightStarted:d=>{o(d)},onDeselected:d=>{a(d)}},{element:"#uploadButton",popover:{title:i()("upload_scene"),description:i()("upload_scene_description")},onHighlightStarted:d=>{o(d)},onDeselected:d=>{a(d)}},{element:"#ThemeToggle",popover:{title:i()("tour.change_theme.title"),description:i()("tour.change_theme.content")}},{element:"#ToggleLanguageBtn",popover:{title:i()("tour.change_langauge.title"),description:i()("tour.change_langauge.content")}}]}).drive()};Kt();var v=Ko();v.__click=[Go,u],E(()=>K(v,"aria-label",i()("start_tour")));var l=w(v);co(l,{"aria-hidden":!0}),g(v),N(e,v),ut()}_t(["click"]);function qo(e){e&&e.addEventListener("toggle",()=>{e.open?Vo(e):jo(e)})}function Mn(e){return function(t){const n=t.target;n&&!e.contains(n)&&(e.open=!1)}}function Dn(e){return function(t){t.key==="Escape"&&(e.open=!1)}}function In(e){return function(t){if(t.key!=="Tab"||!window.document.activeElement)return;const n=e.querySelectorAll("summary, li"),i=Array.from(n).indexOf(window.document.activeElement);(t.shiftKey&&i===0||!t.shiftKey&&i===-1)&&(e.open=!1)}}function Vo(e){window.addEventListener("click",Mn(e)),window.addEventListener("keydown",Dn(e)),window.addEventListener("keydown",In(e))}function jo(e){window.removeEventListener("click",Mn(e)),window.removeEventListener("keydown",Dn(e)),window.removeEventListener("keydown",In(e))}var Yo=(e,t)=>t(),Zo=H('<div class="navbar fixed top-0 z-[1] border-b-4 border-primary-content bg-primary-content/20 backdrop-blur-xl"><div class="flex-1"><img class="max-h-12 md:max-h-16" alt="splittermond logo"></div> <div class="flex-none space-x-2"><!> <!> <details class="dropdown dropdown-end" name="menu"><summary class="btn btn-ghost"><!></summary> <ul class="menu dropdown-content z-[10] w-[350px] rounded-box bg-primary-content p-2 text-primary shadow"><li><label id="uploadButton" for="battleScene" class="text-xl"><!> <span> </span></label> <input type="file" id="battleScene" name="battleScene" accept="application/json" class="battle-scene-file-input file-input w-full max-w-xs svelte-ekzg43"></li> <li><button id="downloadBtn"><!> <span class="text-xl"> </span></button></li></ul></details></div></div>');function Xo(e,t){dt(t,!1);const n=mt(),i=()=>pt(ht,"$_",n);let o=Rt();const a=P=>{const O=P.target;if(O&&O.files){const B=O.files[0];B&&io(B).then(J=>{mn(J)}),O.value=""}},r=()=>{const P=qi();let O=P.name.toLowerCase().trim().replace(/\s+/g,"_");oo(P,O)};zt(()=>{qo(k(o))}),Kt();var s=Zo(),u=w(s),v=w(u);K(v,"src",`${_e??""}/logo.png`),g(u);var l=D(u,2),c=w(l);$o(c,{});var d=D(c,2);Jo(d,{});var h=D(d,2),p=w(h);E(()=>K(p,"aria-label",i()("open_menu")));var $=w(p);uo($,{"aria-hidden":!0}),g(p);var _=D(p,2),f=w(_),y=w(f),T=w(y);bo(T,{"aria-hidden":!0});var b=D(T,2),m=w(b,!0);E(()=>U(m,i()("upload_scene"))),g(b),g(y);var S=D(y,2);S.__change=a,g(f);var I=D(f,2),x=w(I);x.__click=[Yo,r];var M=w(x);lo(M,{"aria-hidden":!0});var L=D(M,2),z=w(L,!0);E(()=>U(z,i()("download_scene"))),g(L),g(x),g(I),g(_),g(h),yt(h,P=>Q(o,P),()=>k(o)),g(l),g(s),N(e,s),ut()}_t(["change","click"]);const Qo=e=>e;function ta(e){const t=e-1;return t*t*t+1}function ue(e,{delay:t=0,duration:n=400,easing:i=Qo}={}){const o=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:a=>`opacity: ${a*o}`}}function zn(e,{delay:t=0,duration:n=400,easing:i=ta,axis:o="y"}={}){const a=getComputedStyle(e),r=+a.opacity,s=o==="y"?"height":"width",u=parseFloat(a[s]),v=o==="y"?["top","bottom"]:["left","right"],l=v.map(f=>`${f[0].toUpperCase()}${f.slice(1)}`),c=parseFloat(a[`padding${l[0]}`]),d=parseFloat(a[`padding${l[1]}`]),h=parseFloat(a[`margin${l[0]}`]),p=parseFloat(a[`margin${l[1]}`]),$=parseFloat(a[`border${l[0]}Width`]),_=parseFloat(a[`border${l[1]}Width`]);return{delay:t,duration:n,easing:i,css:f=>`overflow: hidden;opacity: ${Math.min(f*20,1)*r};${s}: ${f*u}px;padding-${v[0]}: ${f*c}px;padding-${v[1]}: ${f*d}px;margin-${v[0]}: ${f*h}px;margin-${v[1]}: ${f*p}px;border-${v[0]}-width: ${f*$}px;border-${v[1]}-width: ${f*_}px;`}}function ea(e){const t=e-1;return t*t*t+1}function na(e,{from:t,to:n},i={}){var o=getComputedStyle(e),a=ia(e),r=o.transform==="none"?"":o.transform,[s,u]=o.transformOrigin.split(" ").map(parseFloat),v=t.width/n.width,l=t.height/n.height,c=(t.left+v*s-(n.left+s))/a,d=(t.top+l*u-(n.top+u))/a,{delay:h=0,duration:p=_=>Math.sqrt(_)*120,easing:$=ea}=i;return{delay:h,duration:typeof p=="function"?p(Math.sqrt(c*c+d*d)):p,easing:$,css:(_,f)=>{var y=f*c,T=f*d,b=_+f*v,m=_+f*l;return`transform: ${r} scale(${b}, ${m}) translate(${y}px, ${T}px);`}}}function ia(e){if("currentCSSZoom"in e)return e.currentCSSZoom;for(var t=e,n=1;t!==null;)n*=+getComputedStyle(t).zoom,t=t.parentElement;return n}var oa=(e,t,n)=>t(k(n)),aa=H('<span class="sr-only"> </span> <!>',1),ra=H('<span class="sr-only"> </span> ',1),sa=H('<span class="absolute bottom-0 right-0"><!></span>'),ca=H('<button class="tick-selection btn relative aspect-square h-full w-full min-[320px]:text-2xl sm:text-3xl svelte-1ymw8c6"><!> <!></button>'),la=(e,t)=>t(),da=H('<div class="tooltip aspect-square h-full w-full"><button class="btn h-full w-full"><!></button></div>'),ua=(e,t)=>t(),va=H('<div class="tooltip aspect-square h-full w-full"><button class="btn btn-outline btn-info aspect-square h-full w-full"><!></button></div>'),pa=(e,t)=>t(),fa=H('<div class="tooltip aspect-square h-full w-full"><button class="btn btn-outline btn-info aspect-square h-full w-full"><!></button></div>'),_a=(e,t)=>t(),ma=H('<div class="tooltip aspect-square h-full w-full"><button class="btn btn-outline btn-error aspect-square h-full w-full"><!></button></div>'),ha=H('<div class="grid grid-cols-4 gap-1 md:grid-cols-5"></div> <div class="mt-1 grid grid-cols-4 gap-1 md:grid-cols-5"><div><!></div> <div class="hidden md:block"></div> <div><!></div> <div><!></div> <div><!></div></div>',1);function ba(e,t){dt(t,!0);const n=mt(),i=()=>pt(ht,"$_",n);let o=It(!1),a=It(0);function r(){Q(a,0),Q(o,!1),W.ticks=s()}function s(){const x=W.activeCombatant;return x?x.combatState==="Active"?eo(k(o),x.initiative,F.combatants):to():[]}function u(x){t.notifyDone(),W.activeCombatant&&(x.mode==="relative"?Vi(W.activeCombatant.id,x.number):ji(W.activeCombatant.id,x.number),jt())}function v(){Q(a,200),Q(o,!k(o)),W.ticks=s()}function l(){t.notifyDone(),W.activeCombatant&&(Zi(W.activeCombatant.id),jt())}function c(){t.notifyDone(),W.activeCombatant&&(Yi(W.activeCombatant.id),jt())}function d(){t.notifyDone(),W.activeCombatant&&(Xi(W.activeCombatant.id),jt())}var h=ha(),p=G(h);Jt(p,21,()=>W.ticks,re,(x,M)=>{var L=ca();L.__click=[oa,u,M];var z=w(L);V(z,()=>k(M).mode==="relative",O=>{var B=aa(),J=G(B),R=w(J,!0);E(()=>U(R,i()("tick_move"))),g(J);var ot=D(J,2);V(ot,()=>k(M).number>0,ct=>{var at=pe();E(()=>U(at,`+${k(M).number??""}`)),N(ct,at)},ct=>{var at=pe();E(()=>U(at,k(M).number)),N(ct,at)}),N(O,B)},O=>{var B=ra(),J=G(B),R=w(J,!0);E(()=>U(R,i()("tick_join"))),g(J);var ot=D(J);E(()=>U(ot,` ${k(M).number??""}`)),N(O,B)});var P=D(z,2);V(P,()=>k(M).hasCombatants,O=>{var B=sa(),J=w(B);go(J,{class:"size-4 text-accent sm:size-6","aria-hidden":!0}),g(B),Wt(3,B,()=>zn,()=>({duration:k(a)})),N(O,B)}),g(L),N(x,L)}),g(p);var $=D(p,2),_=w($),f=w(_);V(f,()=>{var x;return W.activeCombatant===null||((x=W.activeCombatant)==null?void 0:x.combatState)==="Active"},x=>{var M=da();E(()=>K(M,"data-tip",i()("tickselection.tooltip.tick_direction",{values:{n:Number(k(o))}})));var L=w(M);L.__click=[la,v],E(()=>K(L,"aria-label",i()("tickselection.tooltip.tick_direction",{values:{n:Number(k(o))}})));var z=w(L);V(z,()=>k(o),P=>{wn(P,{size:48,"aria-hidden":!0})},P=>{vo(P,{size:48,"aria-hidden":!0})}),g(L),g(M),E(()=>ft(L,"btn-active",k(o))),N(x,M)}),g(_);var y=D(_,4),T=w(y);V(T,()=>{var x;return((x=W.activeCombatant)==null?void 0:x.combatState)!=="Expecting"},x=>{var M=va();E(()=>K(M,"data-tip",i()("tickselection.tooltip.set_state_expecting")));var L=w(M);L.__click=[ua,l],E(()=>K(L,"aria-label",i()("tickselection.tooltip.set_state_expecting")));var z=w(L);bn(z,{size:48,strokeWidth:1,"aria-hidden":!0}),g(L),g(M),N(x,M)}),g(y);var b=D(y,2),m=w(b);V(m,()=>{var x;return((x=W.activeCombatant)==null?void 0:x.combatState)!=="Waiting"},x=>{var M=fa();E(()=>K(M,"data-tip",i()("tickselection.tooltip.set_state_waiting")));var L=w(M);L.__click=[pa,c],E(()=>K(L,"aria-label",i()("tickselection.tooltip.set_state_waiting")));var z=w(L);gn(z,{size:48,strokeWidth:1,"aria-hidden":!0}),g(L),g(M),N(x,M)}),g(b);var S=D(b,2),I=w(S);return V(I,()=>{var x;return((x=W.activeCombatant)==null?void 0:x.combatState)!=="Dead"},x=>{var M=ma();E(()=>K(M,"data-tip",i()("tickselection.tooltip.set_state_dead")));var L=w(M);L.__click=[_a,d],E(()=>K(L,"aria-label",i()("tickselection.tooltip.set_state_dead")));var z=w(L);yn(z,{size:48,strokeWidth:1,"aria-hidden":!0}),g(L),g(M),N(x,M)}),g(S),g($),N(e,h),ut({resetModal:r})}_t(["click"]);var ga=(e,t,n)=>t(k(n).id),wa=H('<button class="btn md:text-xl"><span class="text-nowrap"> <!></span></button>'),ya=H('<div class="grid grid-cols-2 gap-4"></div>');function $a(e,t){dt(t,!1);const n=mt(),i=()=>pt(ht,"$_",n);function o(v){if(!W.activeCombatant){console.warn("No active combatant. Cannot toggle condition type "+v);return}no(W.activeCombatant.id,v)}function a(v){if(W.activeCombatant)return W.activeCombatant.conditionStates.some(l=>l.id===v)}function r(v){if(!W.activeCombatant)return 0;const l=W.activeCombatant.conditionStates.find(c=>c.id===v);return l?Math.abs(W.activeCombatant.initiative-l.activeSinceTick):0}function s(){const v=_n;return v.sort((l,c)=>i()(l.i18n)>i()(c.i18n)?1:-1),v}Kt();var u=ya();Jt(u,5,s,re,(v,l)=>{var c=wa();c.__click=[ga,o,l];const d=Ae(()=>!a(k(l).id));E(()=>ft(c,"btn-outline",k(d)));const h=Ae(()=>a(k(l).id));E(()=>ft(c,"btn-error",k(h)));var p=w(c),$=w(p);E(()=>U($,`${i()(k(l).i18n)??""} `));var _=D($);V(_,()=>a(k(l).id),f=>{var y=pe();E(()=>U(y,`(${r(k(l).id)??""})`)),N(f,y)}),g(p),g(c),N(v,c)}),g(u),N(e,u),ut()}_t(["click"]);class xa{constructor(t){Lt(this,"tablistNode");Lt(this,"tabs");Lt(this,"tabpanels");Lt(this,"firstTab");Lt(this,"lastTab");this.tablistNode=t,this.tabs=[],this.tabpanels=[],this.firstTab=null,this.lastTab=null,this.tabs=Array.from(this.tablistNode.querySelectorAll("[role=tab]"));for(let n=0;n<this.tabs.length;n+=1){const i=this.tabs[n],o=document.getElementById(i.getAttribute("aria-controls"));o?(i.tabIndex=-1,i.setAttribute("aria-selected","false"),this.tabpanels.push(o),i.addEventListener("keydown",this.onKeydown.bind(this)),i.addEventListener("click",this.onClick.bind(this)),this.firstTab||(this.firstTab=i),this.lastTab=i):console.error(`Tabpanel with id "${i.getAttribute("aria-controls")}" not found.`)}this.firstTab&&this.setSelectedTab(this.firstTab,!1)}setSelectedTab(t,n=!0){for(let i=0;i<this.tabs.length;i+=1){const o=this.tabs[i],a=this.tabpanels[i];t===o?(o.setAttribute("aria-selected","true"),o.removeAttribute("tabindex"),a.classList.remove("hidden"),n&&o.focus()):(o.setAttribute("aria-selected","false"),o.tabIndex=-1,a.classList.add("hidden"))}}setSelectedToPreviousTab(t){if(t===this.firstTab)this.lastTab&&this.setSelectedTab(this.lastTab);else{const n=this.tabs.indexOf(t);n>0&&this.setSelectedTab(this.tabs[n-1])}}setSelectedToNextTab(t){if(t===this.lastTab)this.firstTab&&this.setSelectedTab(this.firstTab);else{const n=this.tabs.indexOf(t);n<this.tabs.length-1&&this.setSelectedTab(this.tabs[n+1])}}onKeydown(t){const n=t.currentTarget;let i=!1;switch(t.key){case"ArrowLeft":this.setSelectedToPreviousTab(n),i=!0;break;case"ArrowRight":this.setSelectedToNextTab(n),i=!0;break;case"Home":this.firstTab&&this.setSelectedTab(this.firstTab),i=!0;break;case"End":this.lastTab&&this.setSelectedTab(this.lastTab),i=!0;break}i&&(t.stopPropagation(),t.preventDefault())}onClick(t){this.setSelectedTab(t.currentTarget)}}function ka(){window.addEventListener("load",function(){const e=document.querySelectorAll("[role=tablist]");for(let t=0;t<e.length;t++)new xa(e[t])})}function Sa(e){throw new Error(`Unhandled case: ${JSON.stringify(e)}`)}var Ca=H('<dialog id="tickSelectionModal" class="modal"><div id="tickSelectionModalInner" class="max-w-l modal-box min-h-[50%] w-11/12 border-4 border-accent p-0"><h3 id="tablist-for-combatant" class="sr-only"> </h3> <div role="tablist" class="tabs-boxed tabs p-0" aria-labelledby="tablist-for-combatant"><button role="tab" id="tab-tick-selection" class="tab m-2 me-1 h-12 text-2xl" aria-controls="tabpanel-tick-selection" aria-selected="true"> </button> <div class="tab-content border-r-0 border-none bg-base-100 p-6" id="tabpanel-tick-selection" role="tabpanel" tabindex="0" aria-labelledby="tab-tick-selection"><!></div> <button role="tab" id="tab-condition-selection" class="tab m-2 me-1 ms-0 h-12 text-2xl" tabindex="-1" aria-controls="tabpanel-condition-selection" aria-selected="false"> </button> <div class="tab-content border-r-0 border-none bg-base-100 p-6" id="tabpanel-condition-selection" role="tabpanel" tabindex="0" aria-labelledby="tab-condition-selection"><!></div></div> <form method="dialog"><button class="btn btn-circle btn-ghost btn-sm absolute right-4 top-4"><!></button></form></div> <form method="dialog" class="modal-backdrop"><button> </button></form></dialog>');function Ta(e,t){dt(t,!1);const n=mt(),i=()=>pt(ht,"$_",n);let o=Rt(),a=Rt(),r=Rt(),s=Rt();function u(R="actions"){d(R),k(o).showModal(),k(a).resetModal()}function v(){l(),c()}function l(){k(o).close(),c()}function c(){d("actions")}function d(R){switch(R){case"actions":qt(r,k(r).ariaSelected="true"),qt(s,k(s).ariaSelected="false");break;case"conditions":qt(r,k(r).ariaSelected="false"),qt(s,k(s).ariaSelected="true");break;default:Sa(R);break}}zt(()=>{ka()}),Kt();var h=Ca(),p=w(h),$=w(p),_=w($,!0);E(()=>{var R;return U(_,i()("combatant_interaction_modal",{values:{name:(R=W.activeCombatant)==null?void 0:R.name}}))}),g($);var f=D($,2),y=w(f),T=w(y,!0);E(()=>U(T,i()("combatant_modal.actions"))),g(y),yt(y,R=>Q(r,R),()=>k(r));var b=D(y,2),m=w(b);yt(ba(m,{notifyDone:()=>v(),$$legacy:!0}),R=>Q(a,R),()=>k(a)),g(b);var S=D(b,2),I=w(S,!0);E(()=>U(I,i()("combatant_modal.conditions"))),g(S),yt(S,R=>Q(s,R),()=>k(s));var x=D(S,2),M=w(x);$a(M,{}),g(x),g(f);var L=D(f,2),z=w(L);E(()=>K(z,"aria-label",i()("close")));var P=w(z);$n(P,{"aria-hidden":!0,size:24}),g(z),g(L),g(p);var O=D(p,2),B=w(O),J=w(B,!0);return E(()=>U(J,i()("close"))),g(B),g(O),g(h),yt(h,R=>Q(o,R),()=>k(o)),E(()=>{var R,ot;ft(y,"tab-active",((R=k(r))==null?void 0:R.ariaSelected)==="actions"),ft(S,"tab-active",((ot=k(s))==null?void 0:ot.ariaSelected)==="actions")}),N(e,h),Ii(t,"show",u),ut({show:u})}function Pn(e){(e==null?void 0:e.target).select()}var Na=(e,t,n)=>t.combatantClicked(n()),Ea=()=>{},Aa=()=>{},La=(e,t,n,i)=>t(n(),k(i),e),Ma=H('<button class="badge badge-error badge-outline badge-lg mr-1 self-end"><span class="text-nowrap"> </span></button>'),Da=H('<div class="flex flex-row flex-wrap"></div>'),Ia=H('<div class="absolute -left-4 top-2.5"><!> <span class="sr-only"> </span></div>'),za=H('<input type="number">'),Pa=H('<!> <span class="sr-only"> </span>',1),Ba=H('<!> <span class="sr-only"> </span>',1),Ra=H('<!> <span class="sr-only"> </span>',1),Oa=H("<div><!></div>"),Ha=(e,t,n)=>t.deleteCombatant(n().id),Wa=H('<button class="btn btn-outline btn-error"><!></button>'),Fa=H('<div class="min-w-12"></div>'),Ua=H('<div role="button" tabindex="0"><div class="col-span-3 grid grid-cols-subgrid items-center gap-2"><div class="relative"><div class="flex flex-col"><input type="text"> <!></div> <!></div> <div class="self-start"><!></div> <div class="w-16 text-center"><!></div></div></div>');function Ga(e,t){dt(t,!0);const n=mt(),i=()=>pt(ht,"$_",n);let o=Tt(t,"combatant",7),a=se(Ki);function r(b){const m=_n.find(S=>S.id===b);return m?i()(m.i18n):b}function s(b,m){return Math.abs(b.initiative-m.activeSinceTick)}function u(b,m,S){S.stopPropagation(),t.conditionClicked(b,m)}var v=Ua();v.__click=[Na,t,o],v.__keydown=[Ea],v.__keyup=[Aa];var l=w(v),c=w(l),d=w(c),h=w(d);Ht(h),E(()=>K(h,"aria-label",i()("combatant_name")));var p=D(h,2);V(p,()=>t.appMode==="RUNNING",b=>{var m=Da();Jt(m,21,()=>o().conditionStates,re,(S,I)=>{var x=Ma();x.__click=[La,u,o,I];var M=w(x);const L=se(()=>r(k(I).id)??""),z=se(()=>s(o(),k(I))??"");var P=w(M);E(()=>U(P,`${k(L)} (${k(z)})`)),g(M),g(x),N(S,x)}),g(m),N(b,m)}),g(d);var $=D(d,2);V($,()=>o()===k(a)&&t.appMode==="RUNNING",b=>{var m=Ia(),S=w(m);so(S,{size:"32"});var I=D(S,2),x=w(I,!0);E(()=>U(x,i()("active_combatant"))),g(I),g(m),Wt(1,m,()=>ue,()=>({duration:200})),N(b,m)}),g(c);var _=D(c,2),f=w(_);V(f,()=>o().combatState==="Active"||t.appMode==="EDITING",b=>{var m=za();Ht(m),E(()=>K(m,"aria-label",i()("combatant_initiative"))),E(()=>{m.disabled=t.appMode==="RUNNING",te(m,`
					${(t.appMode==="EDITING"?"input-bordered":"disabled input-ghost")??""}
					input w-20 px-1 text-center text-3xl
					 svelte-1i6w9it`)}),sn("focus",m,S=>Pn(S)),Ft(m,()=>o().initiative,S=>o().initiative=S),N(b,m)},b=>{var m=Oa(),S=w(m);V(S,()=>o().combatState==="Waiting",I=>{var x=Pa(),M=G(x);gn(M,{class:"w-20 text-center text-info",size:48,strokeWidth:1});var L=D(M,2),z=w(L,!0);E(()=>U(z,i()("combatant_status",{values:{status:i()("tickselection.tooltip.set_state_waiting")}}))),g(L),N(I,x)},I=>{var x=j(),M=G(x);V(M,()=>o().combatState==="Expecting",L=>{var z=Ba(),P=G(z);bn(P,{class:"w-20 text-center text-info",size:48,strokeWidth:1});var O=D(P,2),B=w(O,!0);E(()=>U(B,i()("combatant_status",{values:{status:i()("tickselection.tooltip.set_state_expecting")}}))),g(O),N(L,z)},L=>{var z=j(),P=G(z);V(P,()=>o().combatState==="Dead",O=>{var B=Ra(),J=G(B);yn(J,{class:"w-20 text-center text-error",size:48,strokeWidth:1});var R=D(J,2),ot=w(R,!0);E(()=>U(ot,i()("combatant_status",{values:{status:i()("tickselection.tooltip.set_state_dead")}}))),g(R),N(O,B)},null,!0),N(L,z)},!0),N(I,x)}),g(m),Wt(1,m,()=>ue,()=>({duration:200})),N(b,m)}),g(_);var y=D(_,2),T=w(y);V(T,()=>t.appMode==="EDITING",b=>{var m=Wa();m.__click=[Ha,t,o],E(()=>K(m,"aria-label",i()("delete_combatant",{values:{name:o().name}})));var S=w(m);ho(S,{"aria-hidden":!0}),g(m),Wt(1,m,()=>ue,()=>({duration:200})),N(b,m)},b=>{var m=j(),S=G(m);V(S,()=>t.appMode==="RUNNING",I=>{var x=Fa();N(I,x)},null,!0),N(b,m)}),g(y),g(l),g(v),E(()=>{te(v,`
	    grid w-full grid-cols-[98fr_1fr_1fr] rounded-none p-6 focus:outline-none
		${(t.appMode==="RUNNING"?"cursor-pointer hover:bg-primary-content":"cursor-default")??""}
		${(t.index>=1?"border-t-4 border-primary-content":"")??""}`),h.disabled=t.appMode==="RUNNING",te(h,`
					input
					w-full
					${(t.appMode==="EDITING"?"input-bordered":"disabled input-ghost")??""}
					my-auto
					text-3xl
					 svelte-1i6w9it`)}),Ft(h,()=>o().name,b=>o().name=b),N(e,v),ut()}_t(["click","keydown","keyup"]);function Ye(e,t,n){e.key==="Enter"&&t(k(n))}function Ka(e,t){Q(t,"EDITING")}function Ja(e,t){Q(t,"RUNNING"),Qi(),xt()}var qa=(e,t,n)=>t(k(n)),Va=H(`<div class="col-span-3 grid grid-cols-subgrid items-center gap-2 rounded-b-lg bg-primary-content px-6 pb-4"><div><input type="text" class="input input-bordered w-full text-3xl"></div> <div><input type="number" class="
							input
							input-bordered
							w-20
							px-1
							text-center
							text-3xl svelte-1i6w9it"></div> <div class="w-16 justify-center"><button class="btn btn-primary"><!></button></div></div>`),ja=H('<div class="w-50 card col-span-3 mt-8 bg-base-100"><div class="card-body text-center"><h2 class="card-title justify-center"> </h2> <p class="mt-6"> <kbd class="kbd kbd-sm bg-primary text-base-100">+</kbd> </p></div></div>'),Ya=H("<div><!></div>"),Za=H(`<!> <div class="
		m-auto
		mt-16
		h-full
		w-full
		px-2
		py-4
		md:mt-20
		md:w-11/12
		lg:w-10/12
		xl:w-10/12
		2xl:w-[1200px]"><div class="navbar bg-base-100 px-0"><div id="sceneTitle" class="flex-1"><input type="text"></div> <div class="change-scene-mode flex-none space-x-2"><button id="runSceneBtn" class="btn btn-primary text-xl"><!> <span class="sr-only lg:not-sr-only lg:flex"> </span></button> <button id="editSceneBtn" class="btn btn-primary text-xl"><!> <span class="sr-only lg:not-sr-only lg:flex"> </span></button></div></div> <div id="combatantsTable" class="mt-4 grid w-full grid-cols-[99fr_1fr_1fr]"><div class="col-span-3 grid grid-cols-subgrid items-center gap-2 bg-primary-content px-6 py-2 text-xl font-bold"><div> </div> <div id="initiativeColumn"> </div> <div class="w-16"></div></div> <!>  <!></div> <!></div>`,1);function Xa(e,t){dt(t,!0);const n=mt(),i=()=>pt(ht,"$_",n),o="RUNNING";let a=It(lt(Ue())),r=It(o),s,u;function v(Y){Y.name!==""&&(F.combatants.push(Y),Q(a,lt(Ue())),s.focus(),s.select())}function l(Y){F.combatants=F.combatants.filter(st=>st.id!==Y)}function c(Y){k(r)==="RUNNING"&&(W.activeCombatant=Y,u.show())}function d(Y){k(r)==="RUNNING"&&(W.activeCombatant=Y,u.show("conditions"))}zt(()=>{setTimeout(()=>{F.combatants.length===0&&Q(r,"EDITING")},500)});var h=Za(),p=G(h);yt(Ta(p,{}),Y=>u=Y,()=>u);var $=D(p,2),_=w($),f=w(_),y=w(f);Ht(y),E(()=>K(y,"placeholder",i()("scene_title"))),g(f);var T=D(f,2),b=w(T);b.__click=[Ja,r];var m=w(b);_o(m,{});var S=D(m,2),I=w(S,!0);E(()=>U(I,i()("run_scene"))),g(S),g(b);var x=D(b,2);x.__click=[Ka,r];var M=w(x);fo(M,{"aria-hidden":!0});var L=D(M,2),z=w(L,!0);E(()=>U(z,i()("edit_scene"))),g(L),g(x),g(T),g(_);var P=D(_,2),O=w(P),B=w(O),J=w(B,!0);E(()=>U(J,i()("column_name"))),g(B);var R=D(B,2),ot=w(R,!0);E(()=>U(ot,i()("column_initiative"))),g(R),rn(2),g(O);var ct=D(O,2);V(ct,()=>k(r)==="EDITING",Y=>{var st=Va(),bt=w(st),rt=w(bt);Ht(rt),E(()=>K(rt,"placeholder",i()("placeholder_name"))),rt.__keydown=[Ye,v,a],yt(rt,Ct=>s=Ct,()=>s),g(bt);var St=D(bt,2),gt=w(St);Ht(gt),E(()=>K(gt,"placeholder",i()("placeholder_initiative"))),gt.__keydown=[Ye,v,a],g(St);var Pt=D(St,2),At=w(Pt);At.__click=[qa,v,a],E(()=>K(At,"aria-label",i()("add_combatant")));var Bn=w(At);wn(Bn,{strokeWidth:3,"aria-hidden":!0}),g(At),g(Pt),g(st),Ft(rt,()=>k(a).name,Ct=>k(a).name=Ct),sn("focus",gt,Ct=>Pn(Ct)),Ft(gt,()=>k(a).initiative,Ct=>k(a).initiative=Ct),Wt(3,st,()=>zn),N(Y,st)});var at=D(ct,2);V(at,()=>F.combatants.length===0,Y=>{var st=ja(),bt=w(st),rt=w(bt),St=w(rt,!0);E(()=>U(St,i()("scene.empty_combatants_info"))),g(rt);var gt=D(rt,2),Pt=w(gt);E(()=>U(Pt,`${i()("scene.empty_combatants_hint")??""} `));var At=D(Pt,2);E(()=>U(At,` ${i()("scene.empty_combatants_hint_2")??""}`)),g(gt),g(bt),g(st),N(Y,st)}),g(P);var kt=D(P,2);Jt(kt,27,()=>F.combatants,Y=>Y.id,(Y,st,bt)=>{var rt=Ya(),St=w(rt);Ga(St,{get appMode(){return k(r)},get combatant(){return k(st)},get index(){return k(bt)},combatantClicked:c,conditionClicked:d,deleteCombatant:l}),g(rt),Mi(rt,()=>na,()=>({delay:100,duration:500})),N(Y,rt)}),g($),E(()=>{y.disabled=k(r)==="RUNNING",te(y,`input mr-4 w-full text-3xl ${(k(r)==="EDITING"?"input-bordered":"disabled input-ghost")??""} svelte-1i6w9it`),ft(b,"hidden",k(r)=="RUNNING"),ft(x,"hidden",k(r)==="EDITING"),ft(O,"rounded-t-lg",k(r)==="EDITING"),ft(O,"rounded-lg",k(r)==="RUNNING")}),Ft(y,()=>F.name,Y=>F.name=Y),N(e,h),ut()}_t(["click","keydown"]);var Qa=(e,t)=>t(),tr=H('<img width="30em" alt="German">'),er=H('<img width="30em" alt="English">'),nr=H('<footer class="footer flex items-center border-t-4 border-primary-content bg-primary-content/10 p-4 text-base-content"><div class="flex-1"><p class="hidden sm:flex"> </p> <p class="sm:hidden"></p></div> <button> </button> <button id="ToggleLanguageBtn"><!></button> <nav class="flex-none"><a href="https://github.com/k3ltis/splittermond-tickleiste"><span class="sr-only">Github project</span> <svg width="24px" height="24px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="custom-icon" aria-hidden="true"><title>Github</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-140.000000, -7559.000000)" fill="#000000"><g id="icons" transform="translate(56.000000, 160.000000)"><path d="M94,7399 C99.523,7399 104,7403.59 104,7409.253 C104,7413.782 101.138,7417.624 97.167,7418.981 C96.66,7419.082 96.48,7418.762 96.48,7418.489 C96.48,7418.151 96.492,7417.047 96.492,7415.675 C96.492,7414.719 96.172,7414.095 95.813,7413.777 C98.04,7413.523 100.38,7412.656 100.38,7408.718 C100.38,7407.598 99.992,7406.684 99.35,7405.966 C99.454,7405.707 99.797,7404.664 99.252,7403.252 C99.252,7403.252 98.414,7402.977 96.505,7404.303 C95.706,7404.076 94.85,7403.962 94,7403.958 C93.15,7403.962 92.295,7404.076 91.497,7404.303 C89.586,7402.977 88.746,7403.252 88.746,7403.252 C88.203,7404.664 88.546,7405.707 88.649,7405.966 C88.01,7406.684 87.619,7407.598 87.619,7408.718 C87.619,7412.646 89.954,7413.526 92.175,7413.785 C91.889,7414.041 91.63,7414.493 91.54,7415.156 C90.97,7415.418 89.522,7415.871 88.63,7414.304 C88.63,7414.304 88.101,7413.319 87.097,7413.247 C87.097,7413.247 86.122,7413.234 87.029,7413.87 C87.029,7413.87 87.684,7414.185 88.139,7415.37 C88.139,7415.37 88.726,7417.2 91.508,7416.58 C91.513,7417.437 91.522,7418.245 91.522,7418.489 C91.522,7418.76 91.338,7419.077 90.839,7418.982 C86.865,7417.627 84,7413.783 84,7409.253 C84,7403.59 88.478,7399 94,7399" id="github-[#142]"></path></g></g></g></svg></a></nav></footer> <dialog id="dataPrivacyModal" class="modal" aria-labelledby="dialogTitle" aria-describedby="dialogDesc"><div class="modal-box"><form method="dialog"><button class="btn btn-circle btn-ghost btn-sm absolute right-4 top-4"><!></button></form> <h3 class="text-lg font-bold" id="dialogTitle"> </h3> <p class="py-4" id="dialogDesc"><!></p></div> <form method="dialog" class="modal-backdrop"><button> </button></form></dialog>',1);function ir(e,t){dt(t,!0);const n=mt(),i=()=>pt(De,"$locale",n),o=()=>pt(ht,"$_",n);let a;const r="splittermond-tickleiste",s="1.1.2",u={German:"de",English:"en"},v="locale",l=u.German;let c=It(lt(l));zt(()=>{const at=fn(v);Q(c,lt(at||l))}),xe(()=>{bi(De,lt(k(c)||l))});function d(){Q(c,lt(k(c)===u.German?u.English:u.German)),pn(v,k(c)),document.title=o()("app_title",{locale:k(c)})}var h=nr(),p=G(h),$=w(p),_=w($),f=w(_);E(()=>U(f,`Copyright  k3ltis ${new Date().getFullYear()??""} - ${r} v${s}`)),g(_);var y=D(_,2);y.textContent=`v${s}`,g($);var T=D($,2);T.__click=()=>a.showModal();var b=w(T,!0);E(()=>U(b,o()("data_privacy"))),g(T);var m=D(T,2);m.__click=[Qa,d];var S=w(m);V(S,()=>i()==="en",at=>{var kt=tr();K(kt,"src",`${_e??""}/svg/flag-for-flag-germany-svgrepo-com.svg`),N(at,kt)},at=>{var kt=er();K(kt,"src",`${_e??""}/svg/flag-for-flag-united-kingdom-svgrepo-com.svg`),N(at,kt)}),g(m),rn(2),g(p);var I=D(p,2),x=w(I),M=w(x),L=w(M);E(()=>K(L,"aria-label",o()("close")));var z=w(L);$n(z,{"aria-hidden":!0,size:24}),g(L),g(M);var P=D(M,2),O=w(P,!0);E(()=>U(O,o()("data_privacy_header"))),g(P);var B=D(P,2),J=w(B);ki(J,()=>o()("data_privacy_content")),g(B),g(x);var R=D(x,2),ot=w(R),ct=w(ot,!0);E(()=>U(ct,o()("close"))),g(ot),g(R),g(I),yt(I,at=>a=at,()=>a),N(e,h),ut()}_t(["click"]);const or="Add combatant",ar="Active combatant",rr="Splittermond Tickbar",sr="close",cr="Initiative",lr="Name",dr="Name of combatant",ur="Initiative of combatant",vr="Interaction for {name}",pr="Status of combatant: {status}",fr="Combatants List",_r="Displays the list of combatants part of the scene.",mr="DataPrivacy",hr="This page does utilize the browser's local storage to locally save the scene and user preferences (like language settings) in the user's browser. This is done, so that the user does not lose information when closing the browser application. If you wish to delete this information simply clear your browser's cached web data. <br /><br /> No data is send to any remote server and no other user related data is processed by this page.",br="Data Privacy Information",gr="Delete combatant {name}",wr="Download Scene",yr="Lets you download the current scene as a JSON file.",$r="Edit Scene",xr="Toggles edit mode to change the scene name and combatants list.",kr="Open menu",Sr="Initiative",Cr="Name",Tr="Run Scene",Nr="Ends edit mode and runs the scene, ordering all combatants by ascending initiative. <b>Clicking a combatant in run mode allows you to choose a number of ticks</b> to add to the combatant's initiative value, followed by a reordering. <br/><br/> You can re-enter <b>edit mode</b> at any time.",Er="Scene Title",Ar="Shows the current scene's name.",Lr="Lets you choose a scene to load that was previously saved to your device.",Mr="Join on tick",Dr="Tick movement",Ir="Start explanation tour",zr="Switch to {n, plural, =0 {light theme} =1 {dark theme} other {}}",Pr="Next",Br="Previous",Rr="Done",Or="{{current}} of {{total}}",Hr="Upload Scene",Wr="Upload Scene",Fr={change_theme:{title:"Day/Night Mode",content:"Toggle between day and night mode."},change_langauge:{title:"Toggle Language",content:"Switch between German and English."},tick_selection_modal:{overview:{title:"Tick Selection Dialog",content:"Here you can select the <b>ticks</b> to add or subtract, as well as special combat states like <b>expecting</b>, <b>waiting</b>, or <b>incapitated</b>."}}},Ur={tooltip:{tick_direction:"{n, plural, =0 {Negates} =1 {Adds} other {}} ticks",set_state_expecting:"Expecting",set_state_waiting:"Waiting",set_state_dead:"Incapitated"}},Gr={empty_combatants_info:"No combatants were created yet",empty_combatants_hint:"Enter details of the combatant into the inputs above and press the",empty_combatants_hint_2:"button to add them."},Kr={actions:"Actions",conditions:"Conditions"},Jr={fearful:"Fearful",dazed:"Dazed",unconscious:"Unconscious",bleeding:"Bleeding",burning:"Burning",exhausted:"Exhausted",blinded:"Blinded",crisis_of_faith:"Crisis of Faith",sick:"Sick",crippled:"Crippled",panicked:"Panicked",frenzied:"Frenzied",struggling:"Struggling",sleeping:"Sleeping",wasting:"Wasting",dying:"Dying",wounded:"Wounded"},qr={add_combatant:or,active_combatant:ar,app_title:rr,close:sr,column_initiative:cr,column_name:lr,combatant_name:dr,combatant_initiative:ur,combatant_interaction_modal:vr,combatant_status:pr,combatants_list:fr,combatants_list_description:_r,data_privacy:mr,data_privacy_content:hr,data_privacy_header:br,delete_combatant:gr,download_scene:wr,download_scene_description:yr,edit_scene:$r,edit_scene_description:xr,open_menu:kr,placeholder_initiative:Sr,placeholder_name:Cr,run_scene:Tr,run_scene_description:Nr,scene_title:Er,scene_title_description:Ar,upload_scene_description:Lr,tick_join:Mr,tick_move:Dr,start_tour:Ir,toggle_theme:zr,tour_btn_next:Pr,tour_btn_prev:Br,tout_btn_done:Rr,tour_progress_text:Or,tour_upload_scene:Hr,upload_scene:Wr,tour:Fr,tickselection:Ur,scene:Gr,combatant_modal:Kr,condition:Jr},Vr="Kmpfer hinzufgen",jr="Aktiver Kmpfer",Yr="Splittermond Tickleiste",Zr="schlieen",Xr="Initiative",Qr="Name",ts="Name des Kmpfers",es="Initiative des Kmpfers",ns="Interaktion fr {name}",is="Status des Kmpfers: {status}",os="Liste der Kmpfer",as="Zeigt die Liste der Kmpfer, die Teil der Szene sind.",rs="Datenschutz",ss="Diese Seite nutzt den lokalen Speicher des Browsers (local storage), um die Szene sowie benutzerdefinierte Einstellungen (wie etwas die gewhlte Sprache) lokal im Browser des Nutzers zu speichern. Dies geschieht, damit der Nutzer keine Informationen verliert, wenn er die Browseranwendung schliet. Wenn Sie diese Informationen lschen mchten, mssen Sie die zwischengespeicherten Webdaten Ihres Browsers bereinigen. <br /><br /> Es werden keine Daten an einen externen Server gesendet und keine anderen nutzerbezogenen Daten werden von dieser Seite verarbeitet.",cs="Datenschutzinformationen",ls="Kmpfer {name} lschen",ds="Szene herunterladen",us="Ermglicht es Ihnen, die aktuelle Szene als JSON-Datei herunterzuladen.",vs="Szene bearbeiten",ps="Wechselt in den Bearbeitungsmodus, um den Szenennamen und die Liste der Kmpfer zu ndern.",fs="Men ffnen",_s="Initiative",ms="Name",hs="Szene ausfhren",bs="Beendet den Bearbeitungsmodus und fhrt die Szene aus, indem alle Kmpfer nach aufsteigender Initiative geordnet werden. <b>Ein Klick auf einen Kmpfer im Ausfhrungsmodus ermglicht es Ihnen, eine Anzahl von Ticks auszuwhlen</b>, die zum Initiativwert des Kmpfers hinzugefgt werden, gefolgt von einer Neuanordnung. <br/><br/> Sie knnen jederzeit <b>in den Bearbeitungsmodus</b> zurckkehren.",gs="Szenenberschrift",ws="Zeigt den Namen der aktuellen Szene an.",ys="Ermglicht es Ihnen, eine Szene auszuwhlen, die zuvor auf Ihrem Gert gespeichert wurde.",$s="Erklrungs-Tour starten",xs="Tick Einstieg",ks="Tick Bewegung",Ss="{n, plural, =0 {Tagmodus aktivieren} =1 {Nachtmodus aktivieren} other {}}",Cs="Weiter",Ts="Zurck",Ns="Fertig",Es="{{current}} von {{total}}",As="Szene hochladen",Ls="Szene hochladen",Ms={change_theme:{title:"Tag- und Nachtmodus",content:"Umschalten zwischen Tag- und Nachtmodus."},change_langauge:{title:"Sprache umschalten",content:"Zwischen Deutsch und Englisch wechseln."},tick_selection_modal:{overview:{title:"Tick Auswahl Dialog",content:"Hier kannst du sowohl die <b>Ticks</b> auswhlen, die hinzugefgt oder abgezogen werden sollen, als auch spezielle Kampfmodi aktivieren, wie <b>Aktion bereithalten</b>, <b>Abwarten </b>oder <b>kampfunfhig</b>."}}},Ds={tooltip:{tick_direction:"Ticks {n, plural, =0 {rckwrts} =1 {vorwrts} other {}}",set_state_expecting:"Bereithalten",set_state_dead:"Kampfunfhig",set_state_waiting:"Abwarten"}},Is={empty_combatants_info:"Keine Kmpfer vorhanden",empty_combatants_hint:"Informationen zum Charakter in die oberen Eingabefelder eingeben und den",empty_combatants_hint_2:"Knopf drcken, um diesen hinzuzufgen."},zs={actions:"Aktionen",conditions:"Zustnde"},Ps={fearful:"Angsterfllt",dazed:"Benommen",unconscious:"Bewusstlos",bleeding:"Blutend",burning:"Brennend",exhausted:"Erschpft",blinded:"Geblendet",crisis_of_faith:"Glaubenskrise",sick:"Krank",crippled:"Lahm",panicked:"Panisch",frenzied:"Rasend",struggling:"Ringend",sleeping:"Schlafend",wasting:"Siechtum",dying:"Sterbend",wounded:"Verwundet"},Bs={add_combatant:Vr,active_combatant:jr,app_title:Yr,close:Zr,column_initiative:Xr,column_name:Qr,combatant_name:ts,combatant_initiative:es,combatant_interaction_modal:ns,combatant_status:is,combatants_list:os,combatants_list_description:as,data_privacy:rs,data_privacy_content:ss,data_privacy_header:cs,delete_combatant:ls,download_scene:ds,download_scene_description:us,edit_scene:vs,edit_scene_description:ps,open_menu:fs,placeholder_initiative:_s,placeholder_name:ms,run_scene:hs,run_scene_description:bs,scene_title:gs,scene_title_description:ws,upload_scene_description:ys,start_tour:$s,tick_join:xs,tick_move:ks,toggle_theme:Ss,tour_btn_next:Cs,tour_btn_prev:Ts,tout_btn_done:Ns,tour_progress_text:Es,tour_upload_scene:As,upload_scene:Ls,tour:Ms,tickselection:Ds,scene:Is,combatant_modal:zs,condition:Ps};cn("en",qr);cn("de",Bs);gi({fallbackLocale:"en",initialLocale:wi()});var Rs=H('<div class="flex min-h-screen flex-col"><!> <!> <!></div>');function qs(e,t){dt(t,!0),zt(()=>{const r=Fi();r&&mn(r)}),xe(()=>{Ji()});var n=Rs(),i=w(n);Xo(i,{});var o=D(i,2);Xa(o,{});var a=D(o,2);ir(a,{}),g(n),N(e,n),ut()}export{qs as component};
