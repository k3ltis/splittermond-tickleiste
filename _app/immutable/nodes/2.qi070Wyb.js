import{a as q,t as V}from"../chunks/disclose-version.DNfh29or.js";import{o as Mt,w as W,M as Rt,B as zt,R as pt,a8 as Ht,a9 as Ue,L as Je,K as Te,x as de,a6 as _t,q as ft,a7 as Ot,as as Be,D as ke,at as Wt,au as Ft,av as Ut,V as Jt,a0 as qe,aw as qt,ax as Kt,Q as Vt,ay as Gt,v as Yt,N as jt,I as Xt,a5 as Ke,az as Zt,aA as Qt,aB as en,E as tn,aC as nn,aD as on,aa as rn,b as an,aE as sn,ac as ln,n as ce,aF as dn,z as Ve,A as Ge,C as cn,aG as un,ab as vn,p as me,t as I,j as he,m as N,k as b,l as y,W as ae,g as C,ar as ze,aH as We,i as pn,aI as _n,a as fn}from"../chunks/utils.N6bKnRMK.js";import{p as re,b as Se,i as Ye,o as mn}from"../chunks/index-client.bLedRZ_y.js";import{d as hn,e as Le,s as Ne,b as _e,a as z,f as gn}from"../chunks/store.R5A04zEi.js";import{i as mt}from"../chunks/lifecycle.QFWLZpk1.js";import{b as K}from"../chunks/paths.CEqla8ak.js";import{a as Ae,$ as je,b as ht,i as wn,g as bn}from"../chunks/runtime.BgX0-0zL.js";let De=null;function gt(e,t){return t}function yn(e,t,n,o){for(var i=[],a=t.length,l=0;l<a;l++)Kt(t[l].e,i,!0);var _=a>0&&i.length===0&&n!==null;if(_){var s=n.parentNode;Vt(s),s.append(n),o.clear(),X(e,t[0].prev,t[a-1].next)}Gt(i,()=>{for(var d=0;d<a;d++){var r=t[d];_||(o.delete(r.k),X(e,r.prev,r.next)),Yt(r.e,!_)}})}function wt(e,t,n,o,i,a=null){var l=e,_={flags:t,items:new Map,first:null};W&&Rt();var s=null,d=!1;Mt(()=>{var r=n(),v=zt(r)?r:r==null?[]:pt(r),c=v.length;if(d&&c===0)return;d=c===0;let m=!1;if(W){var p=l.data===Ht;p!==(c===0)&&(l=Ue(),Je(l),Te(!1),m=!0)}if(W){for(var h=null,u,f=0;f<c;f++){if(de.nodeType===8&&de.data===jt){l=de,m=!0,Te(!1);break}var S=v[f],k=o(S,f);u=bt(de,_,h,null,S,k,f,i,t),_.items.set(k,u),h=u}c>0&&Je(Ue())}W||xn(v,_,l,i,t,o),a!==null&&(c===0?s?_t(s):s=ft(()=>a(l)):s!==null&&Ot(s,()=>{s=null})),m&&Te(!0),n()}),W&&(l=de)}function xn(e,t,n,o,i,a){var l=e.length,_=t.items,s=t.first,d=s,r,v=null,c=[],m=[],p,h,u,f;for(f=0;f<l;f+=1){if(p=e[f],h=a(p,f),u=_.get(h),u===void 0){var S=d?d.e.nodes_start:n;v=bt(S,t,v,v===null?t.first:v.next,p,h,f,o,i),_.set(h,v),c=[],m=[],d=v.next;continue}if($n(u,p,f),u.e.f&Be&&_t(u.e),u!==d){if(r!==void 0&&r.has(u)){if(c.length<m.length){var k=m[0],x;v=k.prev;var $=c[0],E=c[c.length-1];for(x=0;x<c.length;x+=1)Xe(c[x],k,n);for(x=0;x<m.length;x+=1)r.delete(m[x]);X(t,$.prev,E.next),X(t,v,$),X(t,E,k),d=k,v=E,f-=1,c=[],m=[]}else r.delete(u),Xe(u,d,n),X(t,u.prev,u.next),X(t,u,v===null?t.first:v.next),X(t,v,u),v=u;continue}for(c=[],m=[];d!==null&&d.k!==h;)d.e.f&Be||(r??(r=new Set)).add(d),m.push(d),d=d.next;if(d===null)continue;u=d}c.push(u),v=u,d=u.next}if(d!==null||r!==void 0){for(var L=r===void 0?[]:pt(r);d!==null;)d.e.f&Be||L.push(d),d=d.next;var A=L.length;if(A>0){var H=null;yn(t,L,H,_)}}ke.first=t.first&&t.first.e,ke.last=v&&v.e}function $n(e,t,n,o){Wt(e.v,t),e.i=n}function bt(e,t,n,o,i,a,l,_,s){var d=De;try{var r=(s&Ft)!==0,v=(s&Ut)===0,c=r?v?Jt(i):qe(i):i,m=s&qt?qe(l):l,p={i:m,v:c,k:a,a:null,e:null,prev:n,next:o};return De=p,p.e=ft(()=>_(e,c,m),W),p.e.prev=n&&n.e,p.e.next=o&&o.e,n===null?t.first=p:(n.next=p,n.e.next=p.e),o!==null&&(o.prev=p,o.e.prev=p.e),p}finally{De=d}}function Xe(e,t,n){for(var o=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==o;){var l=Xt(a);i.before(a),a=l}}function X(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}let Ze=!1;function yt(){Ze||(Ze=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function ue(e){if(W){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var o=e.value;D(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var i=e.checked;D(e,"checked",null),e.checked=i}}};e.__on_r=n,Qt(n),yt()}}function D(e,t,n,o){var i=e.__attributes??(e.__attributes={});W&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[en]=n),n==null?e.removeAttribute(t):typeof n!="string"&&kn(e).includes(t)?e[t]=n:e.setAttribute(t,n))}var Qe=new Map;function kn(e){var t=Qe.get(e.nodeName);if(t)return t;Qe.set(e.nodeName,t=[]);for(var n,o=Ke(e),i=Element.prototype;i!==o;){n=Zt(o);for(var a in n)n[a].set&&t.push(a);o=Ke(o)}return t}function be(e,t){var n=e.__className,o=Sn(t);W&&e.className===o?e.__className=o:(n!==o||W&&e.className!==o)&&(t==null?e.removeAttribute("class"):e.className=o,e.__className=o)}function Sn(e){return e??""}function pe(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}const En=()=>performance.now(),Z={tick:e=>requestAnimationFrame(e),now:()=>En(),tasks:new Set};function xt(e){Z.tasks.forEach(t=>{t.c(e)||(Z.tasks.delete(t),t.f())}),Z.tasks.size!==0&&Z.tick(xt)}function Cn(e){let t;return Z.tasks.size===0&&Z.tick(xt),{promise:new Promise(n=>{Z.tasks.add(t={c:e,f:n})}),abort(){Z.tasks.delete(t)}}}function ye(e,t){e.dispatchEvent(new CustomEvent(t))}function Ln(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function et(e){const t={},n=e.split(";");for(const o of n){const[i,a]=o.split(":");if(!i||a===void 0)break;const l=Ln(i.trim());t[l]=a.trim()}return t}const Nn=e=>e;function tt(e,t,n,o){var i=(e&dn)!==0,a="both",l,_=t.inert,s,d;function r(){var h=cn,u=ke;Ve(null),Ge(null);try{return l??(l=n()(t,(o==null?void 0:o())??{},{direction:a}))}finally{Ve(h),Ge(u)}}var v={is_global:i,in(){t.inert=_,ye(t,"introstart"),s=He(t,r(),d,1,()=>{ye(t,"introend"),s==null||s.abort(),s=l=void 0})},out(h){t.inert=!0,ye(t,"outrostart"),d=He(t,r(),s,0,()=>{ye(t,"outroend"),h==null||h()})},stop:()=>{s==null||s.abort(),d==null||d.abort()}},c=ke;if((c.transitions??(c.transitions=[])).push(v),hn){var m=i;if(!m){for(var p=c.parent;p&&p.f&tn;)for(;(p=p.parent)&&!(p.f&nn););m=!p||(p.f&on)!==0}m&&rn(()=>{an(()=>v.in())})}}function He(e,t,n,o,i){var a=o===1;if(sn(t)){var l,_=!1;return ln(()=>{if(!_){var u=t({direction:a?"in":"out"});l=He(e,u,n,o,i)}}),{abort:()=>{_=!0,l==null||l.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(n==null||n.deactivate(),!(t!=null&&t.duration))return i(),{abort:ce,deactivate:ce,reset:ce,t:()=>o};const{delay:s=0,css:d,tick:r,easing:v=Nn}=t;var c=[];if(a&&n===void 0&&(r&&r(0,1),d)){var m=et(d(0,1));c.push(m,m)}var p=()=>1-o,h=e.animate(c,{duration:s});return h.onfinish=()=>{var u=(n==null?void 0:n.t())??1-o;n==null||n.abort();var f=o-u,S=t.duration*Math.abs(f),k=[];if(S>0){if(d)for(var x=Math.ceil(S/16.666666666666668),$=0;$<=x;$+=1){var E=u+f*v($/x),L=d(E,1-E);k.push(et(L))}p=()=>{var A=h.currentTime;return u+f*v(A/S)},r&&Cn(()=>{if(h.playState!=="running")return!1;var A=p();return r(A,1-A),!0})}h=e.animate(k,{duration:S,fill:"forwards"}),h.onfinish=()=>{p=()=>o,r==null||r(o,1-o),i()}},{abort:()=>{h&&(h.cancel(),h.effect=null,h.onfinish=ce)},deactivate:()=>{i=ce},reset:()=>{o===0&&(r==null||r(1,0))},t:()=>p()}}function An(e,t,n,o=n){e.addEventListener(t,n);const i=e.__on_r;i?e.__on_r=()=>{i(),o()}:e.__on_r=o,yt()}function ve(e,t,n=t){var o=un();An(e,"input",()=>{var i=nt(e)?it(e.value):e.value;n(i),o&&i!==(i=t())&&(e.value=i??"")}),vn(()=>{var i=t();if(W&&e.defaultValue!==e.value){n(e.value);return}nt(e)&&i===it(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function nt(e){var t=e.type;return t==="number"||t==="range"}function it(e){return e===""?null:+e}const B=[];for(let e=0;e<256;++e)B.push((e+256).toString(16).slice(1));function In(e,t=0){return(B[e[t+0]]+B[e[t+1]]+B[e[t+2]]+B[e[t+3]]+"-"+B[e[t+4]]+B[e[t+5]]+"-"+B[e[t+6]]+B[e[t+7]]+"-"+B[e[t+8]]+B[e[t+9]]+"-"+B[e[t+10]]+B[e[t+11]]+B[e[t+12]]+B[e[t+13]]+B[e[t+14]]+B[e[t+15]]).toLowerCase()}let Pe;const Tn=new Uint8Array(16);function Bn(){if(!Pe){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Pe=crypto.getRandomValues.bind(crypto)}return Pe(Tn)}const Dn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ot={randomUUID:Dn};function Pn(e,t,n){if(ot.randomUUID&&!t&&!e)return ot.randomUUID();e=e||{};const o=e.random||(e.rng||Bn)();return o[6]=o[6]&15|64,o[8]=o[8]&63|128,In(o)}const Mn=e=>{localStorage.setItem("scene",JSON.stringify(e)),console.log("Data saved to localStorage")},Rn=()=>{const e=localStorage.getItem("scene");if(e){const t=JSON.parse(e);return console.log("scene loaded from localStorage"),t}return console.log("no scene found in localStorage"),null};let O=re({name:"name of scene",combatants:[]});const rt=()=>({id:Pn(),name:"",initiative:0}),$t=e=>{console.log(`Load scene ${JSON.stringify(e)}`),Object.assign(O,e)},zn=()=>{Mn(O)},kt=(e=null)=>{O.combatants.sort((t,n)=>{if(t.initiative!==n.initiative)return t.initiative-n.initiative;if(e){if(t.id===e.id)return 1;if(n.id===e.id)return-1}return 0})},Me=".splimo.json",Hn=e=>new Promise((t,n)=>{const o=new FileReader;o.onload=i=>{var a;try{const l=JSON.parse((a=i.target)==null?void 0:a.result);t(l)}catch(l){console.error("error parsing JSON:",l),alert("invalid JSON file"),n(l)}},o.onerror=i=>{console.error("error reading file:",i),n(i)},o.readAsText(e)}),at=(e,t)=>{const n=JSON.stringify(e,null,2),o="data:application/json;charset=utf-8,"+encodeURIComponent(n),i=document.createElement("a");i.href=o,i.download=t,i.target="_blank",i.click()},On=async(e,t="scene"+Me)=>{if(e){t.endsWith(Me)||(t+=Me);const n=[JSON.stringify(e,null,2)],o=new File(n,t,{type:"application/json",lastModified:Date.now()});if(navigator.canShare&&navigator.canShare({files:[o]}))try{await navigator.share({files:[o],title:"Download JSON",text:"Download JSON file"})}catch(i){console.error("Error sharing JSON:",i),console.info("Try downloading file via data url fallback"),at(e,t)}else at(e,t)}else alert("No data to download")};let Oe={};function Re(e={}){Oe={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...e}}function g(e){return e?Oe[e]:Oe}function xe(e,t,n,o){return(e/=o/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}function St(e){const t='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return e.flatMap(n=>{const o=n.matches(t),i=Array.from(n.querySelectorAll(t));return[...o?[n]:[],...i]}).filter(n=>getComputedStyle(n).pointerEvents!=="none"&&Un(n))}function Et(e){if(!e||Fn(e))return;const t=g("smoothScroll");e.scrollIntoView({behavior:!t||Wn(e)?"auto":"smooth",inline:"center",block:"center"})}function Wn(e){if(!e||!e.parentElement)return;const t=e.parentElement;return t.scrollHeight>t.clientHeight}function Fn(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function Un(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}let Ee={};function T(e,t){Ee[e]=t}function w(e){return e?Ee[e]:Ee}function st(){Ee={}}let Ce={};function $e(e,t){Ce[e]=t}function te(e){var t;(t=Ce[e])==null||t.call(Ce)}function Jn(){Ce={}}function qn(e,t,n,o){let i=w("__activeStagePosition");const a=i||n.getBoundingClientRect(),l=o.getBoundingClientRect(),_=xe(e,a.x,l.x-a.x,t),s=xe(e,a.y,l.y-a.y,t),d=xe(e,a.width,l.width-a.width,t),r=xe(e,a.height,l.height-a.height,t);i={x:_,y:s,width:d,height:r},Lt(i),T("__activeStagePosition",i)}function Ct(e){if(!e)return;const t=e.getBoundingClientRect(),n={x:t.x,y:t.y,width:t.width,height:t.height};T("__activeStagePosition",n),Lt(n)}function Kn(){const e=w("__activeStagePosition"),t=w("__overlaySvg");if(!e)return;if(!t){console.warn("No stage svg found.");return}const n=window.innerWidth,o=window.innerHeight;t.setAttribute("viewBox",`0 0 ${n} ${o}`)}function Vn(e){const t=Gn(e);document.body.appendChild(t),It(t,n=>{n.target.tagName==="path"&&te("overlayClick")}),T("__overlaySvg",t)}function Lt(e){const t=w("__overlaySvg");if(!t){Vn(e);return}const n=t.firstElementChild;if((n==null?void 0:n.tagName)!=="path")throw new Error("no path element found in stage svg");n.setAttribute("d",Nt(e))}function Gn(e){const t=window.innerWidth,n=window.innerHeight,o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.classList.add("driver-overlay","driver-overlay-animated"),o.setAttribute("viewBox",`0 0 ${t} ${n}`),o.setAttribute("xmlSpace","preserve"),o.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),o.setAttribute("version","1.1"),o.setAttribute("preserveAspectRatio","xMinYMin slice"),o.style.fillRule="evenodd",o.style.clipRule="evenodd",o.style.strokeLinejoin="round",o.style.strokeMiterlimit="2",o.style.zIndex="10000",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%";const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",Nt(e)),i.style.fill=g("overlayColor")||"rgb(0,0,0)",i.style.opacity=`${g("overlayOpacity")}`,i.style.pointerEvents="auto",i.style.cursor="auto",o.appendChild(i),o}function Nt(e){const t=window.innerWidth,n=window.innerHeight,o=g("stagePadding")||0,i=g("stageRadius")||0,a=e.width+o*2,l=e.height+o*2,_=Math.min(i,a/2,l/2),s=Math.floor(Math.max(_,0)),d=e.x-o+s,r=e.y-o,v=a-s*2,c=l-s*2;return`M${t},0L0,0L0,${n}L${t},${n}L${t},0Z
    M${d},${r} h${v} a${s},${s} 0 0 1 ${s},${s} v${c} a${s},${s} 0 0 1 -${s},${s} h-${v} a${s},${s} 0 0 1 -${s},-${s} v-${c} a${s},${s} 0 0 1 ${s},-${s} z`}function Yn(){const e=w("__overlaySvg");e&&e.remove()}function jn(){const e=document.getElementById("driver-dummy-element");if(e)return e;let t=document.createElement("div");return t.id="driver-dummy-element",t.style.width="0",t.style.height="0",t.style.pointerEvents="none",t.style.opacity="0",t.style.position="fixed",t.style.top="50%",t.style.left="50%",document.body.appendChild(t),t}function lt(e){const{element:t}=e;let n=typeof t=="string"?document.querySelector(t):t;n||(n=jn()),Zn(n,e)}function Xn(){const e=w("__activeElement"),t=w("__activeStep");e&&(Ct(e),Kn(),Bt(e,t))}function Zn(e,t){const n=Date.now(),o=w("__activeStep"),i=w("__activeElement")||e,a=!i||i===e,l=e.id==="driver-dummy-element",_=i.id==="driver-dummy-element",s=g("animate"),d=t.onHighlightStarted||g("onHighlightStarted"),r=(t==null?void 0:t.onHighlighted)||g("onHighlighted"),v=(o==null?void 0:o.onDeselected)||g("onDeselected"),c=g(),m=w();!a&&v&&v(_?void 0:i,o,{config:c,state:m}),d&&d(l?void 0:e,t,{config:c,state:m});const p=!a&&s;let h=!1;ii(),T("previousStep",o),T("previousElement",i),T("activeStep",t),T("activeElement",e);const u=()=>{if(w("__transitionCallback")!==u)return;const f=Date.now()-n,S=400-f<=400/2;t.popover&&S&&!h&&p&&(dt(e,t),h=!0),g("animate")&&f<400?qn(f,400,i,e):(Ct(e),r&&r(l?void 0:e,t,{config:g(),state:w()}),T("__transitionCallback",void 0),T("__previousStep",o),T("__previousElement",i),T("__activeStep",t),T("__activeElement",e)),window.requestAnimationFrame(u)};T("__transitionCallback",u),window.requestAnimationFrame(u),Et(e),!p&&t.popover&&dt(e,t),i.classList.remove("driver-active-element","driver-no-interaction"),i.removeAttribute("aria-haspopup"),i.removeAttribute("aria-expanded"),i.removeAttribute("aria-controls"),g("disableActiveInteraction")&&e.classList.add("driver-no-interaction"),e.classList.add("driver-active-element"),e.setAttribute("aria-haspopup","dialog"),e.setAttribute("aria-expanded","true"),e.setAttribute("aria-controls","driver-popover-content")}function Qn(){var e;(e=document.getElementById("driver-dummy-element"))==null||e.remove(),document.querySelectorAll(".driver-active-element").forEach(t=>{t.classList.remove("driver-active-element","driver-no-interaction"),t.removeAttribute("aria-haspopup"),t.removeAttribute("aria-expanded"),t.removeAttribute("aria-controls")})}function fe(){const e=w("__resizeTimeout");e&&window.cancelAnimationFrame(e),T("__resizeTimeout",window.requestAnimationFrame(Xn))}function ei(e){var t;if(!w("isInitialized")||!(e.key==="Tab"||e.keyCode===9))return;const n=w("__activeElement"),o=(t=w("popover"))==null?void 0:t.wrapper,i=St([...o?[o]:[],...n?[n]:[]]),a=i[0],l=i[i.length-1];if(e.preventDefault(),e.shiftKey){const _=i[i.indexOf(document.activeElement)-1]||l;_==null||_.focus()}else{const _=i[i.indexOf(document.activeElement)+1]||a;_==null||_.focus()}}function At(e){var t;((t=g("allowKeyboardControl"))==null||t)&&(e.key==="Escape"?te("escapePress"):e.key==="ArrowRight"?te("arrowRightPress"):e.key==="ArrowLeft"&&te("arrowLeftPress"))}function It(e,t,n){const o=(i,a)=>{const l=i.target;e.contains(l)&&((!n||n(l))&&(i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation()),a==null||a(i))};document.addEventListener("pointerdown",o,!0),document.addEventListener("mousedown",o,!0),document.addEventListener("pointerup",o,!0),document.addEventListener("mouseup",o,!0),document.addEventListener("click",i=>{o(i,t)},!0)}function ti(){window.addEventListener("keyup",At,!1),window.addEventListener("keydown",ei,!1),window.addEventListener("resize",fe),window.addEventListener("scroll",fe)}function ni(){window.removeEventListener("keyup",At),window.removeEventListener("resize",fe),window.removeEventListener("scroll",fe)}function ii(){const e=w("popover");e&&(e.wrapper.style.display="none")}function dt(e,t){var n,o;let i=w("popover");i&&document.body.removeChild(i.wrapper),i=ri(),document.body.appendChild(i.wrapper);const{title:a,description:l,showButtons:_,disableButtons:s,showProgress:d,nextBtnText:r=g("nextBtnText")||"Next &rarr;",prevBtnText:v=g("prevBtnText")||"&larr; Previous",progressText:c=g("progressText")||"{current} of {total}"}=t.popover||{};i.nextButton.innerHTML=r,i.previousButton.innerHTML=v,i.progress.innerHTML=c,a?(i.title.innerHTML=a,i.title.style.display="block"):i.title.style.display="none",l?(i.description.innerHTML=l,i.description.style.display="block"):i.description.style.display="none";const m=_||g("showButtons"),p=d||g("showProgress")||!1,h=(m==null?void 0:m.includes("next"))||(m==null?void 0:m.includes("previous"))||p;i.closeButton.style.display=m.includes("close")?"block":"none",h?(i.footer.style.display="flex",i.progress.style.display=p?"block":"none",i.nextButton.style.display=m.includes("next")?"block":"none",i.previousButton.style.display=m.includes("previous")?"block":"none"):i.footer.style.display="none";const u=s||g("disableButtons")||[];u!=null&&u.includes("next")&&(i.nextButton.disabled=!0,i.nextButton.classList.add("driver-popover-btn-disabled")),u!=null&&u.includes("previous")&&(i.previousButton.disabled=!0,i.previousButton.classList.add("driver-popover-btn-disabled")),u!=null&&u.includes("close")&&(i.closeButton.disabled=!0,i.closeButton.classList.add("driver-popover-btn-disabled"));const f=i.wrapper;f.style.display="block",f.style.left="",f.style.top="",f.style.bottom="",f.style.right="",f.id="driver-popover-content",f.setAttribute("role","dialog"),f.setAttribute("aria-labelledby","driver-popover-title"),f.setAttribute("aria-describedby","driver-popover-description");const S=i.arrow;S.className="driver-popover-arrow";const k=((n=t.popover)==null?void 0:n.popoverClass)||g("popoverClass")||"";f.className=`driver-popover ${k}`.trim(),It(i.wrapper,L=>{var A,H,G;const F=L.target,U=((A=t.popover)==null?void 0:A.onNextClick)||g("onNextClick"),Y=((H=t.popover)==null?void 0:H.onPrevClick)||g("onPrevClick"),ne=((G=t.popover)==null?void 0:G.onCloseClick)||g("onCloseClick");if(F.classList.contains("driver-popover-next-btn"))return U?U(e,t,{config:g(),state:w()}):te("nextClick");if(F.classList.contains("driver-popover-prev-btn"))return Y?Y(e,t,{config:g(),state:w()}):te("prevClick");if(F.classList.contains("driver-popover-close-btn"))return ne?ne(e,t,{config:g(),state:w()}):te("closeClick")},L=>!(i!=null&&i.description.contains(L))&&!(i!=null&&i.title.contains(L))&&typeof L.className=="string"&&L.className.includes("driver-popover")),T("popover",i);const x=((o=t.popover)==null?void 0:o.onPopoverRender)||g("onPopoverRender");x&&x(i,{config:g(),state:w()}),Bt(e,t),Et(f);const $=e.classList.contains("driver-dummy-element"),E=St([f,...$?[]:[e]]);E.length>0&&E[0].focus()}function Tt(){const e=w("popover");if(!(e!=null&&e.wrapper))return;const t=e.wrapper.getBoundingClientRect(),n=g("stagePadding")||0,o=g("popoverOffset")||0;return{width:t.width+n+o,height:t.height+n+o,realWidth:t.width,realHeight:t.height}}function ct(e,t){const{elementDimensions:n,popoverDimensions:o,popoverPadding:i,popoverArrowDimensions:a}=t;return e==="start"?Math.max(Math.min(n.top-i,window.innerHeight-o.realHeight-a.width),a.width):e==="end"?Math.max(Math.min(n.top-(o==null?void 0:o.realHeight)+n.height+i,window.innerHeight-(o==null?void 0:o.realHeight)-a.width),a.width):e==="center"?Math.max(Math.min(n.top+n.height/2-(o==null?void 0:o.realHeight)/2,window.innerHeight-(o==null?void 0:o.realHeight)-a.width),a.width):0}function ut(e,t){const{elementDimensions:n,popoverDimensions:o,popoverPadding:i,popoverArrowDimensions:a}=t;return e==="start"?Math.max(Math.min(n.left-i,window.innerWidth-o.realWidth-a.width),a.width):e==="end"?Math.max(Math.min(n.left-(o==null?void 0:o.realWidth)+n.width+i,window.innerWidth-(o==null?void 0:o.realWidth)-a.width),a.width):e==="center"?Math.max(Math.min(n.left+n.width/2-(o==null?void 0:o.realWidth)/2,window.innerWidth-(o==null?void 0:o.realWidth)-a.width),a.width):0}function Bt(e,t){const n=w("popover");if(!n)return;const{align:o="start",side:i="left"}=(t==null?void 0:t.popover)||{},a=o,l=e.id==="driver-dummy-element"?"over":i,_=g("stagePadding")||0,s=Tt(),d=n.arrow.getBoundingClientRect(),r=e.getBoundingClientRect(),v=r.top-s.height;let c=v>=0;const m=window.innerHeight-(r.bottom+s.height);let p=m>=0;const h=r.left-s.width;let u=h>=0;const f=window.innerWidth-(r.right+s.width);let S=f>=0;const k=!c&&!p&&!u&&!S;let x=l;if(l==="top"&&c?S=u=p=!1:l==="bottom"&&p?S=u=c=!1:l==="left"&&u?S=c=p=!1:l==="right"&&S&&(u=c=p=!1),l==="over"){const $=window.innerWidth/2-s.realWidth/2,E=window.innerHeight/2-s.realHeight/2;n.wrapper.style.left=`${$}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${E}px`,n.wrapper.style.bottom="auto"}else if(k){const $=window.innerWidth/2-(s==null?void 0:s.realWidth)/2,E=10;n.wrapper.style.left=`${$}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${E}px`,n.wrapper.style.top="auto"}else if(u){const $=Math.min(h,window.innerWidth-(s==null?void 0:s.realWidth)-d.width),E=ct(a,{elementDimensions:r,popoverDimensions:s,popoverPadding:_,popoverArrowDimensions:d});n.wrapper.style.left=`${$}px`,n.wrapper.style.top=`${E}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",x="left"}else if(S){const $=Math.min(f,window.innerWidth-(s==null?void 0:s.realWidth)-d.width),E=ct(a,{elementDimensions:r,popoverDimensions:s,popoverPadding:_,popoverArrowDimensions:d});n.wrapper.style.right=`${$}px`,n.wrapper.style.top=`${E}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",x="right"}else if(c){const $=Math.min(v,window.innerHeight-s.realHeight-d.width);let E=ut(a,{elementDimensions:r,popoverDimensions:s,popoverPadding:_,popoverArrowDimensions:d});n.wrapper.style.top=`${$}px`,n.wrapper.style.left=`${E}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",x="top"}else if(p){const $=Math.min(m,window.innerHeight-(s==null?void 0:s.realHeight)-d.width);let E=ut(a,{elementDimensions:r,popoverDimensions:s,popoverPadding:_,popoverArrowDimensions:d});n.wrapper.style.left=`${E}px`,n.wrapper.style.bottom=`${$}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",x="bottom"}k?n.arrow.classList.add("driver-popover-arrow-none"):oi(a,x,e)}function oi(e,t,n){const o=w("popover");if(!o)return;const i=n.getBoundingClientRect(),a=Tt(),l=o.arrow,_=a.width,s=window.innerWidth,d=i.width,r=i.left,v=a.height,c=window.innerHeight,m=i.top,p=i.height;l.className="driver-popover-arrow";let h=t,u=e;t==="top"?(r+d<=0?(h="right",u="end"):r+d-_<=0&&(h="top",u="start"),r>=s?(h="left",u="end"):r+_>=s&&(h="top",u="end")):t==="bottom"?(r+d<=0?(h="right",u="start"):r+d-_<=0&&(h="bottom",u="start"),r>=s?(h="left",u="start"):r+_>=s&&(h="bottom",u="end")):t==="left"?(m+p<=0?(h="bottom",u="end"):m+p-v<=0&&(h="left",u="start"),m>=c?(h="top",u="end"):m+v>=c&&(h="left",u="end")):t==="right"&&(m+p<=0?(h="bottom",u="start"):m+p-v<=0&&(h="right",u="start"),m>=c?(h="top",u="start"):m+v>=c&&(h="right",u="end")),h?(l.classList.add(`driver-popover-arrow-side-${h}`),l.classList.add(`driver-popover-arrow-align-${u}`)):l.classList.add("driver-popover-arrow-none")}function ri(){const e=document.createElement("div");e.classList.add("driver-popover");const t=document.createElement("div");t.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const o=document.createElement("div");o.id="driver-popover-description",o.classList.add("driver-popover-description"),o.style.display="none",o.innerText="Popover description is here";const i=document.createElement("button");i.type="button",i.classList.add("driver-popover-close-btn"),i.setAttribute("aria-label","Close"),i.innerHTML="&times;";const a=document.createElement("footer");a.classList.add("driver-popover-footer");const l=document.createElement("span");l.classList.add("driver-popover-progress-text"),l.innerText="";const _=document.createElement("span");_.classList.add("driver-popover-navigation-btns");const s=document.createElement("button");s.type="button",s.classList.add("driver-popover-prev-btn"),s.innerHTML="&larr; Previous";const d=document.createElement("button");return d.type="button",d.classList.add("driver-popover-next-btn"),d.innerHTML="Next &rarr;",_.appendChild(s),_.appendChild(d),a.appendChild(l),a.appendChild(_),e.appendChild(i),e.appendChild(t),e.appendChild(n),e.appendChild(o),e.appendChild(a),{wrapper:e,arrow:t,title:n,description:o,footer:a,previousButton:s,nextButton:d,closeButton:i,footerButtons:_,progress:l}}function ai(){var e;const t=w("popover");t&&((e=t.wrapper.parentElement)==null||e.removeChild(t.wrapper))}function si(e={}){Re(e);function t(){g("allowClose")&&d()}function n(){const r=w("activeIndex"),v=g("steps")||[];if(typeof r>"u")return;const c=r+1;v[c]?s(c):d()}function o(){const r=w("activeIndex"),v=g("steps")||[];if(typeof r>"u")return;const c=r-1;v[c]?s(c):d()}function i(r){(g("steps")||[])[r]?s(r):d()}function a(){var r;if(w("__transitionCallback"))return;const v=w("activeIndex"),c=w("__activeStep"),m=w("__activeElement");if(typeof v>"u"||typeof c>"u"||typeof w("activeIndex")>"u")return;const p=((r=c.popover)==null?void 0:r.onPrevClick)||g("onPrevClick");if(p)return p(m,c,{config:g(),state:w()});o()}function l(){var r;if(w("__transitionCallback"))return;const v=w("activeIndex"),c=w("__activeStep"),m=w("__activeElement");if(typeof v>"u"||typeof c>"u")return;const p=((r=c.popover)==null?void 0:r.onNextClick)||g("onNextClick");if(p)return p(m,c,{config:g(),state:w()});n()}function _(){w("isInitialized")||(T("isInitialized",!0),document.body.classList.add("driver-active",g("animate")?"driver-fade":"driver-simple"),ti(),$e("overlayClick",t),$e("escapePress",t),$e("arrowLeftPress",a),$e("arrowRightPress",l))}function s(r=0){var v,c,m,p,h,u,f,S;const k=g("steps");if(!k){console.error("No steps to drive through"),d();return}if(!k[r]){d();return}T("__activeOnDestroyed",document.activeElement),T("activeIndex",r);const x=k[r],$=k[r+1],E=k[r-1],L=((v=x.popover)==null?void 0:v.doneBtnText)||g("doneBtnText")||"Done",A=g("allowClose"),H=typeof((c=x.popover)==null?void 0:c.showProgress)<"u"?(m=x.popover)==null?void 0:m.showProgress:g("showProgress"),G=(((p=x.popover)==null?void 0:p.progressText)||g("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${r+1}`).replace("{{total}}",`${k.length}`),F=((h=x.popover)==null?void 0:h.showButtons)||g("showButtons"),U=["next","previous",...A?["close"]:[]].filter(Ie=>!(F!=null&&F.length)||F.includes(Ie)),Y=((u=x.popover)==null?void 0:u.onNextClick)||g("onNextClick"),ne=((f=x.popover)==null?void 0:f.onPrevClick)||g("onPrevClick"),ge=((S=x.popover)==null?void 0:S.onCloseClick)||g("onCloseClick");lt({...x,popover:{showButtons:U,nextBtnText:$?void 0:L,disableButtons:[...E?[]:["previous"]],showProgress:H,progressText:G,onNextClick:Y||(()=>{$?s(r+1):d()}),onPrevClick:ne||(()=>{s(r-1)}),onCloseClick:ge||(()=>{d()}),...(x==null?void 0:x.popover)||{}}})}function d(r=!0){const v=w("__activeElement"),c=w("__activeStep"),m=w("__activeOnDestroyed"),p=g("onDestroyStarted");if(r&&p){const f=!v||(v==null?void 0:v.id)==="driver-dummy-element";p(f?void 0:v,c,{config:g(),state:w()});return}const h=(c==null?void 0:c.onDeselected)||g("onDeselected"),u=g("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),ni(),ai(),Qn(),Yn(),Jn(),st(),v&&c){const f=v.id==="driver-dummy-element";h&&h(f?void 0:v,c,{config:g(),state:w()}),u&&u(f?void 0:v,c,{config:g(),state:w()})}m&&m.focus()}return{isActive:()=>w("isInitialized")||!1,refresh:fe,drive:(r=0)=>{_(),s(r)},setConfig:Re,setSteps:r=>{st(),Re({...g(),steps:r})},getConfig:g,getState:w,getActiveIndex:()=>w("activeIndex"),isFirstStep:()=>w("activeIndex")===0,isLastStep:()=>{const r=g("steps")||[],v=w("activeIndex");return v!==void 0&&v===r.length-1},getActiveStep:()=>w("activeStep"),getActiveElement:()=>w("activeElement"),getPreviousElement:()=>w("previousElement"),getPreviousStep:()=>w("previousStep"),moveNext:n,movePrevious:o,moveTo:i,hasNextStep:()=>{const r=g("steps")||[],v=w("activeIndex");return v!==void 0&&r[v+1]},hasPreviousStep:()=>{const r=g("steps")||[],v=w("activeIndex");return v!==void 0&&r[v-1]},highlight:r=>{_(),lt({...r,popover:r.popover?{showButtons:[],showProgress:!1,progressText:"",...r.popover}:void 0})},destroy:()=>{d(!1)}}}var li=(e,t)=>t(),di=(e,t)=>t(),ci=V('<div class="grap-4 navbar border-b-4 border-primary-content bg-base-100"><div class="flex-1"><a class="btn btn-ghost hidden text-xl md:flex"> </a></div> <div class="flex-none space-x-2"><label id="uploadButton" for="battleScene" class="btn"><img width="30em"> <span class="hidden md:flex"> </span></label> <input type="file" id="battleScene" name="battleScene" accept="application/json" class="battle-scene-file-input file-input w-full max-w-xs svelte-ekzg43"> <button id="downloadBtn" class="btn"><img width="30em"> <span class="hidden md:flex"> </span></button> <button class="btn"><img width="30em"></button></div></div>');function ui(e,t){me(t,!1);const n=Ne(),o=()=>_e(Ae,"$_",n),i=L=>{const A=L.target;if(A&&A.files){const H=A.files[0];H&&Hn(H).then(G=>{$t(G)}),A.value=""}},a=()=>{let L=O.name.toLowerCase().trim().replace(/\s+/g,"_");On(O,L)},l=()=>{si({showProgress:!0,steps:[{element:"#sceneTitle",popover:{title:o()("scene_title"),description:o()("scene_title_description")}},{element:"#combatantsTable",popover:{title:o()("combatants_list"),description:o()("combatants_list_description")}},{element:"#editSceneBtn",popover:{title:o()("edit_scene"),description:o()("edit_scene_description")}},{element:"#runSceneBtn",popover:{title:o()("run_scene"),description:o()("run_scene_description")}},{element:"#downloadBtn",popover:{title:o()("download_scene"),description:o()("download_scene_description")}},{element:"#uploadButton",popover:{title:o()("upload_scene"),description:o()("upload_scene_description")}}]}).drive()};mt();var _=ci(),s=b(_),d=b(s),r=b(d,!0);I(()=>z(r,o()("app_title"))),y(d),y(s);var v=N(s,2),c=b(v),m=b(c);D(m,"src",`${K??""}/svg/upload-svgrepo-com.svg`),I(()=>D(m,"alt",o()("upload_alt")));var p=N(m,2),h=b(p,!0);I(()=>z(h,o()("upload_scene"))),y(p),y(c);var u=N(c,2);u.__change=i;var f=N(u,2);f.__click=[li,a];var S=b(f);D(S,"src",`${K??""}/svg/download-svgrepo-com.svg`),I(()=>D(S,"alt",o()("download_alt")));var k=N(S,2),x=b(k,!0);I(()=>z(x,o()("download_scene"))),y(k),y(f);var $=N(f,2);$.__click=[di,l];var E=b($);D(E,"src",`${K??""}/svg/circle-question-svgrepo-com.svg`),I(()=>D(E,"alt",o()("help_alt"))),y($),y(v),y(_),q(e,_),he()}Le(["change","click"]);const vi=e=>e;function pi(e){const t=e-1;return t*t*t+1}function _i(e,{delay:t=0,duration:n=400,easing:o=vi}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:o,css:a=>`opacity: ${a*i}`}}function fi(e,{delay:t=0,duration:n=400,easing:o=pi,axis:i="y"}={}){const a=getComputedStyle(e),l=+a.opacity,_=i==="y"?"height":"width",s=parseFloat(a[_]),d=i==="y"?["top","bottom"]:["left","right"],r=d.map(f=>`${f[0].toUpperCase()}${f.slice(1)}`),v=parseFloat(a[`padding${r[0]}`]),c=parseFloat(a[`padding${r[1]}`]),m=parseFloat(a[`margin${r[0]}`]),p=parseFloat(a[`margin${r[1]}`]),h=parseFloat(a[`border${r[0]}Width`]),u=parseFloat(a[`border${r[1]}Width`]);return{delay:t,duration:n,easing:o,css:f=>`overflow: hidden;opacity: ${Math.min(f*20,1)*l};${_}: ${f*s}px;padding-${d[0]}: ${f*v}px;padding-${d[1]}: ${f*c}px;margin-${d[0]}: ${f*m}px;margin-${d[1]}: ${f*p}px;border-${d[0]}-width: ${f*h}px;border-${d[1]}-width: ${f*u}px;`}}var mi=(e,t,n)=>t(C(n)),hi=V('<button class="btn text-4xl w-full h-full aspect-square"> </button>'),gi=(e,t)=>t(),wi=V('<dialog id="tickSelectionModal" class="modal"><div class="modal-box w-11/12 max-w-l"><form method="dialog"><button class="btn btn-circle btn-ghost btn-sm absolute right-2 top-2">✕</button></form> <h3 class="mb-5 text-2xl font-bold"> </h3> <div class="grid grid-cols-5 gap-1"><!> <div><button class="btn w-full h-full aspect-square"><img class="min-w-10" alt="toggle negation"></button></div></div></div> <form method="dialog" class="modal-backdrop"><button>close</button></form></dialog>');function bi(e,t){me(t,!0);const n=Ne(),o=()=>_e(Ae,"$_",n);let i,a;const l=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20];let _=ze(!1);function s(){return ae(_,!1),i.showModal(),new Promise($=>{a=$})}function d(){i.close()}function r($){d();let E=C(_)?-1:1;a(E*$)}function v(){ae(_,!C(_))}var c=wi(),m=b(c),p=N(b(m),2),h=b(p,!0);I(()=>z(h,o()("tick_selection_modal_header"))),y(p);var u=N(p,2),f=b(u);wt(f,17,()=>l,gt,($,E)=>{var L=hi();L.__click=[mi,r,E];var A=b(L,!0);y(L),I(()=>z(A,C(E))),q($,L)});var S=N(f,2),k=b(S);k.__click=[gi,v];var x=b(k);return D(x,"src",`${K??""}/svg/minus-svgrepo-com.svg`),y(k),y(S),y(u),y(m),We(2),y(c),Se(c,$=>i=$,()=>i),I(()=>pe(k,"btn-active",C(_))),q(e,c),he({show:s})}Le(["click"]);function vt(e,t,n){e.key==="Enter"&&t(C(n))}function yi(e,t,n){ae(t,re(n.Editing))}function xi(e,t,n){ae(t,re(n.Running)),kt()}var $i=(e,t,n)=>t(C(n)),ki=V('<div class="col-span-3 grid grid-cols-subgrid items-center gap-2 rounded-b-lg bg-gray-200 p-6"><div><input type="text" class="input input-bordered w-full max-w-md"></div> <div><input type="number" class="input input-bordered w-full max-w-20 svelte-1hrieh2"></div> <div class="w-16 justify-center"><button class="btn"><img width="30" alt="add combatant"></button></div></div>'),Si=(e,t,n)=>t(C(n)),Ei=()=>{},Ci=()=>{},Li=(e,t,n)=>t(C(n).id),Ni=V('<button class="btn btn-outline btn-error"><img width="30" alt="delete"></button>'),Ai=V('<div role="button" tabindex="0"><div><input type="text"></div> <div class="w-28"><input type="number"></div> <div class="w-16 justify-center"><!></div></div>'),Ii=V('<!> <div class="h-full w-full overflow-x-auto p-4 md:m-auto md:w-[800px] md:px-20"><div class="navbar bg-base-100"><div id="sceneTitle" class="flex-1"><input type="text" placeholder="Scene name..."></div> <div class="flex-none space-x-2"><button id="runSceneBtn" class="btn"><img width="30em" alt="download"> <span class="hidden md:flex"> </span></button> <button id="editSceneBtn" class="btn"><img width="30em" alt="toggle edit"> <span class="hidden md:flex"> </span></button></div></div> <div id="combatantsTable" class="mt-4 grid w-full grid-cols-[6fr_1fr_1fr]"><div class="col-span-3 grid grid-cols-subgrid gap-4 bg-gray-200 px-4 py-2 font-bold"><div> </div> <div id="initiativeColumn"> </div> <div></div></div> <!> <div class="my-2"></div> <!></div></div>',1);function Ti(e,t){me(t,!0);const n=Ne(),o=()=>_e(Ae,"$_",n),i={Editing:"EDITING",Running:"RUNNING"};let a=ze(re(rt())),l=ze(re(i.Running)),_,s;function d(P){P.name!==""&&(O.combatants.push(P),ae(a,re(rt())),_.focus(),_.select())}function r(P){O.combatants=O.combatants.filter(M=>M.id!==P)}function v(P){C(l)===i.Running&&s.show().then(M=>{P.initiative+=M,kt(P)})}var c=Ii(),m=pn(c);Se(bi(m,{}),P=>s=P,()=>s);var p=N(m,2),h=b(p),u=b(h),f=b(u);ue(f),y(u);var S=N(u,2),k=b(S);k.__click=[xi,l,i];var x=b(k);D(x,"src",`${K??""}/svg/circle-play-svgrepo-com.svg`);var $=N(x,2),E=b($,!0);I(()=>z(E,o()("run_scene_button"))),y($),y(k);var L=N(k,2);L.__click=[yi,l,i];var A=b(L);D(A,"src",`${K??""}/svg/pencil-svgrepo-com.svg`);var H=N(A,2),G=b(H,!0);I(()=>z(G,o()("edit_scene_button"))),y(H),y(L),y(S),y(h);var F=N(h,2),U=b(F),Y=b(U),ne=b(Y,!0);I(()=>z(ne,o()("column_name"))),y(Y);var ge=N(Y,2),Ie=b(ge,!0);I(()=>z(Ie,o()("column_initiative"))),y(ge),We(2),y(U);var Fe=N(U,2);Ye(Fe,()=>C(l)===i.Editing,P=>{var M=ki(),ie=b(M),R=b(ie);ue(R),I(()=>D(R,"placeholder",o()("placeholder_name"))),R.__keydown=[vt,d,a],Se(R,ee=>_=ee,()=>_),y(ie);var Q=N(ie,2),J=b(Q);ue(J),I(()=>D(J,"placeholder",o()("placeholder_initiative"))),J.__keydown=[vt,d,a],y(Q);var oe=N(Q,2),j=b(oe);j.__click=[$i,d,a];var we=b(j);D(we,"src",`${K??""}/svg/plus-svgrepo-com.svg`),y(j),y(oe),y(M),ve(R,()=>C(a).name,ee=>C(a).name=ee),ve(J,()=>C(a).initiative,ee=>C(a).initiative=ee),tt(3,M,()=>fi),q(P,M)});var Dt=N(Fe,4);wt(Dt,17,()=>O.combatants,gt,(P,M,ie)=>{var R=Ai();R.__click=[Si,v,M],R.__keydown=[Ei],R.__keyup=[Ci];var Q=b(R),J=b(Q);ue(J),y(Q);var oe=N(Q,2),j=b(oe);ue(j),y(oe);var we=N(oe,2),ee=b(we);Ye(ee,()=>C(l)===i.Editing,se=>{var le=Ni();le.__click=[Li,r,M];var Pt=b(le);D(Pt,"src",`${K??""}/svg/trash-svgrepo-com.svg`),y(le),tt(3,le,()=>_i,()=>({duration:200})),q(se,le)}),y(we),y(R),I(()=>{be(R,`grid col-span-3 grid-cols-subgrid items-center gap-2 rounded-none p-6 focus:outline-none ${(C(l)===i.Running?"cursor-pointer hover:bg-gray-100":"cursor-default")??""} ${(C(l)==i.Running&&ie===0?"border-4 border-green-300/100":"")??""} ${(ie>=(C(l)===i.Running?2:1)?"border-t-4 border-primary-content":"")??""}`),J.disabled=C(l)===i.Running,be(J,`input ${(C(l)===i.Editing?"input-bordered":"input-ghost disabled")??""} w-full max-w-md text-3xl svelte-1hrieh2`),j.disabled=C(l)===i.Running,be(j,`input ${(C(l)===i.Editing?"input-bordered":"input-ghost disabled")??""} w-full max-w-md text-5xl w-28 text-center svelte-1hrieh2`)}),ve(J,()=>C(M).name,se=>C(M).name=se),ve(j,()=>C(M).initiative,se=>C(M).initiative=se),q(P,R)}),y(F),y(p),I(()=>{f.disabled=C(l)===i.Running,be(f,`text-3xl input mr-4 w-full max-w-md ${(C(l)===i.Editing?"input-bordered":"input-ghost disabled")??""} svelte-1hrieh2`),pe(k,"btn-active",C(l)===i.Running),pe(L,"btn-active",C(l)===i.Editing),pe(U,"rounded-t-lg",C(l)===i.Editing),pe(U,"rounded-lg",C(l)===i.Running)}),ve(f,()=>O.name,P=>O.name=P),q(e,c),he()}Le(["click","keydown","keyup"]);var Bi=(e,t)=>t(),Di=(e,t)=>C(t).showModal(),Pi=V('<div><footer class="footer flex items-center border-t-4 border-primary-content p-4 text-neutral"><aside class="flex-1"><p> </p></aside> <button>Deutsch / English</button> <button> </button> <nav class="flex-none"><a href="https://github.com/k3ltis/splittermond-tickleiste" target="_blank"><img width="30em" alt="github"></a></nav></footer> <dialog id="dataPrivacyModal" class="modal"><div class="modal-box"><h3 class="text-lg font-bold"> </h3> <p class="py-4"> </p></div> <form method="dialog" class="modal-backdrop"><button>close</button></form></dialog></div>');function Mi(e,t){me(t,!1);const n=Ne(),o=()=>_e(je,"$locale",n),i=()=>_e(Ae,"$_",n);let a=_n();function l(){gn(je,o()==="en"?"de":"en")}mt();var _=Pi(),s=b(_),d=b(s),r=b(d),v=b(r);I(()=>z(v,`Copyright © k3ltis ${new Date().getFullYear()??""}`)),y(r),y(d);var c=N(d,2);c.__click=[Bi,l];var m=N(c,2);m.__click=[Di,a];var p=b(m,!0);I(()=>z(p,i()("data_privacy"))),y(m);var h=N(m,2),u=b(h),f=b(u);D(f,"src",`${K??""}/svg/github-142-svgrepo-com.svg`),y(u),y(h),y(s);var S=N(s,2),k=b(S),x=b(k),$=b(x,!0);I(()=>z($,i()("data_privacy_header"))),y(x);var E=N(x,2),L=b(E,!0);I(()=>z(L,i()("data_privacy_content"))),y(E),y(k),We(2),y(S),Se(S,A=>ae(a,A),()=>C(a)),y(_),q(e,_),he()}Le(["click"]);const Ri="Splittermond Tickleiste",zi="Initiative",Hi="Name",Oi="Combatants List",Wi="Displays the list of combatants part of the scene.",Fi="Data Privacy",Ui="This page does utilize the browser's local storage to locally save the scene in the user's browser. This is done, so that the user does not lose information when closing the browser application. If you wish to delete this information you can either clear your browser's cached web data or simply delete all entries while in the scene's edit mode. <br /><br /> No data is send to any remove server and no other user related data is processed by this page.",Ji="Data Privacy Information",qi="Download icon",Ki="Download Scene",Vi="Lets you download the current scene as a JSON file.",Gi="Edit Scene",Yi="Edit Scene",ji="Toggles edit mode to change the scene name and combatants list.",Xi="Help icon",Zi="Initiative",Qi="Name",eo="Run Scene",to="Run Scene",no="Ends edit mode and runs the scene, ordering all combatants by ascending initiative. <b>Clicking a combatant in run mode allows you to choose a number of ticks</b> to add to the combatant's initiative value, followed by a reordering. <br/><br/> You can re-enter <b>edit mode</b> at any time.",io="Scene Title",oo="Shows the current scene's name.",ro="Select Ticks",ao="Upload icon",so="Upload Scene",lo="Lets you choose a scene to load that was previously saved to your device.",co={app_title:Ri,column_initiative:zi,column_name:Hi,combatants_list:Oi,combatants_list_description:Wi,data_privacy:Fi,data_privacy_content:Ui,data_privacy_header:Ji,download_alt:qi,download_scene:Ki,download_scene_description:Vi,edit_scene:Gi,edit_scene_button:Yi,edit_scene_description:ji,help_alt:Xi,placeholder_initiative:Zi,placeholder_name:Qi,run_scene:eo,run_scene_button:to,run_scene_description:no,scene_title:io,scene_title_description:oo,tick_selection_modal_header:ro,upload_alt:ao,upload_scene:so,upload_scene_description:lo},uo="Splittermond Tickleiste",vo="Initiative",po="Name",_o="Liste der Kämpfer",fo="Zeigt die Liste der Kämpfer, die Teil der Szene sind.",mo="Datenschutz",ho="Diese Seite nutzt den lokalen Speicher des Browsers, um die Szene lokal im Browser des Nutzers zu speichern. Dies geschieht, damit der Nutzer keine Informationen verliert, wenn er die Browseranwendung schließt. Wenn Sie diese Informationen löschen möchten, können Sie entweder die zwischengespeicherten Webdaten Ihres Browsers löschen oder einfach alle Einträge im Bearbeitungsmodus der Szene löschen. <br/><br/> Es werden keine Daten an einen externen Server gesendet und keine anderen nutzerbezogenen Daten werden von dieser Seite verarbeitet.",go="Datenschutzinformationen",wo="Download-Icon",bo="Szene herunterladen",yo="Ermöglicht es Ihnen, die aktuelle Szene als JSON-Datei herunterzuladen.",xo="Szene bearbeiten",$o="Szene bearbeiten",ko="Wechselt in den Bearbeitungsmodus, um den Szenennamen und die Liste der Kämpfer zu ändern.",So="Hilfe-Icon",Eo="Initiative",Co="Name",Lo="Szene ausführen",No="Szene ausführen",Ao="Beendet den Bearbeitungsmodus und führt die Szene aus, indem alle Kämpfer nach aufsteigender Initiative geordnet werden. <b>Ein Klick auf einen Kämpfer im Ausführungsmodus ermöglicht es Ihnen, eine Anzahl von Ticks auszuwählen</b>, die zum Initiativwert des Kämpfers hinzugefügt werden, gefolgt von einer Neuanordnung. <br/><br/> Sie können jederzeit <b>in den Bearbeitungsmodus</b> zurückkehren.",Io="Szenenüberschrift",To="Zeigt den Namen der aktuellen Szene an.",Bo="Ticks auswählen",Do="Upload-Icon",Po="Szene hochladen",Mo="Ermöglicht es Ihnen, eine Szene auszuwählen, die zuvor auf Ihrem Gerät gespeichert wurde.",Ro={app_title:uo,column_initiative:vo,column_name:po,combatants_list:_o,combatants_list_description:fo,data_privacy:mo,data_privacy_content:ho,data_privacy_header:go,download_alt:wo,download_scene:bo,download_scene_description:yo,edit_scene:xo,edit_scene_button:$o,edit_scene_description:ko,help_alt:So,placeholder_initiative:Eo,placeholder_name:Co,run_scene:Lo,run_scene_button:No,run_scene_description:Ao,scene_title:Io,scene_title_description:To,tick_selection_modal_header:Bo,upload_alt:Do,upload_scene:Po,upload_scene_description:Mo};ht("en",co);ht("de",Ro);wn({fallbackLocale:"en",initialLocale:bn()});var zo=V('<div class="flex flex-col h-screen"><!> <!> <!></div>');function Ko(e,t){me(t,!0),mn(()=>{const l=Rn();l&&$t(l)}),fn(()=>{zn()});var n=zo(),o=b(n);ui(o,{});var i=N(o,2);Ti(i,{});var a=N(i,2);Mi(a,{}),y(n),q(e,n),he()}export{Ko as component};
